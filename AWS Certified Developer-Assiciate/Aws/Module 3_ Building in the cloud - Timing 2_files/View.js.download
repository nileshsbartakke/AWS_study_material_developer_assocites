var g_iVerificationCheckerTimeout,g_oVerificationAudio,g_oECDNManager,g_oPendingScreenShareData,g_oSocketConnected=!1,g_cSocketName="main",g_oAxiomCommManager=null,g_oAxiomMessageManager=null,g_oSlideManager=null,g_bAxiomEngineReady=!1,g_oEventTracker=null,g_oAxiomMediaPlayer=null,g_oAxiomMediaPlayerUI=null,g_iAxiomWebcastOutputIndex=-1,g_aAxiomISList=[],g_oScreenPanel=null,g_oScreenShareMediaReady=null,g_oScreenShareMediaPlayer=null,g_bAxiomStart=!1,g_oAxiomBrowserPopUp=null,g_oCourseTrackers={},g_oAxiomGroupChats={},g_iEventScreenCaptureReady=0,g_bEventScreenCaptureExitAction=!1,g_iPendingSlideAnimationCount=0,g_bPPTSlideLoaded=!1,g_bOnDemandMessageProcessed=!1,g_bScreenShareMediaReadyFound=!1,g_iIACWaitCalls=0,g_iIAC_MAXWAITTIME=20,g_iIAC_WAITINTERVAL=100,g_iMIN_FRAGMENT_COUNT=1,g_oCustomCallSet={prePageComplete:[],postPageComplete:[]},g_bEndExitReceived=!1,g_bStreamlessMode=!1,g_iStreamingModeSelected=0;function window_onload(){if(g_oSettings&&g_oSettings.EventKey&&g_oSettings.EventAttendeeKey){document.title=g_oSettings.EventDescription,window.addEventListener("beforeunload",window_unload),window.addEventListener("unload",window_unload);for(var iLup=0;iLup<g_oCustomCallSet.prePageComplete.length;iLup++)g_oCustomCallSet.prePageComplete[iLup].call();g_oSettings.ExitDelayModulo=0,1==g_oSettings.IsOnDemand&&(GroupChatInit=null,AddChatMessage=null,RemoveChatMessage=null,ModeratedChatInit=null,ModeratedChatQuestionSave=null,ModeratedChatQuestionReplySave=null,ModeratedChatQuestionDelete=null,ModeratedChatQuestionPriority=null,ModeratedChatQuestionAssignment=null,ModeratedChatAnswerSave=null,ModeratedChatAnswerDelete=null,ModeratedChatGeneralStatus=null),g_oSettings.EventScreenCaptureMode=parseInt(g_oSettings.EventScreenCaptureMode),window.g_aECDNs&&g_aECDNs.length&&!g_oSettings.EventScreenCaptureMode&&processECDNList(),1==g_oSettings.LLV&&1!=g_oSettings.IsOnDemand?LoadScript(g_oSettings.ScriptDir+"/VTS/Axiom/WebRTC.js",OnPageInit):ProcessIAC()}}var g_bVerifyManifestInProgress,g_bUnloadSent=!1;function window_unload(evt){if(!g_bUnloadSent&&(g_bUnloadSent=!0,g_oAxiomCommManager&&1!=g_oSettings.IsOnDemand&&!IsIE()&&(g_oAxiomCommManager.Close(g_cSocketName),g_oAxiomCommManager.DestroyWorker()),1==g_oSettings.IsOnDemand))new AxiomHTTP(g_oSettings.LASFileName+"?LASCmd=AI:"+g_oSettings.InstanceID+";$:42010&EventKey="+g_oSettings.EventKey+"&EventAttendeeKey="+g_oSettings.EventAttendeeKey,null,!0,null,null,null,null,null,!0)}function ProcessIAC(){!g_oSettings.Moderator&&window.g_oIAC&&g_oIAC.m_aServerList.length>1?(g_oIAC.Init(),setTimeout(IACFindBest,g_iIAC_WAITINTERVAL)):ProcessIACComplete()}function IACFindBest(){if(!g_oIAC.AreServersLoaded()&&g_iIACWaitCalls<g_iIAC_MAXWAITTIME)return g_iIACWaitCalls++,void setTimeout(IACFindBest,g_iIAC_WAITINTERVAL);g_oIAC.GetBestIAC()&&g_oIAC.m_oCurrServer&&(g_oSettings.SlideIACParam="&IAC="+URLEncode(g_oIAC.m_oCurrServer.SIP)),ProcessIACComplete()}function ProcessIACComplete(){OnPageInit()}function OnPageInit(){var oSlideFrame=document.getElementById("SlideFrame"),oLightningDetails={LASFileName:g_oSettings.LASFileName,InstanceID:g_oSettings.InstanceID,ScriptDir:g_oSettings.ScriptDir,SlideIACParam:g_oSettings.SlideIACParam},oEventDetails={EventKey:g_oSettings.EventKey};(g_oSlideManager=new SlideManager(oLightningDetails,oEventDetails)).EnableRendering(oSlideFrame),g_oSlideManager.ProcessSlideData(g_oSlides),g_oAxiomMessageManager=new AxiomMessageManager(null,null,onAxiomExecuteMessage,1!=g_oSettings.IsOnDemand),(g_oAxiomCommManager=new AxiomCommManager(g_oSettings)).SetEngineReadyHandler(g_cSocketName,{call:onAxiomEngineReady}),g_oAxiomCommManager.SetStartHandler(g_cSocketName,{call:onAxiomStartWebcast}),g_oAxiomCommManager.SetStopHandler(g_cSocketName,{call:onAxiomStopWebcast}),1!=g_oSettings.IsOnDemand&&g_oAxiomCommManager.SetExitActionHandler(g_cSocketName,{call:onAxiomExitAction}),g_oAxiomCommManager.SetDisplaySlideHandler(g_cSocketName,{call:onAxiomDisplaySlide}),g_oAxiomCommManager.SetDisplaySlideAnimationHandler(g_cSocketName,{call:onAxiomDisplaySlideAnimation}),g_oAxiomCommManager.SetDisplayPollHandler(g_cSocketName,{call:onAxiomDisplayPoll}),g_oAxiomCommManager.SetPanelCommandHandler(g_cSocketName,{call:onAxiomPanelCommand}),g_oAxiomCommManager.SetOptInRequestHandler(g_cSocketName,{call:onAxiomOptInRequest}),g_oAxiomCommManager.SetSegmentChangeHandler(g_cSocketName,{call:onAxiomSegmentChange}),g_oAxiomCommManager.SetScreenSharePublishHandler(g_cSocketName,{call:onAxiomScreenSharePublish}),g_oAxiomCommManager.SetScreenShareUnPublishHandler(g_cSocketName,{call:onAxiomScreenShareUnPublish}),g_oAxiomCommManager.SetScreenShareMediaReadyHandler(g_cSocketName,{call:onAxiomScreenShareMediaReady}),g_oAxiomCommManager.SetScreenShareSegmentChangeHandler(g_cSocketName,{call:onAxiomScreenShareSegmentChange}),g_oSettings.EventScreenCaptureMode||g_oAxiomCommManager.SetAttendanceVerificationCheckHandler(g_cSocketName,{call:onAxiomVerificationChecker}),(g_oAxiomBrowserPopUp=new BrowserPopUp).SetModal(document.getElementById("UserMessageModal")),g_oAxiomBrowserPopUp.SetModalBG(document.getElementById("UserMessageModalBG")),g_oAxiomBrowserPopUp.SetContentContainer(document.getElementById("UserMessageModalContent")),g_oAxiomBrowserPopUp.SetHeader(document.getElementById("UserMessageModalHeader")),g_oAxiomBrowserPopUp.SetTextArea(document.getElementById("UserMessageModalTextArea")),g_oAxiomBrowserPopUp.SetButtonContainer(document.getElementById("UserMessageModalButtonContainer")),1==g_oSettings.IsOnDemand?InitLayout():(g_oSettings.EventScreenCaptureMode||g_oAxiomCommManager.SetBroadcastMessageHandler(g_cSocketName,{call:onAxiomBroadcastMessage}),g_oAxiomCommManager.SetSendGenericMessageHandler(g_cSocketName,{call:onAxiomGenericMessage}),g_oAxiomCommManager.SetConfigUpdateHandler(g_cSocketName,{call:onAxiomConfigUpdate}),g_oAxiomCommManager.SetAddChatMessageHandler(g_cSocketName,{call:onGroupChatAddMessage}),g_oAxiomCommManager.SetRemoveChatMessageHandler(g_cSocketName,{call:onGroupChatRemoveMessage}),addEventListener("axiomError",onAxiomSocketError),addEventListener("axiomStatus",onAxiomSocketStatus),OpenMainSocket());for(var iLup=0;iLup<g_oCustomCallSet.postPageComplete.length;iLup++)g_oCustomCallSet.postPageComplete[iLup].call()}function SortPrecedence(oOutput1,oOutput2){return oOutput1.Sort>oOutput2.Sort?1:oOutput1.Sort<oOutput2.Sort?-1:0}function CheckServers(fnCallBack){for(var aCheckedServers=[],iLup=0;iLup<g_aIS.length;iLup++)aCheckedServers.push({Address:g_aIS[iLup],CPU:-1});GetServerCPU(fnCallBack,aCheckedServers)}function GetServerCPU(fnCallBack,aCheckedServers){if(1==aCheckedServers.length)fnCallBack&&fnCallBack(aCheckedServers[0].Address);else{var iLup=0,iIndex=Math.floor(Math.random()*aCheckedServers.length);if(-1==aCheckedServers[iIndex].CPU)new AxiomHTTP("https://"+aCheckedServers[iIndex].Address+"/GetCPU",NewReceiveServerCPU.bind(this,fnCallBack,aCheckedServers,iIndex),!0);else{var bAllChecked=!0;for(iLup=0;iLup<aCheckedServers.length;iLup++)-1==aCheckedServers[iLup].CPU&&(bAllChecked=!1);bAllChecked?(aCheckedServers.sort(CompareServers),fnCallBack&&fnCallBack(aCheckedServers[0].Address)):GetServerCPU(fnCallBack,aCheckedServers)}}}function NewReceiveServerCPU(fnCallBack,aCheckedServers,iServerIndex,cCPU){aCheckedServers[iServerIndex].CPU=parseInt(cCPU),aCheckedServers[iServerIndex].CPU<=5?fnCallBack&&fnCallBack(aCheckedServers[iServerIndex].Address):GetServerCPU(fnCallBack,aCheckedServers)}function OpenMainSocket(){InitLayout();var iIndex=g_oSettings.EventAttendeeKey%g_aIS.length,bForcePoll=!!g_oOverrideOptions.ForcePoll&&1==g_oOverrideOptions.ForcePoll.Value,oParams={Name:g_cSocketName,ServerURL:g_aIS[iIndex],MessageFilter:1==g_oSettings.Moderator?MQ_MESSAGEFILTER_SPEAKER:MQ_MESSAGEFILTER_AUDIENCE,ForcePoll:bForcePoll};g_oAxiomCommManager.Open(oParams)}function CompareServers(oServer1,oServer2){return oServer1.cpu>oServer2.cpu?1:oServer1.cpu<oServer2.cpu?-1:0}function onAxiomSocketError(evt){var cMessage="onCommError "+evt.toString();console.warn?console.warn(cMessage):console.log(cMessage)}function onAxiomSocketStatus(evt){if(evt.detail&&evt.detail.name==g_cSocketName&&"established"==evt.detail.message){if(!g_oSocketConnected&&(g_oSocketConnected=!0,g_oAxiomCommManager.GetCurrentState(g_cSocketName,{call:onAxiomCurrentState,temp:!0}),1==g_oSettings.Moderator&&"undefined"!=typeof g_oModerators)){for(var oStaff in g_oModerators)g_oModerators[oStaff].Connected=!1;g_oAxiomCommManager.SetStaffUpdateHandler(g_cSocketName,{call:onStaffUpdate})}setTimeout(SendClientInfo,250),g_oAxiomMediaPlayer&&g_oAxiomMediaPlayer.SendInfo()}}function onAxiomEngineReady(oEngineReady){oEngineReady&&oEngineReady.Running&&oEngineReady.EngineRecovered&&setTimeout(SendClientInfo,g_oSettings.EventAttendeeKey%7*100)}function SendClientInfo(){var cLIP,cIACServerKey,cIACServerName;if(window.g_oIAC&&g_oIAC.m_oCurrServer&&g_oIAC.m_oCurrServer.SIP)for(var iLup=0;iLup<window.IACList.length;iLup++)window.IACList[iLup].SID==g_oIAC.m_oCurrServer.SID&&(cLIP=window.IACList[iLup].LIP,cIACServerKey=g_oIAC.m_oCurrServer.ISK,cIACServerName=g_oIAC.m_oCurrServer.SID);else window.IACList&&window.IACList.length>0&&window.IACList[0].LIP.length>0&&(cLIP=window.IACList[0].LIP);var oInfo={};oInfo.AttendeeKey=parseInt(g_oSettings.EventAttendeeKey),oInfo.UserKey=g_oSettings.UserKey,oInfo.IACServerKey=cIACServerKey?parseInt(cIACServerKey):0,oInfo.IACServerName=cIACServerName||"",oInfo.InternalIPAddress=cLIP||"",oInfo.PublicIPAddress=g_oSettings.PublicIPAddress,oInfo.UserName=g_oSettings.UserName,oInfo.EMailAddress=g_oSettings.EMailAddress,oInfo.ClientBrowser=g_oSettings.ClientBrowser,oInfo.ClientOS=g_oSettings.ClientOS,g_oAxiomCommManager.SendAnalyticsClientInfo(g_cSocketName,null,oInfo)}function InitLayout(){g_oSettings.EventScreenCaptureMode&&SetupScreenCaptureMode(),DisplaySlide(0,g_oSettings.InitialSlideURL&&g_oSettings.InitialSlideURL.length>0?g_oSettings.InitialSlideURL:GetDefaultSlide()),Workspace.Initialize(),CreateSpeakersContent(),CreateAbstractContent(),CreateChapterContent(),CreateGroupChatContent(),CreateCourseTrackerContent(),CreateModeratedChat(),CreateMyCertificatesContent(),CreateHandoutsContent(),!g_oSettings.EventScreenCaptureMode&&0==g_oSettings.IsOnDemand&&g_oSettings.AttendeeAudioMode>0&&g_oAttendeeAudioOption&&g_oAttendeeAudioOption.ConferenceCode?ConfigureAttendeeAudioMode():AddAxiomMediaPlayer()}function onAxiomCurrentState(oState){if(g_oEventTracker=new EventTracker({UserKey:g_oSettings.UserKey,EventAttendeeKey:g_oSettings.EventAttendeeKey}),g_oAxiomMediaPlayerUI&&g_oAxiomMediaPlayerUI.showPoster(!0),oState.Start&&onAxiomStartWebcast(oState.Start,!0),oState.ScreenShare&&g_bAxiomStart&&(oState.ScreenShare.ManifestList&&AxiomMessageScreenShareMediaReady(oState.ScreenShare.ManifestList),oState.ScreenShare.Outputs))for(var iLup=0;iLup<oState.ScreenShare.Outputs.length;iLup++)AxiomMessageScreenShareSegment(oState.ScreenShare.Outputs[iLup]);if(oState.StaffList&&"undefined"!=typeof g_oModerators)for(var cStaff in oState.StaffList)onStaffUpdate(oState.StaffList[cStaff]);g_oAxiomCommManager.GetMessageQue(g_cSocketName)}function onAxiomConfigUpdate(oData){if(oData&&oData.Message)switch(oData.Message){case"SettingsUpdate":g_oSettings.FrameWidth=oData.FrameWidth,g_oSettings.FrameHeight=oData.FrameHeight,g_oSettings.IsOnDemand=oData.IsOnDemand,g_oSettings.IsSimulive=oData.IsSimulive,g_oSettings.AudioOnly=oData.AudioOnly,1==g_oSettings.IsOnDemand&&g_oAxiomCommManager.Close(g_cSocketName),g_oAxiomMediaPlayer&&g_oAxiomMediaPlayer.setSize(g_oSettings.FrameWidth,g_oSettings.FrameHeight)}}function onStaffUpdate(oStaff){if("undefined"!=typeof g_oModerators&&oStaff){var cKey="M"+oStaff.EventStaffKey,oModerator=g_oModerators[cKey];for(var cVal in oStaff)(!oModerator.hasOwnProperty(cVal)||oModerator.hasOwnProperty(cVal)&&oModerator[cVal]!=oStaff[cVal])&&(oModerator[cVal]=oStaff[cVal]);g_oModerators[cKey]=oModerator}}function onAxiomGenericMessage(oData){oData&&oData.RedirectURL&&window.open(oData.RedirectURL,"_self")}function onAxiomBroadcastMessage(oMessage){if(!(oMessage.TargetStaffKey&&0!=oMessage.TargetStaffKey||g_oAxiomBrowserPopUp.ExternalUseFlag)){g_oAxiomBrowserPopUp.Clean(),g_oAxiomBrowserPopUp.SetHeaderText(g_oMessages.WebcastMessage),g_oAxiomBrowserPopUp.SetContentText(oMessage.Message);var aButtons=[];aButtons.push(new BrowserPopUpButton(g_oMessages.CloseLabel,g_oAxiomBrowserPopUp.CloseModal)),g_oAxiomBrowserPopUp.AddButtons(aButtons),g_oAxiomBrowserPopUp.OpenModal()}}function onAxiomStartWebcast(oStart,bLate){for(var cKey in g_bEndExitReceived=!1,(g_bAxiomStart=!0)&&g_bStreamlessMode&&g_oAxiomMessageManager.Resume(),g_oEventTracker&&g_oEventTracker.SetPlayerEvents(),g_oCourseTrackers)g_oCourseTrackers[cKey].StartAnyViewTimers();1!=g_oSettings.IsOnDemand&&UpdateWebcastOutputs(oStart.ManifestList,bLate),1==g_oSettings.LLV&&1!=g_oSettings.IsOnDemand?CheckServers(AddAxiomMediaPlayer):bLate&&LoadNextWebcastOuput(),g_oAxiomMessageManager.SetStartTime(oStart.Time),Workspace&&Workspace.Transition()}function onAxiomStopWebcast(oStop){1!=g_oSettings.IsOnDemand&&(g_bEndExitReceived=!0,g_oAxiomMediaPlayer&&(g_oAxiomMediaPlayer.overrideMediaCheck(!0),g_oAxiomMediaPlayer.stopPending()),g_oAxiomMessageManager.AddMessage(oStop))}function onAxiomExitAction(oExit){oExit.ExitAction!=g_oSettings.ExitAction&&(g_oSettings.ExitAction=oExit.ExitAction),oExit.ExitData!=g_oSettings.ExitData&&(g_oSettings.ExitData=oExit.ExitData),oExit.ExitTarget!=g_oSettings.ExitTarget&&(g_oSettings.ExitTarget=oExit.ExitTarget),g_oSettings.ExitDelayModulo=oExit.ExitDelayModulo}function onAxiomDisplayPoll(oPoll){g_oAxiomMessageManager&&g_oAxiomMessageManager.AddMessage(oPoll)}function onAxiomDisplaySlide(oSlide){g_oAxiomMessageManager&&g_oAxiomMessageManager.AddMessage(oSlide)}function onAxiomDisplaySlideAnimation(oSlideAnimation){g_oAxiomMessageManager&&g_oAxiomMessageManager.AddMessage(oSlideAnimation)}function onAxiomVerificationChecker(oVerificationChecker){AxiomVerificationChecker(oVerificationChecker)}function onAxiomPanelCommand(oPanelCommand){g_oAxiomMessageManager&&g_oAxiomMessageManager.AddMessage(oPanelCommand)}function onAxiomOptInRequest(oData){for(var cKey in g_oAxiomGroupChats)g_oAxiomGroupChats[cKey].ProcessOptInResponse(oData)}function onAxiomSegmentChange(oSegment){var oOutput;if(g_oAxiomMediaPlayer&&g_oAxiomWebcastOutputs){if(oSegment&&oSegment.OutputKey&&(oOutput=g_oAxiomWebcastOutputs["M"+oSegment.OutputKey])){var iMinCount=MIN_DASH_SEGMENT_COUNT;oOutput.DestinationType==AXIOM_OUTPUT_DESTINATION_TYPE_HLS&&(iMinCount=MIN_HLS_SEGMENT_COUNT),oOutput.ManifestReady=oSegment.SegmentCount>=iMinCount,g_oAxiomWebcastOutputs["M"+oSegment.OutputKey]=oOutput}(oOutput=g_oAxiomWebcastOutputs[g_aAxiomWebcastOutputPrecedence[0].Output]).ManifestReady&&!g_oECDNManager&&setTimeout(LoadNextWebcastOuput,1e3)}}function onAxiomScreenSharePublish(oScreenSharePublish){g_oAxiomMessageManager&&g_oAxiomMessageManager.AddMessage(oScreenSharePublish)}function onAxiomScreenShareUnPublish(oScreenShareUnPublish){g_oAxiomMessageManager&&(g_oScreenShareMediaPlayer&&g_oScreenShareMediaPlayer.overrideMediaCheck(!0),g_oAxiomMessageManager.AddMessage(oScreenShareUnPublish))}function onAxiomScreenShareMediaReady(oScreenShareReady){g_oAxiomMessageManager&&g_oAxiomMessageManager.AddMessage(oScreenShareReady)}function onAxiomScreenShareSegmentChange(oSegment){g_oAxiomMessageManager&&oSegment&&oSegment.SegmentCount>=g_iMIN_FRAGMENT_COUNT&&g_oAxiomMessageManager.AddMessage(oSegment)}function onAxiomExecuteMessage(oMessage){oMessage instanceof AxiomSlide?AxiomMessageRenderSlide(oMessage):oMessage instanceof AxiomSlideAnimation?AxiomMessageRenderSlideAnimation(oMessage):oMessage instanceof AxiomStop?AxiomMessageStopWebcast(oMessage):oMessage instanceof AxiomPoll?AxiomMessageRenderPoll(oMessage):oMessage instanceof AxiomPanelCommand?AxiomMessagePanelCommand(oMessage):oMessage instanceof AxiomScreenShareReady?AxiomMessageScreenShareMediaReady(oMessage):oMessage instanceof AxiomScreenShareSegment?AxiomMessageScreenShareSegment(oMessage):oMessage instanceof AxiomScreenSharePublish?AxiomMessageScreenSharePublish(oMessage):oMessage instanceof AxiomScreenShareUnPublish&&AxiomMessageScreenShareUnPublish(oMessage)}function AxiomMessageStopWebcast(oMessage){for(var cKey in g_bAxiomStart=!1,g_iAxiomWebcastOutputIndex=-1,g_oCourseTrackers)g_oCourseTrackers[cKey].StopAnyViewTimers();g_oAxiomMediaPlayerUI&&(g_oAxiomMediaPlayerUI.reset(),g_oAxiomMediaPlayerUI.showPoster(!0)),Workspace&&Workspace.Transition(!0),1==g_oSettings.IsOnDemand?g_oAxiomMessageManager&&g_oAxiomMessageManager.Reset():(g_oAxiomMediaPlayer&&g_oAxiomMediaPlayer.unload(!0),1==g_oSettings.LLV&&1!=g_oSettings.IsOnDemand&&g_oAxiomMediaPlayer.destroy()),AxiomMessageScreenShareUnPublish(),g_oSettings.EventScreenCaptureMode?g_bEventScreenCaptureExitAction=oMessage.PerformExitAction:oMessage.PerformExitAction&&g_oSettings.ExitAction>=0&&(g_oSettings.ExitDelayModulo<1?PerformExitAction():(g_oAxiomBrowserPopUp.ExternalUseFlag||(g_oAxiomBrowserPopUp.Clean(),g_oAxiomBrowserPopUp.SetHeaderText(g_oMessages.WebcastMessage),g_oAxiomBrowserPopUp.SetContentText(g_oMessages.WebcastOverExitActionLabel),g_oAxiomBrowserPopUp.SetHideHeader(!0),g_oAxiomBrowserPopUp.SetDisableModalBGClick(!0),g_oAxiomBrowserPopUp.OpenModal()),setTimeout(PerformExitAction,1e3*(g_oSettings.EventAttendeeKey%g_oSettings.ExitDelayModulo+1)))),g_oECDNManager&&g_oECDNManager.reset(!0)}function PerformExitAction(){ProcessEventExitAction(g_oSettings.EventKey,g_oSettings.ExitAction.toString(),g_oSettings.ExitData,g_oSettings.ExitTarget,null)}function AxiomMessageRenderPoll(oPoll){if(oPoll){var cURL=null;0==oPoll.Key&&(cURL=g_oSettings.EndSlideURL&&g_oSettings.EndSlideURL.length>0?g_oSettings.EndSlideURL:GetDefaultSlide()),DisplayPoll(oPoll.Key,cURL)}}function AxiomMessageRenderSlide(oSlide){if(oSlide){var cURL=null;0==oSlide.Key&&(cURL=g_oSettings.EndSlideURL&&g_oSettings.EndSlideURL.length>0?g_oSettings.EndSlideURL:GetDefaultEndSlide());var oData={ContentType:oSlide.Type,SlideContentKey:oSlide.Key,SlideFlags:oSlide.Flags,Time:oSlide.Time};g_oSlideManager&&g_oSlideManager.ProcessSlideData({Key:oData}),g_bPPTSlideLoaded=!1,DisplaySlide(oSlide.Key,cURL)}}function AxiomMessageRenderSlideAnimation(oSlideAnimation){g_bPPTSlideLoaded&&g_oSlideManager?g_oSlideManager.PerformSlideAction(oSlideAnimation.Direction):g_iPendingSlideAnimationCount+=oSlideAnimation.Direction}function AxiomVerificationChecker(oVerificationChecker){AxiomVerificationCheckerClose(),g_oAxiomBrowserPopUp.Clean(),g_oAxiomBrowserPopUp.SetHeaderText(g_oMessages.WebcastMessage),g_oAxiomBrowserPopUp.SetContentText(oVerificationChecker.AlertMessage),g_oAxiomBrowserPopUp.ExternalUseFlag=1,oVerificationChecker.UseAudioAlert&&(g_oVerificationAudio||((g_oVerificationAudio=document.createElement("audio")).src=g_oSettings.ScriptDir+"/VTS/Axiom/EmergencyAlert.mp3",g_oVerificationAudio.loop=!0),g_oVerificationAudio.play());var aButtons=[];aButtons.push(new BrowserPopUpButton(oVerificationChecker.ConfirmationButtonText,AxiomVerificationCheckerSuccess.bind(this,oVerificationChecker.Time))),g_oAxiomBrowserPopUp.AddButtons(aButtons),g_oAxiomBrowserPopUp.SetDisableModalBGClick(!0),g_oAxiomBrowserPopUp.OpenModal(),g_iVerificationCheckerTimeout=setTimeout(AxiomVerificationCheckerClose,1e3*oVerificationChecker.MessageDuration)}function AxiomVerificationCheckerSuccess(iDateDisplayed){AxiomVerificationCheckerClose(),g_oAxiomCommManager.SendAttendanceVerificationResponse(g_cSocketName,null,g_oSettings.UserKey,iDateDisplayed)}function AxiomVerificationCheckerClose(){g_iVerificationCheckerTimeout&&(clearTimeout(g_iVerificationCheckerTimeout),g_iVerificationCheckerTimeout=0),g_oVerificationAudio&&!g_oVerificationAudio.paused&&g_oVerificationAudio.pause(),g_oAxiomBrowserPopUp.CloseModal(),g_oAxiomBrowserPopUp.ExternalUseFlag=0}function AxiomMessagePanelCommand(oPanelCommand){g_oSettings.EventScreenCaptureMode&&(g_oSettings.EventScreenCaptureMode&ESC_DISABLE_PANEL_COMMANDS)==ESC_DISABLE_PANEL_COMMANDS||Workspace&&Workspace.OnPanelAction(oPanelCommand.Key,oPanelCommand.Command)}function AxiomMessageScreenShareMediaReady(oScreenShareReady){if(!g_oScreenShareMediaReady&&(g_oScreenShareMediaReady=oScreenShareReady,1==g_oSettings.IsOnDemand||oScreenShareReady.SimuliveMode)){var oSegment={SessionKey:0,SegmentCount:3,DestinationType:AXIOM_OUTPUT_DESTINATION_TYPE_DASH};AxiomMessageScreenShareSegment(oSegment),AxiomMessageScreenShareSegment(oSegment={SessionKey:0,SegmentCount:3,DestinationType:AXIOM_OUTPUT_DESTINATION_TYPE_HLS})}}function AxiomMessageScreenSharePublish(oPublish){}function AxiomMessageScreenShareUnPublish(oUnPublish){g_oScreenShareMediaReady=null,g_oScreenShareMediaPlayer&&(g_oScreenShareMediaPlayer.destroy(),g_oScreenShareMediaPlayer=null),g_oScreenPanel&&(Workspace.DestroyPanel(g_oScreenPanel),g_oScreenPanel=null)}function AxiomMessageScreenShareSegment(oSegment){if(oSegment)if(g_oAxiomMediaPlayer&&g_oAxiomMediaPlayer.bLoaded||g_bAxiomStart&&g_bStreamlessMode){if(g_oPendingScreenShareData=null,g_oScreenPanel||(g_oScreenPanel=Workspace.CreatePanel("Screen Share",-9999,getScreenShareWorkspaceCloneType()),Workspace.TogglePanel(g_oScreenPanel)),!g_oScreenShareMediaPlayer){var oParams={};oParams.MediaContainer=g_oScreenPanel.ContentNode,oParams.Live=1!=g_oSettings.IsOnDemand,oParams.ScreenShare=!0,(g_oScreenShareMediaPlayer=new AxiomMediaPlayer(oParams,g_oSettings)).setHandler(AXIOM_MEDIA_PLAYER_METADATA_LOADED,onScreenSharePlayerMetaDataUpdate),g_oScreenShareMediaPlayer.setHandler(AXIOM_MEDIA_PLAYER_DATA_LOADED,onScreenSharePlayerDataUpdate),g_oScreenShareMediaPlayer.setHandler(AXIOM_MEDIA_PLAYER_PLAY,onScreenSharePlay)}LoadHTTPScreenShareAdaptive(oSegment)}else g_oPendingScreenShareData=oSegment}function LoadHTTPScreenShareAdaptive(oOutput){if(!g_oScreenShareMediaPlayer.bLoaded){var cMPDURL=g_oScreenShareMediaReady.MPD,cM3U8URL=g_oScreenShareMediaReady.M3U8;if(window.g_oIAC&&g_oIAC.m_oCurrServer&&g_oIAC.m_oCurrServer.SIP){var acSplits=cMPDURL.split("/");acSplits&&acSplits.length>3&&(acSplits[2]=g_oIAC.m_oCurrServer.SIP+"/IAC",cMPDURL=acSplits.join("/")),(acSplits=cM3U8URL.split("/"))&&acSplits.length>3&&(acSplits[2]=g_oIAC.m_oCurrServer.SIP+"/IAC",cM3U8URL=acSplits.join("/"))}(cMPDURL||cM3U8URL)&&(g_bAxiomStart&&g_bStreamlessMode&&-1==g_iAxiomWebcastOutputIndex?g_oScreenShareMediaPlayer.loadSource(cMPDURL,null,onShareScreenLoadComplete.bind(this,cM3U8URL)):g_oAxiomWebcastOutputs[g_aAxiomWebcastOutputPrecedence[g_iAxiomWebcastOutputIndex].Output].DestinationType==AXIOM_MANIFEST_TYPE_DASH_V2||g_oAxiomWebcastOutputs[g_aAxiomWebcastOutputPrecedence[g_iAxiomWebcastOutputIndex].Output].DestinationType==AXIOM_MANIFEST_TYPE_DASH?g_oScreenShareMediaPlayer.loadSource(cMPDURL,null,onShareScreenLoadComplete.bind(this,cM3U8URL)):g_oScreenShareMediaPlayer.loadSource(cM3U8URL,null,onShareScreenLoadComplete.bind(this,cMPDURL)))}}function onShareScreenLoadComplete(cM3U8URL,bSupport){!bSupport&&cM3U8URL&&g_oScreenShareMediaPlayer.loadSource(cM3U8URL)}function getScreenShareWorkspaceCloneType(){var iPanelType=124;if(!g_oScreenPanel)for(var iLup=0;iLup<Workspace.Panels.length;iLup++)if(125==Workspace.Panels[iLup].InternalID){iPanelType=125;break}return iPanelType}function onScreenSharePlayerMetaDataUpdate(){}function onScreenSharePlayerDataUpdate(){g_oAxiomMediaPlayer&&g_oAxiomMediaPlayer.isPaused()?g_oScreenShareMediaPlayer.pause():g_oScreenShareMediaPlayer.play(),g_oScreenShareMediaPlayer.mute()}function onScreenSharePlay(){AxiomScreenShareSeek()}function GetDefaultSlide(){return g_oSettings.LASFileName+"?LASCmd=AI:"+g_oSettings.InstanceID+";O:InitialSlideDefault.htm"}function GetDefaultEndSlide(){return g_oSettings.LASFileName+"?LASCmd=AI:"+g_oSettings.InstanceID+";O:DefaultPresentationEnded.htm"}function DisplaySlide(iSlideContentKey,cURL){if(g_oSlideManager){if(cURL){var aResult=cURL.match(/&SlideContentKey=([0-9]+)/);aResult&&aResult.length>1&&(iSlideContentKey=aResult[1])}iSlideContentKey?g_oSlideManager.DisplaySlide(iSlideContentKey,DisplaySlideOnComplete):g_oSlideManager.DisplayURL(cURL,DisplaySlideOnComplete)}}function DisplaySlideOnComplete(oSlide){oSlide.SlideContentKey>0&&SetChapterActive(oSlide.SlideContentKey,oSlide.Chapter,oSlide.ContentType)}function DisplayPoll(iPollKey,cURL){if(g_oSlideManager){var oCurrentSlide=g_oSlideManager.GetCurrentSlide();iPollKey&&(cURL=g_oSettings.LASFileName+"?LASCmd=AI:"+g_oSettings.InstanceID+";F:SF!30180&UserKey="+g_oSettings.UserKey+"&UserType="+g_oSettings.UserType+"&EventKey="+g_oSettings.EventKey+"&EventSurveyKey="+iPollKey,g_oSettings.SlideIACParam&&(cURL+=g_oSettings.SlideIACParam)),oCurrentSlide.ContentHTML&&-1!=oCurrentSlide.ContentHTML.indexOf(cURL)||g_oSlideManager.DisplayURL(cURL,DisplaySlideOnComplete)}}function DisplayPollResults(iPollKey){if(g_oSlideManager){var oCurrentSlide=g_oSlideManager.GetCurrentSlide(),cURL=g_oSettings.LASFileName+"?LASCmd=AI:"+g_oSettings.InstanceID+";F:SF!30188 &UserKey="+g_oSettings.UserKey+"&UserType="+g_oSettings.UserType+"&EventKey="+g_oSettings.EventKey+"&EventSurveyKey="+iPollKey;g_oSettings.SlideIACParam&&(cURL+=g_oSettings.SlideIACParam),oCurrentSlide.ContentHTML&&-1!=oCurrentSlide.ContentHTML.indexOf(cURL)||g_oSlideManager.DisplayURL(cURL,DisplaySlideOnComplete)}}function AddAxiomMediaPlayer(cAddress){var oFrame=document.getElementById("AxiomMediaFrame");g_oAxiomMediaPlayer&&(g_oAxiomMediaPlayer.destroy(),g_oAxiomMediaPlayer=null,oFrame&&(oFrame.innerHTML=""));var bIsOnDemand=1==g_oSettings.IsOnDemand;oFrame||((oFrame=document.createElement("div")).className="HiddenMediaFrame",document.body.appendChild(oFrame));var oMedia=document.createElement("div");oMedia.className="AxiomMediaPlayerContainer",oFrame.appendChild(oMedia);var bPreventAutoPlay=bIsOnDemand,oParams={};oParams.IEBuffer=g_oOverrideOptions.IEBuffer?g_oOverrideOptions.IEBuffer.Value:15,oParams.IEBufferLow=g_oOverrideOptions.IEBufferLow?g_oOverrideOptions.IEBufferLow.Value:1,oParams.IEBufferMin=g_oOverrideOptions.IEBufferMin?g_oOverrideOptions.IEBufferMin.Value:-1,oParams.IEAudioRecover=g_oOverrideOptions.IEAudioRecover?g_oOverrideOptions.IEAudioRecover.Value:0,oParams.DashLiveDelaySeconds=g_oOverrideOptions.DashLiveDelaySeconds?g_oOverrideOptions.DashLiveDelaySeconds.Value:0,oParams.DashStableBufferTime=g_oOverrideOptions.DashStableBufferTime?g_oOverrideOptions.DashStableBufferTime.Value:12,oParams.DashBandwidthSafetyFactor=g_oOverrideOptions.DashBandwidthSafetyFactor?g_oOverrideOptions.DashBandwidthSafetyFactor.Value:.7,oParams.DashManifestReloadCount=g_oOverrideOptions.DashManifestReloadCount?g_oOverrideOptions.DashManifestReloadCount.Value:3,oParams.DashRampQualitySeconds=g_oOverrideOptions.DashRampQualitySeconds?g_oOverrideOptions.DashRampQualitySeconds.Value:6e3,oParams.DashReloadAudioOnlyCount=g_oOverrideOptions.DashReloadAudioOnlyCount?g_oOverrideOptions.DashReloadAudioOnlyCount.Value:4,oParams.DashFragmentCheckTimeout=g_oOverrideOptions.DashFragmentCheckTimeout?g_oOverrideOptions.DashFragmentCheckTimeout.Value:1500,1==g_oSettings.LLV&&!bIsOnDemand&&cAddress&&cAddress.length>0&&((oParams={}).IceServers=[cAddress],oParams.AutoUseDevice=!1,oParams.MediaMode=1,oParams.GUID=g_oSettings.SGID),oParams.MediaContainer=oMedia,oParams.Live=!bIsOnDemand,oParams.Width=g_oSettings.FrameWidth,oParams.Height=g_oSettings.FrameHeight,oParams.AudioOnly=1==g_oSettings.AudioOnly,oParams.PreventAutoPlay=bPreventAutoPlay,oParams.CommManager=g_oAxiomCommManager,oParams.SocketName=g_cSocketName,oParams.TrackView=!0,oParams.DefaultVolume=g_oOverrideOptions.DefaultVolume?g_oOverrideOptions.DefaultVolume.Value:1,(g_oAxiomMediaPlayer=new AxiomMediaPlayer(oParams,g_oSettings)).setHandler(AXIOM_MEDIA_PLAYER_METADATA_LOADED,onAxiomMediaPlayerMetaDataUpdate),g_oAxiomMediaPlayer.setHandler(AXIOM_MEDIA_PLAYER_DATA_LOADED,onAxiomMediaPlayerDataUpdate),g_oAxiomMediaPlayer.setHandler(AXIOM_MEDIA_PLAYER_PLAY,onAxiomMediaPlayerPlay);var oUIConfigOptions={};oUIConfigOptions.AudioOnlyMessage=g_oSettings.AudioOnlyMessage,bIsOnDemand?(g_oAxiomMediaPlayer.setHandler(AXIOM_MEDIA_PLAYER_COMPLETE,onAxiomMediaPlayerComplete),g_oAxiomMediaPlayer.setHandler(AXIOM_MEDIA_PLAYER_PLAY,onAxiomMediaPlayerPlay),g_oAxiomMediaPlayer.setHandler(AXIOM_MEDIA_PLAYER_PAUSE,onAxiomMediaPlayerPause),g_oAxiomMediaPlayer.setHandler(AXIOM_MEDIA_PLAYER_SEEKING,onAxiomMediaPlayerSeeking),g_oAxiomMediaPlayer.setHandler(AXIOM_MEDIA_PLAYER_SEEKED,onAxiomMediaPlayerSeeked)):(1!=g_oSettings.LLV||bIsOnDemand||g_oAxiomMediaPlayer.setHandler(AXIOM_MEDIA_PLAYER_RTC_UPDATE,onAxiomMediaPlayerRTCStateUpdate),g_oAxiomMediaPlayer.setHandler(AXIOM_MEDIA_PLAYER_AUTO_PLAY_FAILED,onAxiomMediaPlayerAutoPlayFailed),oUIConfigOptions.hideTopControlsSection=!0,oUIConfigOptions.hideMediaControlsSection=!0,oUIConfigOptions.hideTimeSection=!0),g_oAxiomMessageManager.SetMediaPlayer(g_oAxiomMediaPlayer),g_oAxiomMediaPlayerUI=new AxiomMediaPlayerUI(g_oAxiomMediaPlayer,oFrame,g_oAxiomMessageManager,g_oSettings.PosterImageURL,oUIConfigOptions),bIsOnDemand&&LoadNextWebcastOuput()}function onAxiomMediaPlayerRTCStateUpdate(oEvent){switch(oEvent.state){case"initDevice":break;case"connected":case"completed":g_oAxiomMediaPlayerUI&&(g_oAxiomMediaPlayerUI.setMessage(""),g_oSettings.AudioOnly||setTimeout(DelayVideo,500));break;case"terminated":g_oAxiomMediaPlayerUI&&g_oAxiomMediaPlayerUI.setMessage(g_oMessages.ConnectionFail);break;case"deviceUpdateSuccess":break;case"reconnected":g_oAxiomMediaPlayerUI&&g_oAxiomMediaPlayerUI.setMessage("")}}function DelayVideo(){g_oAxiomMediaPlayerUI.showPoster(!1)}function onAxiomMediaPlayerComplete(){1==g_oSettings.IsOnDemand&&(AxiomMessageStopWebcast({PerformExitAction:!0}),AxiomMessageRenderSlide({Key:0}))}function onAxiomMediaPlayerPlay(){if(g_oScreenShareMediaPlayer&&g_oScreenShareMediaPlayer.play(),g_oSlideManager){var oContent=g_oSlideManager.GetCurrentSlideContent();oContent instanceof AxiomMediaPlayer&&g_oAxiomMediaPlayer&&oContent.play()}}function onAxiomMediaPlayerPause(){if(g_oScreenShareMediaPlayer&&g_oScreenShareMediaPlayer.pause(),g_oSlideManager){var oContent=g_oSlideManager.GetCurrentSlideContent();oContent instanceof AxiomMediaPlayer&&g_oAxiomMediaPlayer&&oContent.pause()}}function onAxiomMediaPlayerSeeking(){}function onAxiomMediaPlayerSeeked(){AxiomScreenShareSeek(),VideoMediaSlideSeekToPlace()}function AxiomScreenShareSeek(){if(g_oScreenShareMediaReady&&(1==g_oSettings.IsOnDemand||g_oScreenShareMediaReady.SimuliveMode)&&g_oScreenShareMediaPlayer){var iScreenSeek=g_oAxiomMessageManager.GetCurrentTime()-g_oScreenShareMediaReady.Time;g_oScreenShareMediaPlayer.seek(iScreenSeek,!0),g_oAxiomMediaPlayer&&g_oAxiomMediaPlayer.isPaused()&&g_oScreenShareMediaPlayer.pause()}}function onAxiomMediaPlayerAutoPlayFailed(){var oContent=g_oSlideManager.GetCurrentSlideContent();oContent instanceof AxiomMediaPlayer&&g_oAxiomMediaPlayer&&oContent.pause(),g_oAxiomBrowserPopUp.Clean(),g_oAxiomBrowserPopUp.SetHeaderText(g_oMessages.WebcastMessage),g_oAxiomBrowserPopUp.SetHideHeader(!1),g_oAxiomBrowserPopUp.SetDisableModalBGClick(!0),g_oAxiomBrowserPopUp.SetContentText(g_oMessages.AutoPlayMessage);var aButtons=[];aButtons.push(new BrowserPopUpButton("Play",onAutoPlayClick)),g_oAxiomBrowserPopUp.AddButtons(aButtons),g_oAxiomBrowserPopUp.OpenModal()}function onAutoPlayClick(){g_oAxiomBrowserPopUp.CloseModal(),g_oAxiomMediaPlayer&&g_oAxiomMediaPlayer.play(),g_oScreenShareMediaPlayer&&g_oScreenShareMediaPlayer.play(),VideoMediaSlideSeekToPlace();var oContent=g_oSlideManager.GetCurrentSlideContent();oContent instanceof AxiomMediaPlayer&&g_oAxiomMediaPlayer&&oContent.play()}function onResumeClick(){g_oAxiomBrowserPopUp.CloseModal(),g_oAxiomMediaPlayer&&(g_oAxiomMediaPlayer.play(),g_oAxiomMediaPlayer.seek(g_oSettings.ResumeTime))}function onStartOverClick(){g_oAxiomBrowserPopUp.CloseModal(),g_oAxiomMediaPlayer&&g_oAxiomMediaPlayer.play()}function onAxiomMediaPlayerMetaDataUpdate(){if(1==g_oSettings.IsOnDemand&&!g_bOnDemandMessageProcessed&&g_oRecordedMessages){g_bOnDemandMessageProcessed=!0,g_bScreenShareMediaReadyFound=!1;var oMessage,iMessageType,iLup=0;for(iLup=0;iLup<g_oRecordedMessages.length;iLup++)if((iMessageType=(oMessage=g_oRecordedMessages[iLup])[MSG_ATTR_MESSAGE_TAG])==MSG_SCREENSHARE_MEDIAREADY){g_bScreenShareMediaReadyFound=!0;break}for(iLup=0;iLup<g_oRecordedMessages.length;iLup++)(iMessageType=(oMessage=g_oRecordedMessages[iLup])[MSG_ATTR_MESSAGE_TAG])!=MSG_SCREENSHARE_PUBLISH&&iMessageType!=MSG_SCREENSHARE_UNPUBLISH&&iMessageType!=MSG_SCREENSHARE_MEDIAREADY?g_oAxiomCommManager.ProcessMessage(g_cSocketName,oMessage):!g_bScreenShareMediaReadyFound||iMessageType!=MSG_SCREENSHARE_PUBLISH&&iMessageType!=MSG_SCREENSHARE_UNPUBLISH&&iMessageType!=MSG_SCREENSHARE_MEDIAREADY||g_oAxiomCommManager.ProcessMessage(g_cSocketName,oMessage)}}function onAxiomMediaPlayerDataUpdate(){if(g_iEventScreenCaptureReady++,g_oPendingScreenShareData&&AxiomMessageScreenShareSegment(g_oPendingScreenShareData),1==g_oSettings.IsOnDemand&&!g_oSettings.EventScreenCaptureMode&&g_oAxiomMediaPlayer)if(g_oAxiomMediaPlayer.bPendingMediaSwitch||g_oSettings.ResumeTime<=0)g_oAxiomMediaPlayer.play();else{g_oAxiomMediaPlayer.pause();var cMessage=StringReplace(g_oMessages.BookMarkMessage,"{Time}",FormatTime(g_oSettings.ResumeTime));g_oAxiomBrowserPopUp.Clean(),g_oAxiomBrowserPopUp.SetHeaderText(g_oMessages.WebcastMessage),g_oAxiomBrowserPopUp.SetHideHeader(!0),g_oAxiomBrowserPopUp.SetDisableModalBGClick(!0),g_oAxiomBrowserPopUp.SetContentText(cMessage);var aButtons=[];aButtons.push(new BrowserPopUpButton(g_oMessages.ResumeButton,onResumeClick)),aButtons.push(new BrowserPopUpButton(g_oMessages.StartOverButton,onStartOverClick)),g_oAxiomBrowserPopUp.AddButtons(aButtons),g_oAxiomBrowserPopUp.OpenModal()}g_oAxiomMediaPlayerUI&&g_oAxiomMediaPlayerUI.showControls(!0)}function UpdateWebcastOutputs(oAxiomManifestList,bLate){var oOutput;for(var oVal in g_oAxiomWebcastOutputs)(oOutput=g_oAxiomWebcastOutputs[oVal])&&oAxiomManifestList[oOutput.AxiomWebcastOutputKey]&&(oOutput.ManifestURL=oAxiomManifestList[oOutput.AxiomWebcastOutputKey].MFURL,oOutput.ManifestReady=bLate,g_oAxiomWebcastOutputs[oVal]=oOutput)}function LoadNextWebcastOuput(iIndex){if(g_oAxiomMediaPlayer&&!g_oAxiomMediaPlayer.bLoaded&&(!g_bVerifyManifestInProgress||iIndex)&&(g_bVerifyManifestInProgress=!0,(iIndex=iIndex&&iIndex>0?iIndex:0)>=g_aAxiomWebcastOutputPrecedence.length&&(g_bVerifyManifestInProgress=!1),g_aAxiomWebcastOutputPrecedence[iIndex])){var oOutput=g_oAxiomWebcastOutputs[g_aAxiomWebcastOutputPrecedence[iIndex].Output];if(oOutput&&oOutput.ManifestReady&&oOutput.ManifestURL)switch(oOutput.DestinationType){case AXIOM_MANIFEST_TYPE_DASH:case AXIOM_MANIFEST_TYPE_HLS:case AXIOM_MANIFEST_TYPE_DASH_V2:case AXIOM_MANIFEST_TYPE_HLS_V7:LoadNextWebcastOuputHelper(iIndex,oOutput);break;default:LoadNextWebcastOuput(iIndex+1)}else LoadNextWebcastOuput(iIndex+1)}}function LoadNextWebcastOuputHelper(iOutputIndex,oOutput){g_bVerifyManifestInProgress=!0;var cLIP,cIACServerKey,cIACServerName,cURL=oOutput.ManifestURL;if(1==g_oSettings.IsOnDemand&&g_oSettings.LiveCDNPath&&g_oSettings.LiveCDNPath.length>0&&g_oSettings.OnDemandCDNPath&&g_oSettings.OnDemandCDNPath.length>0&&(cURL=StringReplace(cURL,g_oSettings.LiveCDNPath,g_oSettings.OnDemandCDNPath)),window.g_oIAC&&g_oIAC.m_oCurrServer&&g_oIAC.m_oCurrServer.SIP){for(var iLup=0;iLup<window.IACList.length;iLup++)window.IACList[iLup].SID==g_oIAC.m_oCurrServer.SID&&(cLIP=window.IACList[iLup].LIP,cIACServerKey=g_oIAC.m_oCurrServer.ISK,cIACServerName=g_oIAC.m_oCurrServer.SID);var acSplits=cURL.split("/");acSplits&&acSplits.length>3&&(acSplits[2]=g_oIAC.m_oCurrServer.SIP+"/IAC",cURL=acSplits.join("/"))}else window.IACList&&window.IACList.length>0&&window.IACList[0].LIP.length>0&&(cLIP=window.IACList[0].LIP);var iTimeoutMS=1e3*g_oSettings.VerifyManifestTimeout;g_oAxiomMediaPlayer.loadSource(cURL,iTimeoutMS,function(bSuccess){g_bVerifyManifestInProgress=!1,bSuccess?(g_oAxiomMediaPlayer.setOutputParams(oOutput.AxiomWebcastOutputKey,cIACServerKey,cLIP,cIACServerName),g_iAxiomWebcastOutputIndex=iOutputIndex,g_oAxiomMediaPlayer.SendInfo()):LoadNextWebcastOuput(iOutputIndex+1)})}var GetWorkspaceViewSize=null;function AxiomDoPollingSubmit(iEventSurveyKey,cParams){g_oAxiomCommManager.SendPollResponse(g_cSocketName,null,g_oSettings.UserKey,cParams)}function GroupChatInit(fnAddChat,fnRemoveChat){g_oAxiomCommManager&&(fnAddChat&&g_oAxiomCommManager.SetAddChatMessageHandler(g_cSocketName,{call:fnAddChat}),fnRemoveChat&&g_oAxiomCommManager.SetRemoveChatMessageHandler(g_cSocketName,{call:fnRemoveChat}))}function AddChatMessage(iChatRoomKey,iChatUserKey,cUserName,iLocaleID,cFrontTag,cEndTag,cPostText){g_oAxiomCommManager&&g_oAxiomCommManager.AddChatMessage(g_cSocketName,null,iChatRoomKey,iChatUserKey,cUserName,iLocaleID,cFrontTag,cEndTag,cPostText)}function RemoveChatMessage(iChatRoomKey,iChatRoomDetailKey){g_oAxiomCommManager&&g_oAxiomCommManager.RemoveChatMessage(g_cSocketName,null,iChatRoomKey,iChatRoomDetailKey)}function OptInRequestSend(iChatRoomKey){g_oAxiomCommManager&&g_oAxiomCommManager.OptInRequestSend(g_cSocketName,null,iChatRoomKey)}function ModeratedChatInit(fnQuestionAdd,fnQuestionDelete,fnQuestionPriority,fnQuestionAssignment,fnAnswerSave,fnAnswerDelete,fnGeneralStatus){g_oAxiomCommManager&&(fnQuestionAdd&&g_oAxiomCommManager.SetQuestionSaveHandler(g_cSocketName,{call:fnQuestionAdd}),fnQuestionDelete&&g_oAxiomCommManager.SetQuestionDeleteHandler(g_cSocketName,{call:fnQuestionDelete}),fnQuestionPriority&&g_oAxiomCommManager.SetQuestionPriorityHandler(g_cSocketName,{call:fnQuestionPriority}),fnQuestionAssignment&&g_oAxiomCommManager.SetQuestionAssignmentHandler(g_cSocketName,{call:fnQuestionAssignment}),fnAnswerSave&&g_oAxiomCommManager.SetAnswerSaveHandler(g_cSocketName,{call:fnAnswerSave}),fnAnswerDelete&&g_oAxiomCommManager.SetAnswerDeleteHandler(g_cSocketName,{call:fnAnswerDelete}),fnGeneralStatus&&g_oAxiomCommManager.SetGeneralStatusHandler(g_cSocketName,{call:fnGeneralStatus}))}function ModeratedChatQuestionSave(cQuestion,cPriority,iEventQuestionKey){g_oAxiomCommManager&&g_oAxiomCommManager.QuestionSave(g_cSocketName,null,g_oSettings.EventAttendeeKey,cQuestion,cPriority,iEventQuestionKey,MQ_MESSAGEFILTER_SPEAKER)}function ModeratedChatQuestionReplySave(iEventQuestionKey,cText,iEventQuestionAnswerKey){g_oAxiomCommManager&&g_oAxiomCommManager.AnswerSaveAtt(g_cSocketName,null,g_oSettings.EventAttendeeKey,iEventQuestionKey,cText,iEventQuestionAnswerKey)}function ModeratedChatQuestionDelete(iEventQuestionKey){g_oAxiomCommManager&&g_oAxiomCommManager.QuestionDelete(g_cSocketName,null,g_oSettings.EventAttendeeKey,iEventQuestionKey)}function ModeratedChatQuestionPriority(iEventQuestionKey,iPriority){g_oAxiomCommManager&&g_oAxiomCommManager.QuestionPriority(g_cSocketName,null,g_oSettings.EventAttendeeKey,iEventQuestionKey,iPriority)}function ModeratedChatQuestionAssignment(iEventQuestionKey,iStaffKey){g_oAxiomCommManager&&g_oAxiomCommManager.QuestionAssignment(g_cSocketName,null,g_oSettings.EventAttendeeKey,iEventQuestionKey,iStaffKey)}function ModeratedChatAnswerSave(iReplyToEventQuestionKey,cAnswer,cStatus,iDelegateEventStaffKey,iEventQuestionAnswerKey){g_oAxiomCommManager&&g_oAxiomCommManager.AnswerSave(g_cSocketName,null,g_oSettings.EventAttendeeKey,iReplyToEventQuestionKey,cAnswer,cStatus,iDelegateEventStaffKey,iEventQuestionAnswerKey)}function ModeratedChatAnswerDelete(iEventQuestionKey,iEventQuestionAnswerKey){g_oAxiomCommManager&&g_oAxiomCommManager.AnswerDelete(g_cSocketName,null,g_oSettings.EventAttendeeKey,iEventQuestionKey,iEventQuestionAnswerKey)}function ModeratedChatGeneralStatus(iEventQuestionKey,iUserKey,iStatus){g_oAxiomCommManager&&g_oAxiomCommManager.GeneralStatus(g_cSocketName,null,g_oSettings.EventAttendeeKey,iEventQuestionKey,iUserKey,iStatus)}function CreateSpeakersContent(){var oAxiomSpeakerBio=document.getElementById("AxiomWorkspaceBioContainer");if(oAxiomSpeakerBio){var oData,oRow,oHolder,oElem,oContent=document.createElement("div");oContent.className="AxiomSpeakerListPanel",oAxiomSpeakerBio.appendChild(oContent);for(var iLup=0;iLup<g_aStafferList.length;iLup++)oData=g_aStafferList[iLup],(oRow=document.createElement("div")).className="AxiomSPLRow",oContent.appendChild(oRow),(oHolder=document.createElement("div")).className="AxiomSPLImageHolder",oRow.appendChild(oHolder),(oElem=document.createElement("img")).className="AxiomSPLImage",oElem.src=oData.EmoticonImage,oHolder.appendChild(oElem),oContentHolder=document.createElement("div"),oContentHolder.className="AxiomSPLContentHolder",oRow.appendChild(oContentHolder),(oElem=document.createElement("p")).innerHTML=oData.Name,oElem.className="AxiomSPLName",oContentHolder.appendChild(oElem),oData.JobTitle&&""!=oData.JobTitle&&((oElem=document.createElement("p")).innerHTML=oData.JobTitle,oElem.className="AxiomSPLJobTitle",oContentHolder.appendChild(oElem)),oData.CompanyName&&""!=oData.CompanyName&&((oElem=document.createElement("p")).innerHTML=oData.CompanyName,oElem.className="AxiomSPLCompanyName",oContentHolder.appendChild(oElem)),(oElem=document.createElement("div")).innerHTML=oData.Bio,oElem.className="AxiomSPLBio",oRow.appendChild(oElem)}}function CreateHandoutsContent(){var oAxiomHandouts=document.getElementById("AxiomWorkspaceHandoutsContainer");if(oAxiomHandouts){var oContent=document.createElement("div");oContent.className="SL_ListHolder",oAxiomHandouts.appendChild(oContent);var oHandout,oListHolder,oHolder,oImgHolder,oSpanImg,oElem,oRow=document.createElement("ul");for(var oKey in oRow.className="SL_ListRowContainer",oContent.appendChild(oRow),g_oHandouts)(oHandout=g_oHandouts[oKey])&&((oListHolder=document.createElement("li")).className="SL_ListRow",oRow.appendChild(oListHolder),(oHolder=document.createElement("div")).className="SL_ListRowHolder",oListHolder.appendChild(oHolder),(oImgHolder=document.createElement("div")).className="SL_ListRowImageHolder",oHolder.appendChild(oImgHolder),(oSpanImg=document.createElement("span")).className="SL_ListRowImage",oSpanImg.style.backgroundImage="url("+oHandout.FileTypeImage+")",oImgHolder.appendChild(oSpanImg),oContentHolder=document.createElement("div"),oContentHolder.className="SL_ListRowTopTextHolder",oHolder.appendChild(oContentHolder),(oElem=document.createElement("p")).innerHTML=oHandout.Title,oElem.className="SL_ListRowText1",oContentHolder.appendChild(oElem),(oElem=document.createElement("p")).innerHTML=oHandout.FileSize,oElem.className="SL_ListRowText3",oContentHolder.appendChild(oElem),(oElem=document.createElement("button")).innerHTML=g_oMessages.View,oElem.className="SL_ListRowActionButton",oElem.setAttribute("data-attachment-key",oHandout.AttachmentKey),oElem.addEventListener("click",HandoutClick),oContentHolder.appendChild(oElem),(oElem=document.createElement("div")).setAttribute("RatingKey",oHandout.AttachmentKey),oElem.setAttribute("aria-hidden","true"),oElem.className="HandoutRatingDiv",oContentHolder.appendChild(oElem));1==g_oSettings.RatingsEnabled&&LoadScript(g_oSettings.ScriptDir+"/VTS/RatingScript.js",function(){SetRatingInShow(58,g_oSettings.ShowUserActivityKey,null,null,g_oSettings.InstanceID)})}}function CreateAbstractContent(){var oEventAbstract=document.getElementById("AxiomWorkspaceAbstractContainer");if(oEventAbstract){var oAbstract=document.getElementById("Abstract");oAbstract&&(oEventAbstract.innerHTML=oAbstract.innerHTML)}}function CreateGroupChatContent(){var aElems=document.getElementsByClassName("AxiomGroupChat");aElems&&aElems.length&&(LoadStylesheet(g_oSettings.CSSDir+"/Axiom/GroupChat.css"),LoadScript(g_oSettings.ScriptDir+"/jscolor.js"),LoadScript(g_oSettings.ScriptDir+"/VTS/GroupChatShared.js",function(){LoadScript(g_oSettings.ScriptDir+"/VTS/Axiom/GroupChat.js",function(){for(var oAxiomGroupChat,oElem,oLightningDetails={LASFileName:g_oSettings.LASFileName,InstanceID:g_oSettings.InstanceID,ScriptDir:g_oSettings.ScriptDir},iLup=0;iLup<aElems.length;iLup++)oElem=aElems[iLup],oConfig=window["WorkspaceProperties"+oElem.getAttribute("data-workspace-key")],oConfig||(oConfig={CreateMessageRow:CreateMessageRow,CreateUserRow:CreateUserRow,CreateUserRow:CreateUserRow,Polling:g_oSettings.IsOnDemand,ResizeRequest:null,TranslatorCallback:TranslatorCallback,HideReadingMode:!0,ExternalStartListening:StartGroupChatListenerComplete},1!=g_oSettings.IsOnDemand&&(oConfig.ExternalAddMessage=AddChatMessage,oConfig.ExternalRemoveMessage=RemoveChatMessage,oConfig.ExternalOptIn=OptInRequestSend,oConfig.ExternalStopListening=null)),oAxiomGroupChat=new AxiomGroupChatRoom(oConfig,oLightningDetails,g_oMessages),aElems[iLup].appendChild(oAxiomGroupChat.element),aElems[iLup].style.height="100%",oAxiomGroupChat.Start(null,oElem.getAttribute("data-source"),oElem.getAttribute("data-keyval"),!0,oElem.getAttribute("data-workspace-key"))})}))}function StartGroupChatListenerComplete(){g_oAxiomGroupChats[this.GetChatRoomKey()]=this}function onGroupChatAddMessage(oData){for(var cKey in g_oAxiomGroupChats)g_oAxiomGroupChats[cKey].AddChatMessage(oData)}function onGroupChatRemoveMessage(oData){for(var cKey in g_oAxiomGroupChats)g_oAxiomGroupChats[cKey].RemoveChatMessage(oData)}function CreateCourseTrackerContent(){var aElems=document.getElementsByClassName("AxiomCourseTracker");aElems&&aElems.length&&(LoadStylesheet(g_oSettings.CSSDir+"/Axiom/CourseTracker.css"),LoadScript(g_oSettings.ScriptDir+"/VTS/Axiom/CourseTracker.js",function(){for(var oTracker,oCourseDetails,oLightningDetails={LASFileName:g_oSettings.LASFileName,InstanceID:g_oSettings.InstanceID,ImageDir:g_oSettings.ImageDir},iLup=0;iLup<aElems.length;iLup++)oCourseDetails={CourseKey:aElems[iLup].getAttribute("data-course-key"),Node:aElems[iLup]},oTracker=new CourseTracker(oLightningDetails,g_oMessages,oCourseDetails,g_oSettings),g_oCourseTrackers[oCourseDetails.CourseKey]=oTracker}))}function CreateChapterContent(){var oAxiomChapter=document.getElementById("AxiomWorkspaceChapterContainer");if(oAxiomChapter){var oSlide,iCount=1,iChapterList=parseInt(oAxiomChapter.getAttribute("ChapterListMode"));if(1==g_oSettings.IsOnDemand&&g_oRecordedMessages){var lStartingTimeStamp,oMessage,iLup=0;for(iLup=0;iLup<g_oRecordedMessages.length&&!((lStartingTimeStamp=IsMessageStart(g_oRecordedMessages[iLup]))>-1);iLup++);for(iLup=0;iLup<g_oRecordedMessages.length;iLup++)(oMessage=g_oRecordedMessages[iLup][MSG_ATTR_MESSAGE_TAG]==MSG_SLIDE_DISPLAY?new AxiomSlide(g_oRecordedMessages[iLup]):null)&&(oSlide=g_oSlides["M"+oMessage.Key])&&(oSlide.SlideFlags&SLIDE_CHAPTER)==SLIDE_CHAPTER&&(CreateChapterNode(oSlide,iChapterList,oAxiomChapter,iCount,oMessage.Time,lStartingTimeStamp),iCount++)}else for(var oKey in g_oSlides)(oSlide=g_oSlides[oKey])&&(oSlide.SlideFlags&SLIDE_CHAPTER)==SLIDE_CHAPTER&&(CreateChapterNode(oSlide,iChapterList,oAxiomChapter,iCount),iCount++)}}function SetChapterActive(iSlideContentKey,bActive,iType){if(iType&&iType>=0){var oNode=document.getElementById(iSlideContentKey);oNode&&(1==g_oSettings.IsOnDemand?-1==oNode.className.indexOf("Clickable")&&(AddClass(oNode,"Clickable"),oNode.addEventListener("click",ChapterSeek)):bActive?AddClass(oNode,"Active"):RemoveClass(oNode,"Active"))}}function CreateChapterNode(oSlide,iChapterList,oParent,iCount,iMessageTime,lStartingTimeStamp){var oRow,oLabel,oIMG,oNode=document.createElement("div"),iTime=iMessageTime-lStartingTimeStamp,bActive=!g_oSettings.DisableForwardSeek||g_oSettings.FurthestTime>=iTime;1==iChapterList?(oNode.className=1==g_oSettings.IsOnDemand?"ChapterTextNode"+(bActive?" Clickable":""):"ChapterTextNode",oNode.id=oSlide.SlideContentKey,oNode.setAttribute("type","text"),oNode.setAttribute("offset",iMessageTime),(oRow=document.createElement("div")).className="ChapterTextCountLabel",oRow.innerHTML=iCount,oNode.appendChild(oRow),(oRow=document.createElement("div")).className="ChapterTextTitle",oRow.innerHTML=oSlide.Title,oNode.appendChild(oRow),1==g_oSettings.IsOnDemand&&((oRow=document.createElement("div")).className="ChapterTextTime",oRow.innerHTML=FormatTime(iTime),oNode.appendChild(oRow))):(oNode.className=1==g_oSettings.IsOnDemand?"ChapterThumbnailNode"+(bActive?" Clickable":""):"ChapterThumbnailNode",oNode.id=oSlide.SlideContentKey,oNode.setAttribute("type","thumb"),oNode.setAttribute("offset",iMessageTime),(oRow=document.createElement("div")).className="ChapterThumbnailCount",(oLabel=document.createElement("span")).className="ChapterThumbnailCountLabel",oLabel.innerHTML=iCount,oRow.appendChild(oLabel),oNode.appendChild(oRow),(oRow=document.createElement("div")).className="ChapterThumbnailLeft",(oLabel=document.createElement("div")).className="ChapterThumbnailImageCell",(oIMG=document.createElement("img")).className="ChapterThumbnailImage",oIMG.setAttribute("width",132),oIMG.setAttribute("src",oSlide.ImageURL),oLabel.appendChild(oIMG),oRow.appendChild(oLabel),1==g_oSettings.IsOnDemand&&((oLabel=document.createElement("span")).className="ChapterThumbnailTime",oLabel.innerHTML=FormatTime(iTime),oRow.appendChild(oLabel)),oNode.appendChild(oRow),(oRow=document.createElement("div")).className="ChapterThumbnailRight",(oLabel=document.createElement("span")).className="ChapterThumbnailTitle",oLabel.innerHTML=oSlide.Title,oRow.appendChild(oLabel),oNode.appendChild(oRow)),1==g_oSettings.IsOnDemand&&bActive&&oNode.addEventListener("click",ChapterSeek),oParent.appendChild(oNode)}function ChapterSeek(evt){if(evt){for(var oElem=new EventObj(evt).srcElement;oElem&&!oElem.getAttribute("id");)oElem=oElem.parentNode;if(!oElem)return}var iSeekTime=1*oElem.getAttribute("offset")-g_oAxiomMessageManager.GetStartTime();g_oAxiomMediaPlayer&&g_oAxiomMediaPlayer.seek(iSeekTime)}function HandoutClick(evt){if(evt){for(var oElem=new EventObj(evt).srcElement;oElem&&!oElem.getAttribute("data-attachment-key");)oElem=oElem.parentNode;if(!oElem)return;window.open("Server.nxp?LASCmd=AI:1;S:41008;F:LBSATTACH!V&AttachmentKey="+oElem.getAttribute("data-attachment-key"))}}function CreateMyCertificatesContent(){var aElems=document.getElementsByClassName("AxiomMyCertificates");aElems&&aElems.length&&(LoadStylesheet(g_oSettings.CSSDir+"/Axiom/SimpleList.css"),LoadScript(g_oSettings.ScriptDir+"/VTS/Axiom/MyCertificates.js",function(){var oMyCertificates,oInitData={};oInitData.LASData={},oInitData.LASData.LASFileName=g_oSettings.LASFileName,oInitData.LASData.InstanceID=g_oSettings.InstanceID,oInitData.Messages=g_oMessages,oInitData.AddClassNames={TopText1:"EventTextColor",TopText2:"EventTextColor2"};for(var iLup=0;iLup<aElems.length;iLup++)oMyCertificates=new MyCertificates(oInitData),aElems[iLup].appendChild(oMyCertificates.element)}))}function CreateModeratedChat(){if("undefined"!=typeof StudioModeratedChatManager){var oInitData={UserData:{}};oInitData.UserData.UserKey=g_oSettings.UserKey,oInitData.UserData.UserType=g_oSettings.UserType,oInitData.UserData.ModeratorRights=g_oSettings.ModeratorRights?g_oSettings.ModeratorRights:0,oInitData.UserData.UserName=g_oSettings.UserName,oInitData.UserData.EventAttendeeKey=g_oSettings.EventAttendeeKey,oInitData.LASData={},oInitData.LASData.LASFileName=g_oSettings.LASFileName,oInitData.LASData.InstanceID=g_oSettings.InstanceID,oInitData.LASData.ScriptsDir=g_oSettings.ScriptDir,oInitData.Messages=g_oMessages,oInitData.Functions={},(8388608&g_oSettings.ModeratorRights)>0?(oInitData.Functions.DeleteQuestion=SMCDeleteQuestion,oInitData.Functions.AddAnswerSaveMod=SMCAddAnswerSaveMod,oInitData.Functions.AnswerDelete=SMCAnswerDelete,oInitData.Functions.SetPriority=SMCSetPriority,oInitData.Functions.AddFolder=SMCAddFolder,oInitData.Functions.UpdateFolder=SMCUpdateFolder,oInitData.Functions.DeleteFolder=SMCDeleteFolder,oInitData.Functions.UpdateTags=SMCUpdateTags,oInitData.Functions.GeneralStatusUpdate=SMCGeneralStatusUpdate,oInitData.Moderators=g_oModerators):window.ModeratedChatQuestionReplySave&&(oInitData.Functions.AddAnswerSaveAtt=ModeratedChatQuestionReplySave),oInitData.Functions.OnReadyAdmin=StudioModeratedChatLoadAdmin,oInitData.Functions.OnReadyAttendee=StudioModeratedChatLoadAttendee,g_oStudioManagedChatManager=new StudioModeratedChatManager(oInitData),window.ModeratedChatQuestionSave&&(g_oStudioManagedChatManager.QueueQuestion=ModeratedChatQuestionSave)}}function FormatTime(iTime,bHoursOptional){var cDisplay="";iTime=Math.round(iTime/1e3);var iHour=Math.floor(iTime/3600),iMin=Math.floor((iTime-3600*iHour)/60),iSec=Math.floor(iTime-3600*iHour-60*iMin);return cDisplay=iHour<=0&&bHoursOptional?"":(iHour<=0?"00":(iHour<10?"0":"")+iHour)+":",cDisplay+=(iMin<10?"0":"")+iMin+":",cDisplay+=(iSec<10?"0":"")+iSec}function CourseTrackerCompletionData(cID,oData){for(var cKey in g_oCourseTrackers)g_oCourseTrackers[cKey].UpdateRequirement(oData.FunctionID,oData.Int1,oData.Int2,!0)}function VideoMediaSlideSeekToPlace(){var oCurrentSlide=g_oSlideManager.GetCurrentSlide(),oContent=g_oSlideManager.GetCurrentSlideContent();if(g_bAxiomStart&&oCurrentSlide&&oCurrentSlide.Time&&oContent instanceof AxiomMediaPlayer&&g_oAxiomMediaPlayer){var iMainMediaTime=oCurrentSlide.Time-g_oAxiomMessageManager.GetStartTime();if(iMainMediaTime>0){var iSeekTime=g_oAxiomMediaPlayer.getCurrentTime()-iMainMediaTime,iDuration=oContent.getDuration();(oCurrentSlide.SlideFlags&SLIDE_VIDEO_LOOP)==SLIDE_VIDEO_LOOP&&(iSeekTime%=iDuration),iSeekTime<iDuration?oContent.seek(iSeekTime):oContent.pause()}}}function processECDNList(){LoadScript(g_oSettings.ScriptDir+"/VTS/Axiom/ECDN.js",function(){var oData;(g_oECDNManager=new ECDNManager(g_oAxiomCommManager,g_aAxiomWebcastOutputPrecedence)).start();for(var iLup=0;iLup<g_aECDNs.length;iLup++)oData=g_aECDNs[iLup],g_oECDNManager.addECDN(oData.AxiomWebcastOutputKey,oData)})}function ConfigureAttendeeAudioMode(){var cTitle=g_oMessages.AudioOptions,cCSSText="",oBar=Workspace.PanelBar.Node;if(oBar&&(oBtn=oBar.lastChild,oBtn)){cCSSText=Workspace.Stylesheet.Rules["#"+oBtn.id].cssText;var cSearch="#"+oBtn.id+" {",iIndex=cCSSText.indexOf(cSearch);cCSSText=(cCSSText=cCSSText.substring(iIndex+cSearch.length)).substring(0,cCSSText.indexOf("}"))}Workspace.AddPanelBarThumb(null,{ThumbURL:"/cfr/images/VTS/Workspace/AudioOptions.png",Attributes:{id:"PanelBarAudioOptionsBtn",title:cTitle},ClickHandler:OpenAudioOptions.bind(this)}),document.getElementById("PanelBarAudioOptionsBtn").style.cssText=cCSSText,Workspace.Reveal(),OpenAudioOptions()}function OpenAudioOptions(){g_oAxiomBrowserPopUp.Clean();var oHeader=g_oAxiomBrowserPopUp.GetHeader();oHeader&&oHeader.setAttribute("alert","false"),g_oAxiomBrowserPopUp.SetHeaderText(g_oMessages.AudioOptions),g_oAxiomBrowserPopUp.SetDisableModalBGClick(0==g_iStreamingModeSelected);var oContaier=g_oAxiomBrowserPopUp.GetTextArea();if(oContaier){var oRow,oIcon,oDetails,oTitle,oButton,oLabel=document.createElement("div");oLabel.className="AxiomLabel",oLabel.innerText=g_oMessages.AudioOptionTitle,oContaier.appendChild(oLabel),2==g_oSettings.AttendeeAudioMode&&2!=g_iStreamingModeSelected&&((oRow=document.createElement("div")).className="AxiomAudioOptionRow",1==g_iStreamingModeSelected?oRow.addEventListener("click",function(){g_oAxiomBrowserPopUp.CloseModal()}):oRow.addEventListener("click",onClickStreaming),(oIcon=document.createElement("div")).className="AxiomIcon",oIcon.setAttribute("type","streaming"),oRow.appendChild(oIcon),(oDetails=document.createElement("div")).className="AxiomAudioOptionDetails",(oTitle=document.createElement("div")).className="AxiomHeading",oTitle.innerText=g_oMessages.AudioOptionStreaming,oDetails.appendChild(oTitle),(oTitle=document.createElement("div")).className="AxiomDataText",oTitle.innerText=g_oMessages.AudioOptionStreamingHint,oDetails.appendChild(oTitle),(oButton=document.createElement("div")).className="AxiomSaveActionButton",(oLabel=document.createElement("span")).className="AxiomSaveText",oLabel.innerHTML=1==g_iStreamingModeSelected?g_oMessages.AudioOptionReturn:g_oMessages.AudioOptionJoin,oButton.appendChild(oLabel),oDetails.appendChild(oButton),oRow.appendChild(oDetails),oContaier.appendChild(oRow)),1!=g_oSettings.AttendeeAudioMode&&2!=g_oSettings.AttendeeAudioMode||((oRow=document.createElement("div")).className="AxiomAudioOptionRow",2==g_iStreamingModeSelected?oRow.addEventListener("click",function(){g_oAxiomBrowserPopUp.CloseModal()}):oRow.addEventListener("click",onClickDialIn),(oIcon=document.createElement("div")).className="AxiomIcon",oIcon.setAttribute("type","dialin"),oRow.appendChild(oIcon),(oDetails=document.createElement("div")).className="AxiomAudioOptionDetails",(oTitle=document.createElement("div")).className="AxiomHeading",oTitle.innerText=g_oMessages.AudioOptionDialIn,oDetails.appendChild(oTitle),(oTitle=document.createElement("div")).className="AxiomDataText",oTitle.innerText=g_oMessages.AudioOptionDialInHint,oDetails.appendChild(oTitle),(oTitle=document.createElement("div")).className="AxiomDataTitle",oTitle.innerText=StringReplace(g_oMessages.AudioOptionDial,"{PHONENUMBER}",g_oAttendeeAudioOption.PhoneNumber),oDetails.appendChild(oTitle),(oTitle=document.createElement("div")).className="AxiomDataTitle",oTitle.innerText=StringReplace(g_oMessages.AudioOptionConferenceID,"{ID}",g_oAttendeeAudioOption.ConferenceCode),oDetails.appendChild(oTitle),(oButton=document.createElement("div")).className="AxiomSaveActionButton",(oLabel=document.createElement("span")).className="AxiomSaveText",oLabel.innerHTML=2==g_iStreamingModeSelected?g_oMessages.AudioOptionReturn:g_oMessages.AudioOptionJoin,oButton.appendChild(oLabel),oDetails.appendChild(oButton),oRow.appendChild(oDetails),oContaier.appendChild(oRow))}g_oAxiomBrowserPopUp.OpenModal(!0)}function onClickStreaming(){g_iStreamingModeSelected=1,g_oAxiomBrowserPopUp.CloseModal(),AddAxiomMediaPlayer(),g_bAxiomStart&&LoadNextWebcastOuput()}function onClickDialIn(){g_bStreamlessMode=!0,g_iStreamingModeSelected=2,g_oAxiomBrowserPopUp.CloseModal(),g_oAxiomMediaPlayer&&(g_oAxiomMediaPlayer.unload(!0),g_oAxiomMediaPlayer.destroy(),g_oAxiomMediaPlayerUI.destroyControls(),g_oAxiomMediaPlayer=null);var oMessage=document.createElement("div");oMessage.className="AxiomAudioOptionMessage";var oIcon=document.createElement("div");oIcon.className="AxiomAudioOptionMessageIcon",oMessage.appendChild(oIcon);var oText=document.createElement("div");oText.innerText=g_oMessages.AudioOptionPlayerMessage,oText.className="AxiomAudioOptionMessageLabel",oMessage.appendChild(oText),document.getElementById("AxiomMediaFrame").appendChild(oMessage),g_oAxiomMessageManager.SetMediaPlayer(null),g_bAxiomStart&&g_oAxiomMessageManager.Resume()}SlideManager.prototype.PowerPointLoadComplete=function(iSlideIndex,iCurrentStep,iTotalSteps){if(g_bPPTSlideLoaded=!0,g_iPendingSlideAnimationCount&&g_oSlideManager){var iTargetStep=g_iPendingSlideAnimationCount+1;iTargetStep>iCurrentStep&&g_oSlideManager.JumpToStep(iTargetStep),g_iPendingSlideAnimationCount=0}},SlideManager.prototype.MediaSlideMetaDataLoaded=function(oEvent){VideoMediaSlideSeekToPlace()};
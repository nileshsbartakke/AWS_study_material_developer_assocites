function AxiomHTTP(cURL,fnOnComplete,bSend,cMethod,cPostParams,fnOnError,aHeaders,bDisableCache,bDisableJSON){this.oReq=new XMLHttpRequest,this.aHeaders="object"==typeof aHeaders?aHeaders:[],this.cMethod="string"==typeof cMethod?cMethod:"GET",this.cURL="string"==typeof cURL?cURL:"",this.oFormData="undefined"!=typeof FormData&&cPostParams instanceof FormData?cPostParams:null,this.cPostParams=this.oFormData?"":"string"==typeof cPostParams?cPostParams:"",this.fnOnComplete="function"==typeof fnOnComplete?fnOnComplete:null,this.fnOnError="function"==typeof fnOnError?fnOnError:null,this.bSend=!!bSend,this.oResponse=null,this.bDisableJSON=bDisableJSON,this.bDisableCache=bDisableCache,bSend&&this.Send()}function UriEncodeObject(oObj){var cParams="";for(var cName in oObj){var cType=typeof oObj[cName];"string"!=cType&&"number"!=cType||(cParams+="&"+cName+"="+encodeURIComponent(oObj[cName]))}return cParams}AxiomHTTP.prototype.AddHeader=function(cName,cValue){this.aHeaders.push([cName,cValue])},AxiomHTTP.prototype.Send=function(){var aHeader=null;try{for(this.oFormData?this.cMethod="POST":"GET"==this.cMethod?(this.bDisableCache||(this.cURL+=(this.cURL.indexOf("?")>-1?"&":"?")+"r="+(new Date).valueOf()),this.cURL.length>2e3&&this.cURL.indexOf("?")>-1&&(this.cMethod="POST",this.cPostParams=this.cURL.split("?")[1],this.cURL=this.cURL.split("?")[0])):"POST"==this.cMethod&&this.cURL.indexOf("?")>-1&&(this.cPostParams&&this.cPostParams.length>0?this.cPostParams+="&"+this.cURL.split("?")[1]:this.cPostParams=this.cURL.split("?")[1],this.cURL=this.cURL.split("?")[0]),this.oReq.open(this.cMethod,this.cURL,!this.bSync),this.aHeaders&&(aHeader=this.aHeaders.pop());aHeader;)this.oReq.setRequestHeader(aHeader[0],aHeader[1]),aHeader=this.aHeaders.pop();this.oReq.onreadystatechange=this._readyStateChange.bind(this),this.oFormData?this.oReq.send(this.oFormData):this.oReq.send(this.cPostParams)}catch(e){this.fnOnError&&this.fnOnError(-1,"exception caught"+e.message)}},AxiomHTTP.prototype._readyStateChange=function(evt){try{4==this.oReq.readyState&&(this.oReq.status<300?(this.oReq.responseText&&this.oReq.responseText.length>0&&(this.oResponse=this.bDisableJSON?this.oReq.responseText:JSON.parse(this.oReq.responseText)),this.fnOnComplete&&this.fnOnComplete(this.oResponse,this)):this.fnOnError?this.fnOnError(this.oReq.status,this.oReq.statusText):console.warn("status:"+this.oReq.status+" text:"+this.oReq.statusText))}catch(e){var cString="\n---------------------------------------------------------\n AxiomHTTP _readyStateChange\n error: "+e+"\n---------------------------------------------------------\n";console.warn(cString)}};
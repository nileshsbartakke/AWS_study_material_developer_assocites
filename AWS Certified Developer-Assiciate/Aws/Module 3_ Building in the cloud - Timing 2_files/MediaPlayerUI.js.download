var MAX_LOW_LEVEL_FORCE=10,MAX_LOW_FLASH_LEVEL=1,MAX_LOW_DASH_LEVEL=0,MAX_LOW_QUALITY_BUFFERING_TIMEOUT=6e3;function AxiomMediaPlayerUI(oMediaPlayer,oParentContainer,oMessageManager,cPosterImage,oControlOptions){this.m_cSliderInputEvent="input",navigator.userAgent.indexOf("Trident/")>=0&&(this.m_cSliderInputEvent="change"),this.m_oPlayer=oMediaPlayer,this.m_oParentContainer=oParentContainer,this.m_oControlOptions=oControlOptions||{},this.m_oMessageManager=oMessageManager,this.m_oCallHandlers={},this.m_oBufferSpinner=null,this.m_oMessage=null,this.m_oPosterImage=null,this.m_cPosterImageURL=cPosterImage,this.m_bDisableFullControls=!1,this.m_oFullControls=null,this.m_oTopGradient=null,this.m_oTopControls=null,this.m_oBottomControls=null,this.m_oPlayBtn=null,this.m_oMuteBtn=null,this.m_oVolumeBar=null,this.m_oSeekBar=null,this.m_bSeekBarSetPageSize=!1,this.m_bControlsGradientSizeSet=!1,this.m_oTime=null,this.m_oPreviousBtn=null,this.m_oNextBtn=null,this.m_oQualityMeter=null,this.m_oMediaMode=null,this.m_oAutoBitrate=null,this.m_oQualityLevels=null,this.m_oQualityLevelContainer=null,this.m_oMediaModeToggle=null,this.m_oFullScreenBtn=null,this.m_oSubitlesBtn=null,this.m_oSubtitleContent=null,this.m_oSubtitleTrackContainer=null,this.m_bShowMS=!1,this.m_iDuration=null,this.m_cDurationLabel=null,this.m_bUserSeeking=!1,this.m_iSeekTime=-1,this.m_bSeekInProgress=!1,this.m_iSeekTimeoutID=null,this.m_aSeekRange={start:0,end:0},this.m_iLowQualityLevelChanges=0,this.m_iLowQualityBufferingInterval=0,this.m_fnClickQualityMeter=null,this.m_oLowestQualityLevel=null,this.m_oFullScreenEvent=null,this.m_oControlsMouseEnter=null,this.m_oControlsMouseLeave=null,this.m_oControlsMouseMove=null,this.m_iControlsTimeout=null,this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_METADATA_LOADED,this._onControlsMetadataLoaded.bind(this)),this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_DATA_LOADED,this._onControlsDataLoaded.bind(this)),this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_PLAY,this._onControlsPlay.bind(this)),this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_PAUSE,this._onControlsPlay.bind(this)),this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_VOLUME_CHANGE,this._onControlsVolumeChange.bind(this)),this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_SEEKING,this._onControlsSeeking.bind(this)),this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_SEEKED,this._onControlsSeeked.bind(this)),this.m_oControlOptions.hideTimeSection||this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_TIME_UPDATE,this._onControlsTimeUpdate.bind(this)),this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_RTC_UPDATE,this._onControlsRTCUpdate.bind(this)),this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_QUALITY_CHANGE,this._onControlsQualityChange.bind(this)),this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_QUALITY_COMPLETED,this._onControlsQualityComplete.bind(this)),this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_BUFFER_UPDATED,this._onControlsBufferUpdated.bind(this)),this.m_oPlayer.setHandler(AXIOM_MEDIA_PLAYER_RECOVER_MAX,this._onControlsPlayerRecoverMax.bind(this)),this.createControls()}AxiomMediaPlayerUI.prototype.setHandler=function(cCall,fnCallHandler){cCall&&fnCallHandler&&(this.m_oCallHandlers[cCall]||(this.m_oCallHandlers[cCall]=new Array),-1==this.m_oCallHandlers[cCall].indexOf(fnCallHandler)&&this.m_oCallHandlers[cCall].push(fnCallHandler))},AxiomMediaPlayerUI.prototype.removeHandler=function(cCall,fnCallHandler){if(cCall&&fnCallHandler){var iIndex=-1;this.m_oCallHandlers&&this.m_oCallHandlers[cCall]&&(iIndex=this.m_oCallHandlers[cCall].indexOf(fnCallHandler)),-1!=iIndex&&this.m_oCallHandlers[cCall].splice(iIndex,1)}},AxiomMediaPlayerUI.prototype._dispatcEvent=function(cCall,oItem){if(this.m_oCallHandlers&&this.m_oCallHandlers[cCall])for(var aCalls=this.m_oCallHandlers[cCall],iLup=0;iLup<aCalls.length;)aCalls[iLup](oItem),iLup++},AxiomMediaPlayerUI.prototype.destroyControls=function(){this.m_oFullControls&&this.m_oFullControls.parentNode&&this.m_oFullControls.parentNode.removeChild(this.m_oFullControls),this.m_oFullControls=null,this.m_oBufferSpinner&&this.m_oBufferSpinner.parentNode&&this.m_oBufferSpinner.parentNode.removeChild(this.m_oBufferSpinner),this.m_oBufferSpinner=null,this.m_oMessage&&this.m_oMessage.parentNode&&this.m_oMessage.parentNode.removeChild(this.m_oMessage),this.m_oMessage=null,this.m_oPosterImage&&this.m_oPosterImage.parentNode&&this.m_oPosterImage.parentNode.removeChild(this.m_oPosterImage),this.m_oPosterImage=null,this.m_oTopGradient=null,this.m_oTopControls=null,this.m_oBottomControls=null,this.m_oPlayBtn=null,this.m_oMuteBtn=null,this.m_oVolumeBar=null,this.m_oSeekBar=null,this.m_oTime=null,this.m_oPreviousBtn=null,this.m_oNextBtn=null,this.m_oQualityMeter=null,this.m_oMediaMode=null,this.m_oMediaModeToggle=null,this.m_oQualityLevelContainer=null,this.m_oLowestQualityLevel=null,this.m_oAutoBitrate=null,this.m_oFullScreenBtn=null},AxiomMediaPlayerUI.prototype.createControls=function(){if(this.destroyControls(),this.m_cPosterImageURL&&(this.m_oPosterImage=document.createElement("div"),this.m_oPosterImage.className="AxiomMediaPosterImage",this.m_oPosterImage.setAttribute("show","true"),this.m_oPosterImage.setAttribute("aria-hidden","true"),this.m_oPosterImage.style.backgroundImage="url('"+this.m_cPosterImageURL+"')",this.m_oParentContainer.appendChild(this.m_oPosterImage)),this.m_oFullControls=document.createElement("div"),this.m_oFullControls.className="AxiomMediaFullControls",this.m_oFullControls.setAttribute("show","false"),this.m_oFullControls.setAttribute("reveal","false"),this.m_oControlsMouseEnter?this.m_oFullControls.removeEventListener("mouseenter",this.m_oControlsMouseEnter):this.m_oControlsMouseEnter=this._onControlsMouseEnter.bind(this),this.m_oFullControls.addEventListener("mouseenter",this.m_oControlsMouseEnter),this.m_oTopGradient=document.createElement("div"),this.m_oTopGradient.className="AxiomMediaGradient",this.m_oTopGradient.setAttribute("data-default",1),this.m_oTopGradient.setAttribute("aria-hidden","true"),this.m_oFullControls.appendChild(this.m_oTopGradient),this.m_oControlOptions.hideTopControlsSection||(this.m_oTopControls=document.createElement("div"),this.m_oTopControls.className="AxiomMediaTopControls",this.m_oTopControls.setAttribute("aria-hidden","true"),this.m_oFullControls.appendChild(this.m_oTopControls)),this.m_oBottomControls=document.createElement("div"),this.m_oBottomControls.className="AxiomMediaBottomControls",this.m_oControlOptions.hideMediaControlsSection||(this.m_oPreviousBtn=document.createElement("input"),this.m_oPreviousBtn.id="AxiomMediaPreviousBtn",this.m_oPreviousBtn.className="AxiomMediaBtn",this.m_oPreviousBtn.setAttribute("type","button"),this.m_oPreviousBtn.setAttribute("active","false"),this.m_oPreviousBtn.setAttribute("aria-label",g_oMessages.PreviousButton),this.m_oPreviousBtn.addEventListener("click",this._onClickPrevious.bind(this)),this.m_oBottomControls.appendChild(this.m_oPreviousBtn),this.m_oPlayBtn=document.createElement("input"),this.m_oPlayBtn.id="AxiomMediaPlayBtn",this.m_oPlayBtn.className="AxiomMediaBtn",this.m_oPlayBtn.setAttribute("type","button"),this.m_oPlayBtn.setAttribute("data-toggle","on"),this.m_oPlayBtn.setAttribute("active","false"),this.m_oPlayBtn.setAttribute("aria-label",g_oMessages.PlayButton+"/"+g_oMessages.PauseButton),this.m_oPlayBtn.addEventListener("click",this._onClickPlay.bind(this)),this.m_oBottomControls.appendChild(this.m_oPlayBtn),this.m_oNextBtn=document.createElement("input"),this.m_oNextBtn.id="AxiomMediaNextBtn",this.m_oNextBtn.className="AxiomMediaBtn",this.m_oNextBtn.setAttribute("type","button"),this.m_oNextBtn.setAttribute("active","false"),this.m_oNextBtn.setAttribute("aria-label",g_oMessages.NextButton),this.m_oNextBtn.addEventListener("click",this._onClickNext.bind(this)),this.m_oBottomControls.appendChild(this.m_oNextBtn)),!this.m_oControlOptions.hideAudioSection){this.m_oAudioControls=document.createElement("div"),this.m_oAudioControls.id="AxiomMediaAudioContainer",this.m_oMuteBtn=document.createElement("input"),this.m_oMuteBtn.id="AxiomMediaMuteBtn",this.m_oMuteBtn.className="AxiomMediaBtn",this.m_oMuteBtn.setAttribute("type","button"),this.m_oMuteBtn.setAttribute("data-toggle","on"),this.m_oMuteBtn.setAttribute("active","false"),this.m_oMuteBtn.setAttribute("aria-label",g_oMessages.MuteButton),this.m_oMuteBtn.addEventListener("click",this._onClickMute.bind(this)),this.m_oAudioControls.appendChild(this.m_oMuteBtn),this.m_oVolumeContainer=document.createElement("div"),this.m_oVolumeContainer.id="AxiomMediaVolumeBarContainer",this.m_oVolumeContainer.setAttribute("aria-hidden","true");this.m_oVolumeBar=new Slider(!1,"",{horizontal:!0,thumbWidth:14,thumbHeight:14,height:12,width:75},this.m_oAudioControls,{OnChangeStart:this._onVolumeStart.bind(this),OnChanging:this._onVolumeProgress.bind(this),OnChangeEnd:this._onVolumeEnd.bind(this)}),this.m_oVolumeBar.Disable();var oVolumeBarElement=this.m_oVolumeBar.Element;oVolumeBarElement.className="AxiomMediaBar",this.m_oVolumeContainer.appendChild(oVolumeBarElement),this.m_oAudioControls.appendChild(this.m_oVolumeContainer),this.m_oBottomControls.appendChild(this.m_oAudioControls)}this.m_oControlOptions.hideTimeSection||(this.m_oTime=document.createElement("div"),this.m_oTime.id="AxiomMediaTimeLabel",this.m_oTime.setAttribute("active","false"),this.m_oBottomControls.appendChild(this.m_oTime)),this.m_oFullControls.appendChild(this.m_oBottomControls),this.m_oMessage=document.createElement("div"),this.m_oMessage.className="AxiomMediaMessage",this.m_oMessage.setAttribute("show","false"),this.m_oParentContainer.appendChild(this.m_oMessage),this.m_oParentContainer.appendChild(this.m_oFullControls);var oSpacer=document.createElement("div");oSpacer.className="AxiomMediaSpacer",this.m_oBottomControls.appendChild(oSpacer),this._createQualityControl(),this._createSubtitlesBtn(),this.m_oControlOptions.hideFullScreenSection||(window.frameElement&&(window.frameElement.getAttribute("allowfullscreen")||window.frameElement.setAttribute("allowfullscreen","true")),this.m_oFullScreenBtn=document.createElement("input"),this.m_oFullScreenBtn.id="AxiomMediaFullScreenBtn",this.m_oFullScreenBtn.className="AxiomMediaBtn",this.m_oFullScreenBtn.setAttribute("type","button"),this.m_oFullScreenBtn.setAttribute("data-toggle","off"),this.m_oFullScreenBtn.setAttribute("active","false"),this.m_oFullScreenBtn.addEventListener("click",this._onClickFullScreen.bind(this)),this.m_oBottomControls.appendChild(this.m_oFullScreenBtn),this.m_oFullScreenEvent||(this.m_oFullScreenEvent=this._onFullScreenChange.bind(this)),"onfullscreenchange"in document?(document.removeEventListener("fullscreenchange",this.m_oFullScreenEvent),document.addEventListener("fullscreenchange",this.m_oFullScreenEvent,!1)):"onwebkitfullscreenchange"in document?(document.removeEventListener("webkitfullscreenchange",this.m_oFullScreenEvent),document.addEventListener("webkitfullscreenchange",this.m_oFullScreenEvent,!1)):"onmozfullscreenchange"in document?(document.removeEventListener("mozfullscreenchange",this.m_oFullScreenEvent),document.addEventListener("mozfullscreenchange",this.m_oFullScreenEvent,!1)):"onmsfullscreenchange"in document&&(document.removeEventListener("msfullscreenchange",this.m_oFullScreenEvent),document.addEventListener("msfullscreenchange",this.m_oFullScreenEvent,!1))),this._createQualityLevelControls(),this.m_oBufferSpinner=document.createElement("div"),this.m_oBufferSpinner.className="AxiomMediaBuffering",this.m_oBufferSpinner.setAttribute("show","false"),this.m_oParentContainer.appendChild(this.m_oBufferSpinner)},AxiomMediaPlayerUI.prototype.disableFullControls=function(bDisable){this.m_bDisableFullControls=bDisable,bDisable&&this.m_oFullControls.setAttribute("show",!1)},AxiomMediaPlayerUI.prototype.setShowMSTime=function(bShowMS){this.m_bShowMS=bShowMS,this.m_cDurationLabel=null},AxiomMediaPlayerUI.prototype.showPoster=function(bShow){this.m_oPosterImage&&this.m_oPosterImage.getAttribute("show")!=(bShow?"true":"false")&&this.m_oPosterImage.setAttribute("show",bShow?"true":"false")},AxiomMediaPlayerUI.prototype.showControls=function(bShow){this.m_oFullControls.setAttribute("show",!this.m_bDisableFullControls&&bShow),this.m_oVolumeBar&&this.m_oVolumeBar.Value(this.m_oPlayer.getVolume()),this.m_oMessageManager&&this.m_oMessageManager.GetMessageCount()>0?(this.m_oPreviousBtn&&(this.m_oPreviousBtn.style.display=""),this.m_oNextBtn&&(this.m_oNextBtn.style.display="")):(this.m_oPreviousBtn&&(this.m_oPreviousBtn.style.display="none"),this.m_oNextBtn&&(this.m_oNextBtn.style.display="none"))},AxiomMediaPlayerUI.prototype.activateControls=function(bActivate){var aElems,oInput,iLup=0;if(this.m_oTopControls)for(aElems=this.m_oTopControls.querySelectorAll("[active="+!bActivate+"]");iLup<aElems.length;iLup++)(oInput=aElems[iLup])&&oInput.setAttribute("active",bActivate);if(iLup=0,aElems=null,oInput=null,this.m_oBottomControls)for(aElems=this.m_oBottomControls.querySelectorAll("[active="+!bActivate+"]");iLup<aElems.length;iLup++)(oInput=aElems[iLup])&&"AxiomMediaSubtitlesBtn"!=oInput.className&&oInput.setAttribute("active",bActivate);this.m_oVolumeBar&&this.m_oVolumeBar.Enable(),this.m_oSeekBar&&this.m_oSeekBar.Enable(),this.m_oMessageManager&&this.m_oMessageManager.GetMessageCount()>0?(this.m_oPreviousBtn&&(this.m_oPreviousBtn.style.display=""),this.m_oNextBtn&&(this.m_oNextBtn.style.display="")):(this.m_oPreviousBtn&&(this.m_oPreviousBtn.style.display="none"),this.m_oNextBtn&&(this.m_oNextBtn.style.display="none"));var cToggle=this.m_oPlayer.isPaused()?"off":"on";this.m_oPlayBtn&&this.m_oPlayBtn.setAttribute("data-toggle",cToggle)},AxiomMediaPlayerUI.prototype.setMessage=function(cMessage){this.m_oMessage&&(cMessage&&cMessage.length?(this.showControls(!1),this.activateControls(!1),this.m_oMessage.innerHTML=cMessage,this.m_oMessage.setAttribute("show","true"),this.m_oBufferSpinner&&this.m_oBufferSpinner.setAttribute("show","false")):(this.m_oMessage.innerHTML="",this.m_oMessage.setAttribute("show","false")))},AxiomMediaPlayerUI.prototype.reset=function(cMessage){if(this.m_oQualityLevelContainer&&(this._removeAllChildren(this.m_oQualityLevelContainer),this.m_oQualityLevelContainer.innerHTML=""),this.m_oLowestQualityLevel&&(this.m_oLowestQualityLevel=null),this.m_oTime){var iDuration=this.m_oPlayer.getDuration();this.m_iDuration=null,this.m_cDurationLabel=null,this._updateTime(0,iDuration),this._updateSeekBar(0,iDuration),this._updatePrevious(),this._updateNext()}},AxiomMediaPlayerUI.prototype.resize=function(){this.m_oTopGradient&&this.m_oFullControls&&(this.m_oFullControls.offsetHeight?(m_bControlsGradientSizeSet=!0,this.m_oTopGradient.style.height=Math.min(.1*this.m_oFullControls.offsetHeight,40)+"px",this.m_oTopGradient.removeAttribute("data-default")):(m_bControlsGradientSizeSet=!1,this.m_oTopGradient.setAttribute("data-default",1))),this.m_oTopControls&&this.m_oSeekBar&&(this.m_bSeekBarSetPageSize=!0,this.m_oSeekBar.SetPageSize({height:12,width:this.m_oTopControls.offsetWidth-14}))},AxiomMediaPlayerUI.prototype._onControlsMouseEnter=function(){this.m_iControlsTimeout&&clearTimeout(this.m_iControlsTimeout),this.m_oControlsMouseLeave?this.m_oFullControls.removeEventListener("mouseleave",this.m_oControlsMouseLeave):this.m_oControlsMouseLeave=this._onControlsMouseLeave.bind(this),this.m_oFullControls.addEventListener("mouseleave",this.m_oControlsMouseLeave),this.m_oControlsMouseMove?this.m_oFullControls.removeEventListener("mousemove",this.m_oControlsMouseMove):this.m_oControlsMouseMove=this._onControlsMouseMove.bind(this),this.m_oFullControls.addEventListener("mousemove",this.m_oControlsMouseMove),"true"!=this.m_oFullControls.getAttribute("reveal")&&this.m_oFullControls.setAttribute("reveal","true"),this.m_iControlsTimeout=setTimeout(this._onHideControls.bind(this),5e3)},AxiomMediaPlayerUI.prototype._onControlsMouseLeave=function(){this._onHideControls.call(this),this.m_oFullControls.removeEventListener("mouseleave",this.m_oControlsMouseLeave),this.m_oFullControls.removeEventListener("mousemove",this.m_oControlsMouseMove)},AxiomMediaPlayerUI.prototype._onControlsMouseMove=function(){this.m_iControlsTimeout&&clearTimeout(this.m_iControlsTimeout),"true"!=this.m_oFullControls.getAttribute("reveal")&&this.m_oFullControls.setAttribute("reveal","true"),this.m_iControlsTimeout=setTimeout(this._onHideControls.bind(this),3e3)},AxiomMediaPlayerUI.prototype._onHideControls=function(){this.m_iControlsTimeout&&clearTimeout(this.m_iControlsTimeout),"false"!=this.m_oFullControls.getAttribute("reveal")&&this.m_oFullControls.setAttribute("reveal","false")},AxiomMediaPlayerUI.prototype._onControlsMetadataLoaded=function(){this.showControls(!0),this.activateControls(!0),this._updatePrevious(),this._updateNext(),this._onControlsTimeUpdate(),this._createQualityLevels(),this._onControlsVolumeChange()},AxiomMediaPlayerUI.prototype._onControlsDataLoaded=function(){this.m_oSubtitleTrackContainer&&(this._removeAllChildren(this.m_oSubtitleTrackContainer),this.m_oSubtitleTrackContainer.innerHTML=""),this.m_oPlayer.hasTextTracks()&&this.m_oSubitlesBtn&&(this._createSubtitleTrackPanel(),this.m_oSubitlesBtn.setAttribute("active","true"),this._createSubtitleTrackEntries())},AxiomMediaPlayerUI.prototype._createQualityLevels=function(){if(this.m_oQualityLevels&&!(this.m_oQualityLevelContainer.children.length>0)){var aLevels=this.m_oPlayer.getQualityLevels();if(!aLevels||aLevels.length<=1)this.m_oQualityMeter&&(this.m_oBottomControls.removeChild(this.m_oQualityMeter),this.m_oQualityMeter=null);else{for(var oCheck,oLabel,oLevel,cBitrate="",iBitrate=0,cExt="",iLup=0;iLup<aLevels.length;iLup++){cExt=" Kbps",(iBitrate=.1*Math.floor(.01*aLevels[iLup].bitrate))>1e3&&(iBitrate=.1*Math.floor(1e-5*aLevels[iLup].bitrate),cExt=" Mbps");var iDotIndex=(cBitrate=iBitrate.toString()).indexOf(".");-1!=iDotIndex&&(cBitrate=parseInt(cBitrate.substring(iDotIndex+1))>0?cBitrate.substring(0,iDotIndex+2):cBitrate.substring(0,iDotIndex)),(oLevel=document.createElement("div")).setAttribute("level",aLevels[iLup].qualityIndex),oLevel.setAttribute("label",cBitrate+cExt),oLevel.className="AxiomMediaQualityLevelRow",oLevel.addEventListener("click",this._onClickQualityLevel.bind(this,oLevel,!0)),(oCheck=document.createElement("div")).className="AxiomMediaQualityLevelRowCheck",oLevel.appendChild(oCheck),(oLabel=document.createElement("div")).className="AxiomMediaQualityLevelRowLabel",oLabel.innerText=cBitrate+cExt,oLevel.appendChild(oLabel),this.m_oLowestQualityLevel||(this.m_oLowestQualityLevel=oLevel),this.m_oQualityLevelContainer.appendChild(oLevel)}(oLevel=document.createElement("div")).className="AxiomMediaQualityLevelRow",oLevel.setAttribute("state","selected"),oLevel.setAttribute("level","-1"),oLevel.addEventListener("click",this._onClickQualityLevel.bind(this,oLevel,!0)),(oCheck=document.createElement("div")).className="AxiomMediaQualityLevelRowCheck",oLevel.appendChild(oCheck),(oLabel=document.createElement("div")).className="AxiomMediaQualityLevelRowLabel",oLabel.appendChild(document.createTextNode(g_oMessages.AutoQuality)),this.m_oAutoBitrate=document.createElement("span"),this.m_oAutoBitrate.id="AxiomMediaQualityLevelAutoBitrate",this.m_oAutoBitrate.className="AxiomMediaQualityLevelRowSubLabel",oLabel.appendChild(this.m_oAutoBitrate),oLevel.appendChild(oLabel),this.m_oQualityLevelContainer.appendChild(oLevel)}}},AxiomMediaPlayerUI.prototype._onClickQualityLevel=function(oLevel,bUserClick,iLevel){if(this.m_oPlayer&&this.m_oQualityLevelContainer&&"true"!=this.m_oQualityLevels.getAttribute("audio-only")){this.m_oMessage&&bUserClick&&(this.m_oMessage.innerHTML="",this.m_oMessage.setAttribute("show","false"),this.m_oPlayer.overrideMediaCheck(!1));var cLabel,iQualityIndex=oLevel?oLevel.getAttribute("level"):isNaN(iLevel)?-1:iLevel,iRealQualityLevel=this.m_oPlayer.getCurrentQuality();this.m_iLowQualityLevelChanges=0,this.m_oPlayer.setQuality(iQualityIndex,bUserClick);for(var oChild,iLup=0,iChildLevel=0;iLup<this.m_oQualityLevelContainer.children.length;iLup++)"AxiomMediaQualityLevelRow"==(oChild=this.m_oQualityLevelContainer.children[iLup]).className&&((iChildLevel=1*oChild.getAttribute("level"))==iRealQualityLevel&&(cLabel=oChild.getAttribute("label")),iChildLevel==iQualityIndex?oChild.setAttribute("state","selected"):oChild.setAttribute("state","normal"));this.m_oAutoBitrate&&(this.m_oAutoBitrate.innerText=-1==iQualityIndex?" ("+cLabel+")":""),this.m_oFullControls.setAttribute("reveal",!!this.m_oPlayer.isPaused()),this.m_oQualityLevels&&this.m_oQualityLevels.setAttribute("show",!1),this.m_fnClickQualityMeter&&document.body.removeEventListener("click",this.m_fnClickQualityMeter)}},AxiomMediaPlayerUI.prototype._onClickQualityMeter=function(evt){this.m_oPlayer&&this.m_oFullControls&&this.m_oQualityLevels&&this.m_oQualityMeter&&"true"==this.m_oQualityMeter.getAttribute("enabled")&&(this._createQualityLevels(),"true"==this.m_oQualityLevels.getAttribute("show")?(this.m_oFullControls.setAttribute("reveal",!!this.m_oPlayer.isPaused()),this.m_oQualityLevels.setAttribute("show",!1),this.m_fnClickQualityMeter&&document.body.removeEventListener("click",this.m_fnClickQualityMeter)):(this.m_oFullControls.setAttribute("reveal",!0),this.m_oQualityLevels.setAttribute("show",!0),this.m_fnClickQualityMeter||(this.m_fnClickQualityMeter=this._onClickQualityMeter.bind(this)),CancelEvent(evt),document.body.addEventListener("click",this.m_fnClickQualityMeter)))},AxiomMediaPlayerUI.prototype._onControlsPlayerRecoverMax=function(){if(this.m_oPlayer&&this.m_oQualityLevelContainer){this.m_iLowQualityBufferingInterval&&clearTimeout(this.m_iLowQualityBufferingInterval),this.m_oMessage&&this.m_oControlOptions&&this.m_oControlOptions.AudioOnlyMessage&&(this.m_oMessage.innerHTML=this.m_oControlOptions.AudioOnlyMessage,this.m_oMessage.setAttribute("show","true")),this.m_oPlayer.overrideMediaCheck(!0),this.m_oBufferSpinner&&this.m_oBufferSpinner.setAttribute("show","false");for(var iLup=0;iLup<this.m_oQualityLevelContainer.children.length;iLup++)oChild=this.m_oQualityLevelContainer.children[iLup],"AxiomMediaQualityLevelRow"==oChild.className&&oChild.setAttribute("state","normal");this.m_oAutoBitrate&&(this.m_oAutoBitrate.innerText=""),this._onClickMediaMode.call(this,!1,!0)}},AxiomMediaPlayerUI.prototype._onControlsQualityChange=function(){if(this.m_oPlayer&&this.m_oQualityLevelContainer&&this.m_oPlayer.getQualityLevels()){var iRealQualityLevel=this.m_oPlayer.getCurrentQuality(),iQualityIndex=iRealQualityLevel;this.m_oPlayer.getAutoQuality()&&(iQualityIndex=-1);for(var oQualityLevel=this.m_oPlayer.getCurrentQualityLevel(),iLup=0;iLup<this.m_oQualityLevelContainer.children.length;iLup++)oChild=this.m_oQualityLevelContainer.children[iLup],"AxiomMediaQualityLevelRow"==oChild.className&&(iChildLevel=1*oChild.getAttribute("level"),iChildLevel==iQualityIndex&&-1==iQualityIndex&&oQualityLevel.PreviousQualityLevel!=iRealQualityLevel&&oChild.setAttribute("state","pending"))}},AxiomMediaPlayerUI.prototype._onControlsQualityComplete=function(){if(this.m_oPlayer&&this.m_oQualityLevelContainer){var aLevels=this.m_oPlayer.getQualityLevels();if(aLevels){var cLabel,oChild,iRealQualityLevel=this.m_oPlayer.getCurrentQuality(),iCurrentQualityLevel=iRealQualityLevel,bAutoQuality=this.m_oPlayer.getAutoQuality();aLevels[aLevels.length-1].qualityIndex;this.m_iLowQualityLevelChanges=0;var iChildLevel=0;this._createQualityLevels(),bAutoQuality&&(iCurrentQualityLevel=-1);for(var iLup=0;iLup<this.m_oQualityLevelContainer.children.length;iLup++)"AxiomMediaQualityLevelRow"==(oChild=this.m_oQualityLevelContainer.children[iLup]).className&&((iChildLevel=1*oChild.getAttribute("level"))==iRealQualityLevel&&(cLabel=oChild.getAttribute("label")),iChildLevel==iCurrentQualityLevel?oChild.setAttribute("state","selected"):oChild.setAttribute("state","normal"));this.showPoster(this.m_oPlayer.m_bAudioTag),this.m_oAutoBitrate&&(this.m_oAutoBitrate.innerText=-1==iCurrentQualityLevel?" ("+cLabel+")":""),this.m_oMediaModeToggle&&1==this.m_oMediaModeToggle.checked&&(this.m_oMediaModeToggle.checked=!1),this.m_oQualityLevels.setAttribute("audio-only","false"),this.m_oMessage&&(this.m_oMessage.innerHTML="",this.m_oMessage.setAttribute("show","false"),this.m_oPlayer.overrideMediaCheck(!1))}}},AxiomMediaPlayerUI.prototype._onControlsBufferUpdated=function(oEvent){if(this.m_oPlayer){if(this.m_iLowQualityBufferingInterval&&clearTimeout(this.m_iLowQualityBufferingInterval),"bufferStalled"==oEvent.state){var iRealQualityLevel=this.m_oPlayer.getCurrentQuality();this.m_oPlayer.getAutoQuality()&&0==iRealQualityLevel&&(this.m_iLowQualityBufferingInterval=setTimeout(this._onLowQualityBuffering.bind(this),MAX_LOW_QUALITY_BUFFERING_TIMEOUT))}oEvent.buffering?this.m_oBufferSpinner.setAttribute("show","true"):this.m_oBufferSpinner.setAttribute("show","false")}},AxiomMediaPlayerUI.prototype._onLowQualityBuffering=function(){this._onControlsPlayerRecoverMax.call(this)},AxiomMediaPlayerUI.prototype._onControlsPlayerError=function(oEvent){this.m_oPlayer&&this.setMessage(g_oMessages.MediaError)},AxiomMediaPlayerUI.prototype._onClickMediaMode=function(bClick,bAudioOnly,oEvent){if(this.m_oPlayer)if("false"==this.m_oQualityLevels.getAttribute("audio-only")||bAudioOnly){if("false"==this.m_oQualityLevels.getAttribute("audio-only")){this.m_oMediaModeToggle&&0==this.m_oMediaModeToggle.checked&&(this.m_oMediaModeToggle.checked=!0),this.m_oQualityLevels.setAttribute("audio-only","true"),this.showPoster(!0);for(var iLup=0;iLup<this.m_oQualityLevelContainer.children.length;iLup++)oChild=this.m_oQualityLevelContainer.children[iLup],"AxiomMediaQualityLevelRow"==oChild.className&&oChild.setAttribute("state","normal");this.m_oAutoBitrate&&(this.m_oAutoBitrate.innerText=""),this.m_oPlayer.bFlash?(bClick||1!=this.m_oPlayer.m_oParams.IEAudioRecover)&&this.m_oPlayer.setQuality(0,bClick):this.m_oPlayer.switchHTMLVideoToAudio()}}else this.m_oMediaModeToggle&&1==this.m_oMediaModeToggle.checked&&(this.m_oMediaModeToggle.checked=!1),this.m_oQualityLevels.setAttribute("audio-only","false"),this.showPoster(!1),this.m_oMessage&&(this.m_oMessage.innerHTML="",this.m_oMessage.setAttribute("show","false"),this.m_oPlayer.overrideMediaCheck(!1)),bClick&&(this.m_iLowQualityLevelChanges=0),this.m_oPlayer.bFlash?this.m_oPlayer.setQuality(-1,bClick):this.m_oPlayer.switchHTMLAudioToVideo()},AxiomMediaPlayerUI.prototype._onControlsPlay=function(){if(this.showPoster(this.m_oPlayer.m_bAudioTag),this.m_oPlayBtn&&this.m_oPlayer){var cToggle=this.m_oPlayer.isPaused()?"off":"on";this.m_oPlayBtn.setAttribute("data-toggle",cToggle),"true"==(this.m_oQualityLevels?this.m_oQualityLevels.getAttribute("show"):"false")?this.m_oFullControls.setAttribute("reveal",!0):this.m_oFullControls.setAttribute("reveal",!!this.m_oPlayer.isPaused())}},AxiomMediaPlayerUI.prototype._onClickPlay=function(){this.m_oPlayBtn&&this.m_oPlayer&&("on"==this.m_oPlayBtn.getAttribute("data-toggle")?this.m_oPlayer.pause():this.m_oPlayer.play())},AxiomMediaPlayerUI.prototype._onClickFullScreen=function(){this.m_oFullScreenBtn&&this.m_oPlayer&&("on"==this.m_oFullScreenBtn.getAttribute("data-toggle")?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&(this.m_oFullScreenBtn.setAttribute("data-toggle","off"),document.msExitFullscreen()):this.m_oParentContainer.requestFullscreen?this.m_oParentContainer.requestFullscreen():this.m_oParentContainer.webkitRequestFullscreen?this.m_oParentContainer.webkitRequestFullscreen():this.m_oParentContainer.mozRequestFullScreen?this.m_oParentContainer.mozRequestFullScreen():this.m_oParentContainer.msRequestFullscreen&&(this.m_oFullScreenBtn.setAttribute("data-toggle","on"),this.m_oParentContainer.msRequestFullscreen()))},AxiomMediaPlayerUI.prototype._onFullScreenChange=function(oEvt){"on"==this.m_oFullScreenBtn.getAttribute("data-toggle")?this.m_oFullScreenBtn.setAttribute("data-toggle","off"):this.m_oFullScreenBtn.setAttribute("data-toggle","on")},AxiomMediaPlayerUI.prototype._onControlsVolumeChange=function(){if(this.m_oPlayer){if(this.m_oMuteBtn){var cToggle=this.m_oPlayer.isMuted()?"off":"on";this.m_oMuteBtn.setAttribute("data-toggle",cToggle)}this.m_oVolumeBar&&(this.m_oVolumeBar.Value(this.m_oPlayer.getVolume()),this._updateVolumeBar(),this.m_oPlayer.isMuted()?this.m_oVolumeBar.Disable():this.m_oVolumeBar.Enable())}},AxiomMediaPlayerUI.prototype._onClickMute=function(){this.m_oMuteBtn&&this.m_oPlayer&&("on"==this.m_oMuteBtn.getAttribute("data-toggle")?this.m_oPlayer.mute():this.m_oPlayer.unmute())},AxiomMediaPlayerUI.prototype._onVolumeStart=function(){this.m_oVolumeBar&&this.m_oPlayer},AxiomMediaPlayerUI.prototype._onVolumeProgress=function(fValue,bSticking){this.m_oVolumeBar&&this.m_oPlayer&&(this.m_oVolumeBar.Value(fValue),this.m_oPlayer.setVolume(fValue))},AxiomMediaPlayerUI.prototype._onVolumeEnd=function(fValue,bSticking){this.m_oVolumeBar&&this.m_oPlayer&&(this.m_oVolumeBar.Value(fValue),this.m_oPlayer.setVolume(fValue))},AxiomMediaPlayerUI.prototype._onVolumeInput=function(){this.m_oVolumeBar&&this.m_oPlayer&&this.m_oPlayer.setVolume(this.m_oVolumeBar.value)},AxiomMediaPlayerUI.prototype._updateVolumeBar=function(){this.m_oVolumeBar&&IsIE()},AxiomMediaPlayerUI.prototype._onControlsSeeking=function(){this.m_bSeekInProgress=!0},AxiomMediaPlayerUI.prototype._onControlsSeeked=function(){this.m_bSeekInProgress=!1,this.m_iSeekTime>-1&&(this.m_iSeekTime=-1,this._onControlsTimeUpdate(!0))},AxiomMediaPlayerUI.prototype._updatePrevious=function(){this.m_oMessageManager&&this.m_oPreviousBtn&&this.m_oPreviousBtn.setAttribute("active",this.m_oMessageManager.CanSeekByDirection(-1))},AxiomMediaPlayerUI.prototype._onClickPrevious=function(){this.m_oPreviousBtn&&this.m_oPlayer&&this.m_oMessageManager&&"false"!=this.m_oPreviousBtn.getAttribute("active")&&(this.m_iSeekTime=this.m_oMessageManager.GetSeekTimeByDirection(-1),this.m_oPlayer.seek(this.m_iSeekTime))},AxiomMediaPlayerUI.prototype._updateNext=function(){if(this.m_oMessageManager&&this.m_oNextBtn){var bActive=this.m_oMessageManager.CanSeekByDirection(1);bActive&&g_oSettings.DisableForwardSeek&&this.m_oSeekBar&&(bActive=1e3*this.m_oSeekBar.FurthestTime()>this.m_oMessageManager.GetSeekTimeByDirection(1)),this.m_oNextBtn.setAttribute("active",bActive)}},AxiomMediaPlayerUI.prototype._onClickNext=function(){this.m_oNextBtn&&this.m_oPlayer&&this.m_oMessageManager&&"false"!=this.m_oNextBtn.getAttribute("active")&&(this.m_iSeekTime=this.m_oMessageManager.GetSeekTimeByDirection(1),this.m_oPlayer.seek(this.m_iSeekTime))},AxiomMediaPlayerUI.prototype._createQualityControl=function(){this.m_oQualityMeter||this.m_oPlayer.m_bAudioOnly||this.m_oControlOptions.hideQualityLevelsSection||(this.m_oQualityMeter=document.createElement("div"),this.m_oQualityMeter.className="AxiomMediaQualityMeter",this.m_oQualityMeter.setAttribute("active","false"),this.m_oQualityMeter.setAttribute("enabled","true"),this.m_oQualityMeter.addEventListener("click",this._onClickQualityMeter.bind(this)),this.m_oBottomControls.appendChild(this.m_oQualityMeter))},AxiomMediaPlayerUI.prototype._createQualityLevelControls=function(){if(this.m_oPlayer){this.m_oQualityLevels=document.createElement("div"),this.m_oQualityLevels.className="AxiomMediaQualityLevels",this.m_oQualityLevels.setAttribute("show","false"),this.m_oQualityLevels.setAttribute("audio-only","false"),this.m_oParentContainer.appendChild(this.m_oQualityLevels);var oLevel=document.createElement("div");oLevel.className="AxiomMediaQualityLevelHeader",oLevel.innerText=g_oMessages.QualityLabel,this.m_oQualityLevels.appendChild(oLevel),(oLevel=document.createElement("div")).className="AxiomMediaQualityLevelSpacer",this.m_oQualityLevels.appendChild(oLevel),this.m_oQualityLevelContainer=document.createElement("div"),this.m_oQualityLevelContainer.className="AxiomMediaQualityLevelContainer",this.m_oQualityLevels.appendChild(this.m_oQualityLevelContainer)}},AxiomMediaPlayerUI.prototype._createSubtitlesBtn=function(){this.m_oSubitlesBtn||this.m_oControlOptions.hideSubtitlesSection||(this.m_oSubitlesBtn=document.createElement("div"),this.m_oSubitlesBtn.className="AxiomMediaSubtitlesBtn",this.m_oSubitlesBtn.setAttribute("active","false"),this.m_oSubitlesBtn.setAttribute("enabled","true"),this.m_oSubitlesBtn.addEventListener("click",this._onClickSubtitlesBtn.bind(this)),this.m_oBottomControls.appendChild(this.m_oSubitlesBtn))},AxiomMediaPlayerUI.prototype._onClickSubtitlesBtn=function(evt){this.m_oPlayer&&this.m_oFullControls&&this.m_oSubitlesBtn&&"true"==this.m_oSubitlesBtn.getAttribute("enabled")&&(this._createSubtitleTrackPanel(),"true"==this.m_oSubtitleContent.getAttribute("show")?(this.m_oFullControls.setAttribute("reveal",!!this.m_oPlayer.isPaused()),this.m_oSubtitleContent.setAttribute("show",!1),this.m_fnClickSubtitles&&document.body.removeEventListener("click",this.m_fnClickSubtitles)):(this.m_oFullControls.setAttribute("reveal",!0),this.m_oSubtitleContent.setAttribute("show",!0),this.m_fnClickSubtitles||(this.m_fnClickSubtitles=this._onClickSubtitlesBtn.bind(this)),CancelEvent(evt),document.body.addEventListener("click",this.m_fnClickSubtitles)))},AxiomMediaPlayerUI.prototype._createSubtitleTrackPanel=function(){if(this.m_oPlayer&&!this.m_oSubtitleContent){this.m_oSubtitleContent=document.createElement("div"),this.m_oSubtitleContent.className="AxiomMediaSubtitleList",this.m_oSubtitleContent.setAttribute("show","false"),this.m_oParentContainer.appendChild(this.m_oSubtitleContent);var oLevel=document.createElement("div");oLevel.className="AxiomMediaQualityLevelHeader",oLevel.innerText=g_oMessages.Subtitles,this.m_oSubtitleContent.appendChild(oLevel),(oLevel=document.createElement("div")).className="AxiomMediaQualityLevelSpacer",this.m_oSubtitleContent.appendChild(oLevel),this.m_oSubtitleTrackContainer=document.createElement("div"),this.m_oSubtitleTrackContainer.className="AxiomMediaSubtitleListContainer",this.m_oSubtitleContent.appendChild(this.m_oSubtitleTrackContainer)}},AxiomMediaPlayerUI.prototype._createSubtitleTrackEntries=function(){if(this.m_oSubitlesBtn&&!(this.m_oSubtitleTrackContainer.children.length>0)){var oCheck,oLabel,oRow,oTrack,iSelectedTrack=this.m_oPlayer.isTextTrackVisible()?this.m_oPlayer.getCurrentTextTrackId():-1,aTracks=this.m_oPlayer.getTextTracks();(oRow=document.createElement("div")).setAttribute("data-id",-1),-1==iSelectedTrack&&oRow.setAttribute("state","selected"),oRow.className="AxiomMediaSubtitleTrackRow",oRow.addEventListener("click",this._onClickSubtitleTrack.bind(this,{id:-1},!0)),(oCheck=document.createElement("div")).className="AxiomMediaQualityLevelRowCheck",oRow.appendChild(oCheck),(oLabel=document.createElement("div")).className="AxiomMediaSubtitleTrackRowLabel",oLabel.appendChild(document.createTextNode(g_oMessages.Off)),oRow.appendChild(oLabel),this.m_oSubtitleTrackContainer.appendChild(oRow);for(var iLup=0;iLup<aTracks.length;iLup++)oTrack=aTracks[iLup],(oRow=document.createElement("div")).setAttribute("data-id",oTrack.id),oRow.className="AxiomMediaSubtitleTrackRow",oRow.addEventListener("click",this._onClickSubtitleTrack.bind(this,oTrack,!0)),iSelectedTrack==oTrack.id&&oRow.setAttribute("state","selected"),(oCheck=document.createElement("div")).className="AxiomMediaQualityLevelRowCheck",oRow.appendChild(oCheck),(oLabel=document.createElement("div")).className="AxiomMediaSubtitleTrackRowLabel",oLabel.appendChild(document.createTextNode(oTrack.title)),oRow.appendChild(oLabel),this.m_oSubtitleTrackContainer.appendChild(oRow)}},AxiomMediaPlayerUI.prototype._onClickSubtitleTrack=function(oTrack,bUserClick,cTrackId){if(this.m_oPlayer){if(oTrack){var bCurrentlyVisible=this.m_oPlayer.isTextTrackVisible();if(-1==oTrack.id){if(!bCurrentlyVisible)return;this.m_oPlayer.setTextTrackVisible(!1)}else{if(bCurrentlyVisible)if(parseInt(this.m_oPlayer.getCurrentTextTrackId())==oTrack.id)return;this.m_oPlayer.setTextTrackVisible(!0),this.m_oPlayer.setTextTrackId(oTrack.id)}}for(var oElem,iLup=0;iLup<this.m_oSubtitleTrackContainer.children.length;iLup++)"AxiomMediaSubtitleTrackRow"==(oElem=this.m_oSubtitleTrackContainer.children[iLup]).className&&(parseInt(oElem.getAttribute("data-id"))==oTrack.id?oElem.setAttribute("state","selected"):oElem.setAttribute("state","normal"));this.m_oFullControls.setAttribute("reveal",!!this.m_oPlayer.isPaused())}},AxiomMediaPlayerUI.prototype._onControlsTimeUpdate=function(bPrint){if(this.m_oPlayer&&!this.m_oControlOptions.hideTimeSection&&(this._createQualityControl(),!this.m_bSeekInProgress&&!this.m_bUserSeeking)){var iDuration=this.m_oPlayer.getDuration(),iTime=this.m_oPlayer.getCurrentTime();this._updateTime(iTime,iDuration),this._updateSeekBar(iTime,iDuration),this._updatePrevious(),this._updateNext()}},AxiomMediaPlayerUI.prototype._ControlsMouseOver=function(evt){evt.fromElement&&"Edge"==evt.fromElement.className&&this.resize.call(this)},AxiomMediaPlayerUI.prototype._onSeekStart=function(){this.m_bUserSeeking=!0},AxiomMediaPlayerUI.prototype._onSeekProgress=function(fValue,bSticking){if(this.m_oSeekBar.Value(fValue,bSticking),!bSticking){var iTime=fValue*this.m_oPlayer.getDuration();this._updateTime(iTime,this.m_oPlayer.getDuration())}},AxiomMediaPlayerUI.prototype._onSeekEnd=function(fValue,bSticking){this.m_oSeekBar.Value(fValue,bSticking),bSticking||(this.m_bUserSeeking=!1,this.m_oPlayer&&(this.m_iSeekTime=fValue*this.m_oPlayer.getDuration(),this.m_oPlayer.seek(this.m_iSeekTime)))},AxiomMediaPlayerUI.prototype._onSeekChange=function(){this.m_iSeekTimeoutID&&clearTimeout(this.m_iSeekTimeoutID),this._onSeekInputTimeout()},AxiomMediaPlayerUI.prototype._onSeekInput=function(){this.m_oSeekBar&&IsIE()},AxiomMediaPlayerUI.prototype._onSeekInputEnd=function(){this.m_iSeekTimeoutID&&clearTimeout(this.m_iSeekTimeoutID)},AxiomMediaPlayerUI.prototype._onSeekInputTimeout=function(){this.m_iSeekTimeoutID&&clearTimeout(this.m_iSeekTimeoutID),this.m_bUserSeeking=!1,this.m_oSeekEndEvent},AxiomMediaPlayerUI.prototype._updateTime=function(iTime,iDuration){if(this.m_oTime){var bShowHour=iDuration>=36e5;this.m_iDuration==iDuration&&this.m_cDurationLabel||(this.m_iDuration=iDuration,this.m_cDurationLabel=" / "+this._formatTime(iDuration,bShowHour)),this.m_oTime.innerHTML=this._formatTime(iTime,bShowHour)+this.m_cDurationLabel}},AxiomMediaPlayerUI.prototype._updateSeekBar=function(iTime,iDuration){if(this.m_oPlayer&&!this.m_bSeekInProgress&&!this.m_bUserSeeking&&this.m_oTopControls){if(!this.m_oSeekBar&&iDuration>0){this.m_oFullControls.addEventListener("mouseover",this._ControlsMouseOver.bind(this));var iFurthestTime=-1;window.g_oSettings&&(iFurthestTime=g_oSettings.DisableForwardSeek?g_oSettings.FurthestTime/1e3:-1);var oProperties={horizontal:!0,thumbWidth:14,thumbHeight:14,height:12,width:this.m_oTopControls.offsetWidth-14,furthestTime:iFurthestTime,duration:iDuration/1e3};this.m_oSeekBar=new Slider(!1,"",oProperties,this.m_oParentContainer,{OnChangeStart:this._onSeekStart.bind(this),OnChanging:this._onSeekProgress.bind(this),OnChangeEnd:this._onSeekEnd.bind(this)});var oSeekBarElement=this.m_oSeekBar.Element;oSeekBarElement.className="AxiomMediaBar",this.m_oTopControls.appendChild(oSeekBarElement)}this.m_oSeekBar&&this.m_oSeekBar.Value(iTime/iDuration),this.m_bSeekBarSetPageSize&&this.m_bControlsGradientSizeSet||this.resize.call(this)}},AxiomMediaPlayerUI.prototype._onControlsRTCUpdate=function(oEvent){if(this.m_oPlayer){var oData=oEvent.data;switch(oEvent.state){case"mediaAccess":oData&&oData.remote&&(this.activateControls(!0),this.showControls(!0))}}},AxiomMediaPlayerUI.prototype._formatTime=function(iTime,bShowHour){var iOrigTime=iTime;iTime*=.001;var iHour=Math.floor(iTime/3600),iMinute=Math.floor(iTime/60%60),iSecond=Math.floor(iTime%60),cText=iMinute+":"+(iSecond<10?"0":"")+iSecond;if(bShowHour&&(cText=iHour+":"+(iMinute<10?"0":"")+iMinute+":"+(iSecond<10?"0":"")+iSecond),this.m_bShowMS){var iMilliseconds=Math.floor(iOrigTime%1e3);cText+="."+(iMilliseconds<10?"00":iMilliseconds<100?"0":"")+iMilliseconds}return cText},AxiomMediaPlayerUI.prototype._removeAllChildren=function(oNode){for(;oNode.firstChild;)oNode.removeChild(oNode.firstChild)};
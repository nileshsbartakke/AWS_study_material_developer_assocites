var g_oFileBrowserCallBack,PARAM_CORE=1,PARAM_OPTIONAL=2,PARAM_ADVANCED_ONLY=4,PARAM_NEW_ALLOWED=8,PARAM_EDIT_ALLOWED=16,PARAM_LIVE_EDIT_ALLOWED=32,PARAM_EDIT_READ_ONLY=64,PARAM_DISPLAY_READ_ONLY=128,PARAM_SAVE_NOT_ALLOWED=256;function AxiomSceneManager(){var m_oCurrentScene=null,m_oCurrentVideoInputs={},m_oCurrentAudioInputs={};function getSceneByInputCount(iInputCount){for(var oScene,iLup=0;iLup<g_aAxiomDefaultScenes.length;iLup++)if(g_aAxiomDefaultScenes[iLup].MaxStreams>=iInputCount){oScene=g_aAxiomDefaultScenes[iLup];break}if(!oScene){iLup=0;for(var iStreams=0;iLup<g_aAxiomDefaultScenes.length;iLup++)g_aAxiomDefaultScenes[iLup].MaxStreams>iStreams&&(iStreams=g_aAxiomDefaultScenes[iLup].MaxStreams,oScene=g_aAxiomDefaultScenes[iLup])}return oScene||(oScene=g_aAxiomDefaultScenes[0]),oScene}function getSceneByInputCountWithSlides(iInputCount){for(var oScene,iLup=0;iLup<g_aAxiomSlideScenes.length;iLup++)if(g_aAxiomSlideScenes[iLup].MaxStreams>=iInputCount){oScene=g_aAxiomSlideScenes[iLup];break}if(!oScene){iLup=0;for(var iStreams=0;iLup<g_aAxiomSlideScenes.length;iLup++)g_aAxiomSlideScenes[iLup].MaxStreams>iStreams&&(iStreams=g_aAxiomSlideScenes[iLup].MaxStreams,oScene=g_aAxiomSlideScenes[iLup])}return oScene||(oScene=g_aAxiomDefaultScenes[0]),oScene}function getSceneInputArray(bAudio,oVideoInputs,oAudioInputs){var aInputs=[];if(1==g_oSettings.AudioOnly||bAudio)if(oAudioInputs)for(var oKey in oAudioInputs)oAudioInputs[oKey]&&aInputs.push(parseInt(oKey));else for(var oKey in m_oCurrentAudioInputs)m_oCurrentAudioInputs[oKey]&&aInputs.push(parseInt(oKey));else if(oVideoInputs)for(var oKey in oVideoInputs)oVideoInputs[oKey]&&aInputs.push(parseInt(oKey));else for(var oKey in m_oCurrentVideoInputs)m_oCurrentVideoInputs[oKey]&&aInputs.push(parseInt(oKey));return aInputs}function getSlideInputInScene(oVideoInputs){if(oVideoInputs){for(var oKey in oVideoInputs)if(oVideoInputs[oKey]&&g_oSources2[oKey]&&g_oSources2[oKey].getParam("IsSlides"))return g_oSources2[oKey]}else for(var oKey in m_oCurrentVideoInputs)if(m_oCurrentVideoInputs[oKey]&&g_oSources2[oKey]&&g_oSources2[oKey].getParam("IsSlides"))return g_oSources2[oKey];return null}function getScreenInputInScene(oVideoInputs){if(oVideoInputs){for(var oKey in oVideoInputs)if(oVideoInputs[oKey]&&g_oSources2[oKey]&&g_oSources2[oKey].getParam("IsScreenShare"))return g_oSources2[oKey]}else for(var oKey in m_oCurrentVideoInputs)if(m_oCurrentVideoInputs[oKey]&&g_oSources2[oKey]&&g_oSources2[oKey].getParam("IsScreenShare"))return g_oSources2[oKey];return null}this.setSingleInputScene=function(iInputKey,bReturn){var iMediaType=AXIOM_MEDIA_BOTH;1==g_oSettings.AudioOnly&&(iMediaType=AXIOM_MEDIA_AUDIO);var oScene=getSceneByInputCount(1);if(bReturn){var oReturn={SceneKey:oScene.Key,MediaType:iMediaType};return oReturn.AudioInputs=[parseInt(iInputKey)],oReturn.VideoInputs=[],iMediaType==AXIOM_MEDIA_BOTH&&(oReturn.VideoInputs=[{SourceKey:parseInt(iInputKey),SlotIndex:0}]),oReturn}g_oAxiomCommManager.AddToScene(g_cSocketName,null,oScene.Key,iMediaType,[parseInt(iInputKey)],SET_SCENE_MODE_ADD_NEW_POSITION),g_oAxiomCommManager.SendGenericMessage(g_cSocketName,null,{Message:"CompositorClearSceneLayout"},MQ_MESSAGEFILTER_SPEAKER)},this.clearScene=function(bReturn){var iMediaType=AXIOM_MEDIA_BOTH;1==g_oSettings.AudioOnly&&(iMediaType=AXIOM_MEDIA_AUDIO);var oScene=getSceneByInputCount(1);if(bReturn){var oReturn={SceneKey:null,MediaType:iMediaType};return oScene&&(oReturn.SceneKey=oScene.Key),oReturn.AudioInputs=[],oReturn.VideoInputs=[],iMediaType==AXIOM_MEDIA_BOTH&&(oReturn.VideoInputs=[]),oReturn}oScene&&(g_oAxiomCommManager.AddToScene(g_cSocketName,null,parseInt(oScene.SceneKey.substring(1)),iMediaType,[],SET_SCENE_MODE_ADD_NEW_POSITION),g_oAxiomCommManager.SendGenericMessage(g_cSocketName,null,{Message:"CompositorClearSceneLayout"},MQ_MESSAGEFILTER_SPEAKER))},this.addInputToScene=function(iInputKey,bVideo,bAudio,oVideoInputs,oAudioInputs){1==g_oSettings.AudioOnly&&(bVideo=!1,bAudio=!0);var bReturn=oVideoInputs||oAudioInputs;iInputKey=parseInt(iInputKey);var oScene,oInput=g_oSources2[iInputKey],iLup=0,aInputs=getSceneInputArray(!1,oVideoInputs,null),aAudioInputs=getSceneInputArray(!0,null,oAudioInputs),oSlideInput=getSlideInputInScene(oVideoInputs),oScreenInput=getScreenInputInScene(oVideoInputs),aSceneInputs=[],aSceneAudioInputs=[];for(oScreenInput&&(aSceneInputs.push(oScreenInput.Key),aSceneAudioInputs.push(oScreenInput.Key)),!oInput.getParam("IsScreenShare")||oScreenInput&&oScreenInput.Key==oInput.Key||(aSceneInputs.push(oInput.Key),aSceneAudioInputs.push(oInput.Key)),oSlideInput&&(aSceneInputs.push(oSlideInput.Key),aSceneAudioInputs.push(oSlideInput.Key)),!oInput.getParam("IsSlides")||oSlideInput&&oSlideInput.Key==oInput.Key||(aSceneInputs.push(oInput.Key),aSceneAudioInputs.push(oInput.Key)),iLup=0;iLup<aInputs.length;iLup++)-1==aSceneInputs.indexOf(aInputs[iLup])&&aSceneInputs.push(aInputs[iLup]);for(iLup=0;iLup<aAudioInputs.length;iLup++)-1==aSceneAudioInputs.indexOf(aAudioInputs[iLup])&&aSceneAudioInputs.push(aAudioInputs[iLup]);-1==aSceneInputs.indexOf(oInput.Key)&&aSceneInputs.push(oInput.Key),-1==aSceneAudioInputs.indexOf(oInput.Key)&&aSceneAudioInputs.push(oInput.Key),oScene=getSceneByInputCount(aSceneInputs.length),(oInput.getParam("IsScreenShare")||oInput.getParam("IsSlides")||oScreenInput||oSlideInput)&&(oScene=getSceneByInputCountWithSlides(aSceneInputs.length)),1!=g_oSettings.AudioOnly&&oScene.MaxStreams<aSceneInputs.length&&((oScreenInput||oInput.getParam("IsScreenShare"))&&(oSlideInput||oInput.getParam("IsSlides"))?aSceneInputs.splice(2,1):oScreenInput||oInput.getParam("IsScreenShare")||!oSlideInput&&!oInput.getParam("IsSlides")?oScreenInput||oInput.getParam("IsScreenShare")||oSlideInput||oInput.getParam("IsSlides")||aSceneInputs.splice(0,1):aSceneInputs.splice(1,1));var iMediaType=AXIOM_MEDIA_BOTH;bVideo&&!bAudio?iMediaType=AXIOM_MEDIA_VIDEO:!bVideo&&bAudio&&(iMediaType=AXIOM_MEDIA_AUDIO);var oReturn=null;if(iMediaType==AXIOM_MEDIA_BOTH&&aSceneAudioInputs.length!=aSceneInputs.length)if(bReturn)for((oReturn={SceneKey:oScene.Key,MediaType:iMediaType}).AudioInputs=aSceneAudioInputs,oReturn.VideoInputs=[],iLup=0;iLup<aSceneInputs.length;iLup++)oReturn.VideoInputs.push({SourceKey:aSceneInputs[iLup],SlotIndex:iLup});else g_oAxiomCommManager.AddToScene(g_cSocketName,null,m_oCurrentScene.SceneKey,AXIOM_MEDIA_AUDIO,aSceneAudioInputs,SET_SCENE_MODE_ADD_NEW_POSITION),g_oAxiomCommManager.AddToScene(g_cSocketName,null,oScene.Key,AXIOM_MEDIA_VIDEO,aSceneInputs,SET_SCENE_MODE_ADD_NEW_POSITION),g_oAxiomCommManager.SendGenericMessage(g_cSocketName,null,{Message:"CompositorClearSceneLayout"},MQ_MESSAGEFILTER_SPEAKER);else if(bReturn){if(oReturn={SceneKey:oScene.Key,MediaType:iMediaType},iMediaType!=AXIOM_MEDIA_AUDIO&&iMediaType!=AXIOM_MEDIA_BOTH||(oReturn.AudioInputs=aSceneInputs),oReturn.VideoInputs=[],iMediaType==AXIOM_MEDIA_VIDEO||iMediaType==AXIOM_MEDIA_BOTH)for(iLup=0;iLup<aSceneInputs.length;iLup++)oReturn.VideoInputs.push({SourceKey:aSceneInputs[iLup],SlotIndex:iLup})}else g_oAxiomCommManager.AddToScene(g_cSocketName,null,oScene.Key,iMediaType,aSceneInputs,SET_SCENE_MODE_ADD_NEW_POSITION),g_oAxiomCommManager.SendGenericMessage(g_cSocketName,null,{Message:"CompositorClearSceneLayout"},MQ_MESSAGEFILTER_SPEAKER);if(oReturn)return oReturn},this.removeInputFromScene=function(iInputKey,bVideo,bAudio,oVideoInputs,oAudioInputs){1==g_oSettings.AudioOnly&&(bVideo=!1,bAudio=!0);var bReturn=oVideoInputs||oAudioInputs;iInputKey=parseInt(iInputKey);var oScene,oInput=g_oSources2[iInputKey],iLup=0,aInputs=getSceneInputArray(!1,oVideoInputs,null),aAudioInputs=getSceneInputArray(!0,null,oAudioInputs),oSlideInput=getSlideInputInScene(oVideoInputs),oScreenInput=getScreenInputInScene(oVideoInputs),aSceneInputs=[],aSceneAudioInputs=[];for(iLup=0;iLup<aInputs.length;iLup++)aInputs[iLup]!=oInput.Key&&aSceneInputs.push(aInputs[iLup]);for(iLup=0;iLup<aAudioInputs.length;iLup++)aAudioInputs[iLup]!=oInput.Key&&aSceneAudioInputs.push(aAudioInputs[iLup]);oScene=getSceneByInputCount(aSceneInputs.length),(oScreenInput&&oScreenInput.Key!=oInput.Key||oSlideInput&&oSlideInput.Key!=oInput.Key)&&(oScene=getSceneByInputCountWithSlides(aSceneInputs.length));var iMediaType=AXIOM_MEDIA_BOTH;bVideo&&!bAudio?iMediaType=AXIOM_MEDIA_VIDEO:!bVideo&&bAudio&&(iMediaType=AXIOM_MEDIA_AUDIO);var oReturn=null;if(aSceneInputs.length<=0)bReturn?oReturn={MediaType:iMediaType,Remove:!0,InputKey:iInputKey,SceneKey:(oScene=getSceneByInputCount(1)).Key}:(g_oAxiomCommManager.RemoveSource(g_cSocketName,null,iInputKey,iMediaType),g_oAxiomCommManager.SendGenericMessage(g_cSocketName,null,{Message:"CompositorClearSceneLayout"},MQ_MESSAGEFILTER_SPEAKER));else if(iMediaType==AXIOM_MEDIA_BOTH&&aSceneAudioInputs.length!=aSceneInputs.length)if(bReturn)for((oReturn={SceneKey:oScene.Key,MediaType:iMediaType}).AudioInputs=aSceneAudioInputs,oReturn.VideoInputs=[],iLup=0;iLup<aSceneInputs.length;iLup++)oReturn.VideoInputs.push({SourceKey:aSceneInputs[iLup],SlotIndex:iLup});else g_oAxiomCommManager.AddToScene(g_cSocketName,null,m_oCurrentScene.SceneKey,AXIOM_MEDIA_AUDIO,aSceneAudioInputs,SET_SCENE_MODE_ADD_NEW_POSITION),g_oAxiomCommManager.AddToScene(g_cSocketName,null,oScene.Key,AXIOM_MEDIA_VIDEO,aSceneInputs,SET_SCENE_MODE_ADD_NEW_POSITION),g_oAxiomCommManager.SendGenericMessage(g_cSocketName,null,{Message:"CompositorClearSceneLayout"},MQ_MESSAGEFILTER_SPEAKER);else if(bReturn){if(oReturn={SceneKey:oScene.Key,MediaType:iMediaType},iMediaType!=AXIOM_MEDIA_AUDIO&&iMediaType!=AXIOM_MEDIA_BOTH||(oReturn.AudioInputs=aSceneInputs),oReturn.VideoInputs=[],iMediaType==AXIOM_MEDIA_VIDEO||iMediaType==AXIOM_MEDIA_BOTH)for(iLup=0;iLup<aSceneInputs.length;iLup++)oReturn.VideoInputs.push({SourceKey:aSceneInputs[iLup],SlotIndex:iLup})}else g_oAxiomCommManager.AddToScene(g_cSocketName,null,oScene.Key,iMediaType,aSceneInputs,SET_SCENE_MODE_ADD_NEW_POSITION),g_oAxiomCommManager.SendGenericMessage(g_cSocketName,null,{Message:"CompositorClearSceneLayout"},MQ_MESSAGEFILTER_SPEAKER);if(oReturn)return oReturn},this.addInputToList=function(cInputKey,bVideo,bAudio){bVideo&&1!=g_oSettings.AudioOnly&&(m_oCurrentVideoInputs[cInputKey]=!0),bAudio&&(m_oCurrentAudioInputs[cInputKey]=!0)},this.removeInputFromList=function(cInputKey,bVideo,bAudio){bVideo&&1!=g_oSettings.AudioOnly&&m_oCurrentVideoInputs[cInputKey]&&(m_oCurrentVideoInputs[cInputKey]=null,delete m_oCurrentVideoInputs[cInputKey]),bAudio&&m_oCurrentAudioInputs[cInputKey]&&(m_oCurrentAudioInputs[cInputKey]=null,delete m_oCurrentAudioInputs[cInputKey])},this.getInputCount=function(){return Object.keys(m_oCurrentVideoInputs).length<Object.keys(m_oCurrentAudioInputs).length?Object.keys(m_oCurrentAudioInputs).length:Object.keys(m_oCurrentVideoInputs).length},this.isInputInScene=function(cInputKey){return!(!m_oCurrentAudioInputs||!m_oCurrentAudioInputs[cInputKey])||!(!m_oCurrentVideoInputs||!m_oCurrentVideoInputs[cInputKey])},this.setScene=function(cSceneKey){m_oCurrentScene=g_aAxiomScenes[cSceneKey]}}function AxiomStaffNode(oStaff,oParams){this.StaffID=oParams.ID,this.StaffKey=oStaff.Key,this.Connected=!1;var m_oRow=null,m_oNode=null,m_oExpandNode=null,m_oThumbnail=null,m_oTitle=null,m_oStatus=null,m_oReconnectBtn=null,m_oEditBtn=null,m_oDeleteBtn=null,m_oChatOption=null,m_oParams=oParams;function onAnimationEnd(evt){m_oExpandNode&&("openstart"==m_oExpandNode.getAttribute("details")?m_oExpandNode.setAttribute("details","open"):"closestart"==m_oExpandNode.getAttribute("details")&&m_oExpandNode.setAttribute("details","close")),CancelEvent(evt)}function onToggleExpandNode(){m_oExpandNode&&("open"==m_oExpandNode.getAttribute("details")?m_oExpandNode.setAttribute("details","closestart"):m_oExpandNode.setAttribute("details","openstart")),m_oRow&&("true"==m_oRow.getAttribute("details")?m_oRow.setAttribute("details","false"):m_oRow.setAttribute("details","true"))}this.setTitle=function(cTitle){m_oTitle&&(m_oTitle.innerText=cTitle)},this.setStatus=function(oModerator){m_oStatus.className=oModerator.Connected?"StaffListSubTitleOnline":"StaffListSubTitle",m_oStatus.innerHTML=oModerator.Connected?g_oMessages.Online:g_oMessages.Offline,this.Connected||(this.Connected=oModerator.Connected),m_oDeleteBtn&&m_oDeleteBtn.setAttribute("enabled",this.Connected?"false":"true"),m_oReconnectBtn&&"false"==m_oReconnectBtn.getAttribute("enabled")&&m_oReconnectBtn.setAttribute("enabled",this.Connected?"true":"false")},this.getElem=function(){return m_oRow},this.getChatOption=function(){return m_oChatOption},this.getThumbnailElem=function(){return m_oThumbnail},function(oStaff){m_oChatOption=CreateSelectOption(oStaff.Name,oStaff.EventStaffKey),(m_oRow=document.createElement("div")).id=m_oParams.ID,m_oRow.className="StaffListRow",(m_oNode=document.createElement("div")).className="StaffListItem",(m_oThumbnail=document.createElement("div")).className="StaffListThumbnail";var cImageURL=oStaff.ImageURL;if(cImageURL&&cImageURL.length>0&&-1==cImageURL.toUpperCase().indexOf("DEFAULT.GIF")&&-1==cImageURL.toUpperCase().indexOf("SOURCEDEFAULTWEBCAM.SVG")?m_oThumbnail.style.backgroundImage="url('"+cImageURL+"')":m_oThumbnail=SetProfileLetter(m_oThumbnail,oStaff.Name),m_oThumbnail.addEventListener("click",onToggleExpandNode.bind(this)),m_oNode.appendChild(m_oThumbnail),oParent=document.createElement("div"),oParent.className="StaffListDetails",oParent.addEventListener("click",onToggleExpandNode.bind(this)),(m_oTitle=document.createElement("div")).className="StaffListTitle",oParent.appendChild(m_oTitle),(m_oStatus=document.createElement("div")).className="StaffListSubTitle",oParent.appendChild(m_oStatus),m_oNode.appendChild(oParent),g_bStaffEdit||oStaff.EventStaffKey==g_oSettings.EventStaffKey){var oSpan=document.createElement("span");oSpan.className="AxiomShowMore",m_oNode.appendChild(oSpan),oSpan.addEventListener("click",onToggleExpandNode.bind(this))}if(m_oRow.appendChild(m_oNode),g_bStaffEdit||oStaff.EventStaffKey==g_oSettings.EventStaffKey){(m_oExpandNode=document.createElement("div")).className="SourceListItemDetailsContainer",m_oExpandNode.addEventListener("animationend",onAnimationEnd.bind(this)),m_oExpandNode.addEventListener("webkitAnimationEnd",onAnimationEnd.bind(this));var oRowNode=document.createElement("div");oRowNode.className="SourceListItemDetailsContainerRow",m_oExpandNode.appendChild(oRowNode);var oSpacer=document.createElement("div");oSpacer.className="SourceDetailsSpacer",oRowNode.appendChild(oSpacer),(oSpacer=document.createElement("div")).className="SourceDetailsSpacer",oRowNode.appendChild(oSpacer),g_bStaffEdit||oStaff.EventStaffKey==g_oSettings.EventStaffKey?((m_oReconnectBtn=document.createElement("div")).className="SourceDetailsReconnectButton",m_oReconnectBtn.setAttribute("title",g_oMessages.ReconnectLabel),m_oReconnectBtn.addEventListener("click",function(){m_oReconnectBtn&&"true"==m_oReconnectBtn.getAttribute("enabled")&&m_oParams.StaffReconnect&&m_oParams.StaffReconnect()}.bind(this)),m_oReconnectBtn.setAttribute("enabled","false"),oRowNode.appendChild(m_oReconnectBtn)):((oSpacer=document.createElement("div")).className="SourceDetailsSpacer",oRowNode.appendChild(oSpacer)),g_bStaffEdit?((m_oEditBtn=document.createElement("div")).className="SourceDetailsEditButton",m_oEditBtn.setAttribute("title",g_oMessages.EditStafferLabel),m_oEditBtn.addEventListener("click",function(){m_oParams.StaffEdit&&m_oParams.StaffEdit()}.bind(this)),oRowNode.appendChild(m_oEditBtn)):((oSpacer=document.createElement("div")).className="SourceDetailsSpacer",oRowNode.appendChild(oSpacer)),m_oInfoBtn=document.createElement("div"),m_oInfoBtn.className="SourceDetailsInfoButton",m_oInfoBtn.setAttribute("title",g_oMessages.DetailStafferLabel),m_oInfoBtn.addEventListener("click",function(){m_oParams.StaffDetails&&m_oParams.StaffDetails()}.bind(this)),oRowNode.appendChild(m_oInfoBtn),g_bStaffEdit&&((m_oDeleteBtn=document.createElement("div")).className="SourceDetailsDeleteButton",m_oDeleteBtn.setAttribute("title",g_oMessages.DeleteStafferLabel),m_oDeleteBtn.setAttribute("enabled","false"),m_oDeleteBtn.addEventListener("click",function(){m_oDeleteBtn&&"true"==m_oDeleteBtn.getAttribute("enabled")&&m_oParams.StaffDelete&&m_oParams.StaffDelete()}.bind(this)),oRowNode.appendChild(m_oDeleteBtn)),m_oRow.appendChild(m_oExpandNode)}this.setTitle(oStaff.Name),this.setStatus(oStaff)}.call(this,oStaff)}function AxiomNavList(aOptions,fnSelectCall){this.Container=null;var m_fnSelectCall=fnSelectCall,m_oOptionNodes={},m_oToggleClick=null;this.AddOption=function(cLabel,cDataType,cID){var oOption=document.createElement("div");oOption.setAttribute("data-type",cDataType),oOption.className="AxiomNavContainer",cID&&(oOption.id=cID),oOption.appendChild(CreateNavLinkButton(cLabel)),oOption.addEventListener("click",function(cDataType,evt){m_fnSelectCall&&m_fnSelectCall(cDataType,evt);this.ToggleDisplay.call(this)}.bind(this,cDataType)),m_oOptionNodes[cDataType]=oOption,this.Container.appendChild(oOption)},this.RemoveOption=function(cDataType){m_oOptionNodes[cDataType]&&(this.Container.removeChild(m_oOptionNodes[cDataType]),delete m_oOptionNodes[cDataType])},this.HideOption=function(cDataType){m_oOptionNodes[cDataType]&&AddClass(m_oOptionNodes[cDataType],"Hide")},this.ShowOption=function(cDataType){m_oOptionNodes[cDataType]&&RemoveClass(m_oOptionNodes[cDataType],"Hide")},this.ToggleDisplay=function(evt){this.Container&&(parseInt(this.Container.getAttribute("data-state"))?(this.Container.setAttribute("data-state",0),m_oToggleClick&&window.removeEventListener("click",m_oToggleClick)):(this.Container.setAttribute("data-state",1),m_oToggleClick=this.ToggleDisplay.bind(this),window.addEventListener("click",m_oToggleClick)));CancelEvent(evt)},function(aOptions){this.Container=document.createElement("div"),this.Container.setAttribute("data-state",0),this.Container.className="AxiomNavDisplay";for(var iLup=0;iLup<aOptions.length;iLup++)this.AddOption(aOptions[iLup].Label,aOptions[iLup].Data,aOptions[iLup].ID)}.call(this,aOptions)}function AxiomAddNewList(aOptions,fnSelectCall){this.Container=null;var m_oOptionsList=null,m_oAddBtn=null,m_fnSelectCall=fnSelectCall,m_oOptionNodes={},m_oToggleClick=null;function _onToggleAddClick(evt){this.Container&&(parseInt(this.Container.getAttribute("data-state"))?(this.Container.setAttribute("data-state",0),m_oToggleClick&&window.removeEventListener("click",m_oToggleClick)):(this.Container.setAttribute("data-state",1),m_oToggleClick=_onToggleAddClick.bind(this),window.addEventListener("click",m_oToggleClick)));CancelEvent(evt)}this.AddOption=function(cLabel,cDataType,cID){var oOption=document.createElement("li");oOption.setAttribute("data-type",cDataType),cID&&(oOption.id=cID),oOption.appendChild(CreateLinkButton(cLabel)),oOption.addEventListener("click",function(cDataType,evt){m_fnSelectCall&&m_fnSelectCall(cDataType,evt);_onToggleAddClick.call(this)}.bind(this,cDataType)),m_oOptionNodes[cDataType]=oOption,m_oOptionsList.appendChild(oOption)},this.RemoveOption=function(cDataType){m_oOptionNodes[cDataType]&&(m_oOptionsList.removeChild(m_oOptionNodes[cDataType]),delete m_oOptionNodes[cDataType])},this.HideOption=function(cDataType){m_oOptionNodes[cDataType]&&AddClass(m_oOptionNodes[cDataType],"Hide")},this.ShowOption=function(cDataType){m_oOptionNodes[cDataType]&&RemoveClass(m_oOptionNodes[cDataType],"Hide")},function(aOptions){this.Container=document.createElement("div"),this.Container.setAttribute("data-state",0),this.Container.className="AxiomAddNewContainer";var oOptionsContainer=document.createElement("div");oOptionsContainer.className="AxiomAddNewOptionsContainer",this.Container.appendChild(oOptionsContainer),(m_oOptionsList=document.createElement("ul")).className="AddNewOptionsList",oOptionsContainer.appendChild(m_oOptionsList);for(var iLup=0;iLup<aOptions.length;iLup++)this.AddOption(aOptions[iLup].Label,aOptions[iLup].Data,aOptions[iLup].ID);(m_oAddBtn=CreateAddNewButton()).addEventListener("click",_onToggleAddClick.bind(this)),this.Container.appendChild(m_oAddBtn)}.call(this,aOptions)}function AxiomSimpleList(oColumns,aData,fnSelect,fnDelete){this.Container=null;var m_aData=aData,m_fnSelect=fnSelect,m_fnDelete=fnDelete,m_oDataGrid=null,m_aoColumns=oColumns;function _onSelectClick(iKey,evt){m_fnSelect&&m_fnSelect(iKey,evt)}function _onDeleteClick(iKey,evt){for(var oData,iLup=0;iLup<m_aData.length;iLup++)(oData=m_aData[iLup]).Node&&oData.Key==iKey&&(oData.Node.style.display="none");m_fnDelete&&m_fnDelete(iKey,evt),CancelEvent(evt)}function ListRowItem(oData,fnSelect,fnDelete){var oTD,oElem,oRow=document.createElement("tr");return oRow.style.cursor="pointer",oRow.className="AxiomTableListItem",oRow.setAttribute("key",oData.Key),fnSelect&&oRow.addEventListener("click",fnSelect),(oTD=document.createElement("td")).className="AxiomTableContent TableBodyText",oTD.style.display="none",oTD.appendChild(document.createTextNode(oData.Key)),oRow.appendChild(oTD),(oTD=document.createElement("td")).className="AxiomTableContent TableBodyText",oTD.appendChild(document.createTextNode(oData.Title)),oRow.appendChild(oTD),(oTD=document.createElement("td")).className="AxiomTableContent TableBodyActions",oTD.style.width="100px",oRow.appendChild(oTD),fnDelete&&((oElem=document.createElement("div")).className="AxiomActionButtonDelete",oElem.setAttribute("Title",g_oMessages.DeleteLabel),oElem.addEventListener("click",fnDelete),oTD.appendChild(oElem)),oRow}this.Refresh=function(aData){this.Load(aData)},this.Load=function(aData){if(aData&&(m_aData=aData),m_aData){var oData;m_oDataGrid.ClearData();for(var iLup=0;iLup<m_aData.length;iLup++){var oRow=new ListRowItem(oData=m_aData[iLup],_onSelectClick.bind(this,oData.Key),_onDeleteClick.bind(this,oData.Key));oData.Node=oRow,oData.RowItem=oRow,m_oDataGrid.TBodyNode.appendChild(oData.Node),m_oDataGrid.Data.push(oData)}m_oDataGrid.Render()}},function(){var oCol;this.Container=document.createElement("div"),this.Container.setAttribute("data-mode",1),this.Container.className="AxiomDGGrid";for(var iLup=0;iLup<m_aoColumns.length;iLup++)(oCol=m_aoColumns[iLup]).Checked=!oCol.IsCollapsed,oCol.Collapsible=!0,oCol.DataName=oCol.UID,oCol.Label=oCol.Title;m_oDataGrid=new DataGrid({Container:this.Container,ItemMaster:document.createElement("div"),Columns:m_aoColumns,Features:[],Padding:4,ItemSizeOffset:10,SizeMode:DG_SIZE_DISABLED,AutoResize:!0,RenderComplete:function(){}.bind(this),TableHeaderClass:"TableHeaderText"}),this.Load()}.call(this)}function AxiomSimpleNonDragList(aData,fnChange,fnEdit,fnDelete,fnCustomRowNode,fnCustomAddNode){this.Container=null;var m_aData=[],m_fnChange=fnChange,m_fnEdit=fnEdit,m_fnDelete=fnDelete,m_fnRowNode=fnCustomRowNode||function(oData,fnEdit,fnDelete){var oRow=document.createElement("div");oRow.className="AxiomToolListRow";var oDetails=document.createElement("div");oDetails.className="AxiomToolListRowDetails",oRow.appendChild(oDetails);var oActions,oTitle=CreateStandardTextElement(oData.label);oDetails.appendChild(oTitle),(fnEdit||fnDelete)&&((oActions=document.createElement("div")).className="AxiomToolListRowActions",oRow.appendChild(oActions));if(fnEdit){var oEditBtn=document.createElement("div");oEditBtn.className="AxiomActionButtonEdit",oEditBtn.setAttribute("title",g_oMessages.EditLabel),oEditBtn.addEventListener("click",onEdit.bind(this,oData.value)),oActions.appendChild(oEditBtn)}if(fnDelete){var oDeleteBtn=document.createElement("div");oDeleteBtn.className="AxiomActionButtonDelete",oDeleteBtn.setAttribute("title",g_oMessages.DeleteLabel),oDeleteBtn.addEventListener("click",onDelete.bind(this,oData.value)),oActions.appendChild(oDeleteBtn)}return oRow}.bind(this),m_fnAddNode=fnCustomAddNode||function(){var oContainer=document.createElement("div");return oContainer.className="AxiomToolListRow",(m_oNewItemInput=document.createElement("input")).type="text",m_oNewItemInput.setAttribute("placeholder",g_oMessages.AddNewItem),m_oNewItemInput.className="AxiomInput",m_oNewItemInput.addEventListener("keyup",function(evt){var iKey=evt.which||evt.keyCode;(iKey>47&&iKey<91||iKey>95&&iKey<112||iKey>185&&iKey<193||iKey>218&&iKey<223&&!evt.altKey)&&(addNodeToList.call(this,m_oNewItemInput.value,0),m_oNewItemInput.value="",m_fnChange&&m_fnChange(0))}.bind(this)),oContainer.appendChild(m_oNewItemInput),oContainer}.bind(this),m_oNewItemInput=null,m_oAddNode=null;function addNodeToList(cLabel,oValue){m_fnRowNode&&(oRowItem=m_fnRowNode({label:cLabel,index:m_aData.length,value:oValue},m_fnEdit?onEdit.bind(this,m_aData.length):null,m_fnDelete?onDelete.bind(this,m_aData.length):null)),oRowItem&&(this.Container.insertBefore(oRowItem,m_oAddNode),m_aData.push({node:oRowItem,label:cLabel,value:oValue,index:m_aData.length,deleted:!1}))}function onEdit(iKey,evt){m_fnEdit&&m_fnEdit(iKey,evt)}function onDelete(iKey,evt){for(var oData,iLup=0;iLup<m_aData.length;iLup++)(oData=m_aData[iLup])&&oData.value==iKey&&(m_aData[iLup].deleted=!0,this.Container.removeChild(m_aData[iLup].node));m_fnDelete&&m_fnDelete(iKey,evt)}this.Refresh=function(aData){this.Load(aData)},this.LoadData=function(aData){if(aData)for(var iLup=0;iLup<aData.length;iLup++)addNodeToList.call(this,aData[iLup].label,aData[iLup].value)},this.GetData=function(){for(var aData=[],iLup=0;iLup<m_aData.length;iLup++)aData.push({label:m_aData[iLup].label,value:m_aData[iLup].value});return aData},this.ClearData=function(){RemoveAllChildren(this.Container),m_aData=[]},this.AddData=function(cLabel,oValue){addNodeToList.call(this,cLabel,oValue)},function(aData){this.Container=document.createElement("div"),this.Container.className="AxiomToolVerticalBodyList",m_fnAddNode&&(m_oAddNode=m_fnAddNode()),m_oAddNode&&this.Container.appendChild(m_oAddNode),this.LoadData(aData)}.call(this,aData)}function AxiomSimpleVerticalList(aData,oGridOptions,fnChange,fnDelete,fnCustomRowNode,fnCustomAddNode){this.Container=null;var m_oGridOptions=oGridOptions,m_aData=aData,m_fnChange=fnChange,m_fnAddRowNodeCall=fnCustomRowNode||function(oData,fnChange,fnDelete){var oRowItem=new function(oData,bEdit,fnChange,fnDelete){var oFlags=bEdit?{Drag:1,Actions:1,Key:0}:{Key:0};oFlags.Key=oData.Key;var oCSS3GridNode=new CSS3GridNode(oFlags),oContent=oCSS3GridNode.GetContentNode(),oContainer=document.createElement("div");oContainer.className="AxiomVerticalListInputContainer",bEdit||(oContainer.className+=" Disabled");oContent.appendChild(oContainer);var oInput=document.createElement("input");oInput.type="text",oInput.name="Answer",oData.Value&&(oInput.value=oData.Value);bEdit&&fnChange&&oInput.addEventListener("keydown",fnChange);bEdit||(oInput.disabled=!0);oInput.className="AxiomInput",oContainer.appendChild(oInput),bEdit&&fnDelete&&oCSS3GridNode.AddAction("Delete",fnDelete,null,g_oMessages.DeleteLabel);return{Node:oCSS3GridNode,Input:oInput,Key:oData.Key,Data:oData}}(oData,m_oGridOptions.AllowEdit,fnChange,fnDelete);return oRowItem||null}.bind(this),m_fnCustomAddNode=fnCustomAddNode||function(){var oContainer=document.createElement("div");return oContainer.className="AxiomVerticalListInputContainer",(m_oNewItemInput=document.createElement("input")).type="text",m_oNewItemInput.setAttribute("placeholder",g_oMessages.AddNewItem),m_oNewItemInput.className="AxiomInput",m_oNewItemInput.addEventListener("keyup",function(evt){var iKey=evt.which||evt.keyCode;if(iKey>47&&iKey<91||iKey>95&&iKey<112||iKey>185&&iKey<193||iKey>218&&iKey<223&&!evt.altKey){var oData={Value:m_oNewItemInput.value,Key:0};m_oNewItemInput.value="",_addNodeToList.call(this,oData),m_oGrid.Render(!0),m_fnChange&&m_fnChange()}}.bind(this)),oContainer.appendChild(m_oNewItemInput),oContainer}.bind(this),m_oGrid=null,m_oNewItemInput=null,m_aNodes=[];function _onChange(iKey,evt){m_fnChange&&m_fnChange(iKey,evt)}function _addNodeToList(oData){if(m_fnAddRowNodeCall&&(oRowItem=m_fnAddRowNodeCall({Description:oData.Value,AnswerIndex:m_aNodes.length,Key:oData.Key},_onChange.bind(this,m_aNodes.length),function(iIndex,evt){var oNode=m_aNodes[iIndex],oCSS3Node=oNode.Node;if(oCSS3Node){oNode.Deleted=!0;var oInput,oGridContainer=oCSS3Node.GetFullNode().parentNode,iPos=parseInt(oGridContainer.getAttribute("data-position"));m_oGrid.RemoveNodeAt(iPos,!0),m_oGrid.Render(!0);for(var iLup=iPos;iLup>iPos-2;iLup--)if((oCSS3Node=m_oGrid.GetNodeAt(iLup))&&(oInput=oCSS3Node.element.querySelector("input"))){oInput.focus();break}!oInput&&m_oNewItemInput&&m_oNewItemInput.focus(),_onChange.call(this)}}.bind(this,m_aNodes.length))),oRowItem){m_oGridOptions.AllowEdit&&m_oGrid.AddHandler(oRowItem.Node.GetDragNode());var oTemp=m_oGrid.AddElement(oRowItem.Node.GetFullNode());oTemp.SetContainerProperties(100,null,"%",null),oRowItem.ManagedNode=oTemp,m_aNodes.push(oRowItem),oRowItem.Input&&(oRowItem.Input.value="",oRowItem.Input.focus(),oRowItem.Input.value=oData.Value)}}this.Refresh=function(aData){this.Load(aData)},this.Load=function(aData){if(aData&&(m_aData=aData),m_aData){for(var oData,iLup=0;iLup<m_aData.length;iLup++)oData=m_aData[iLup],_addNodeToList.call(this,oData);m_oGrid.Render(!0)}},this.GetData=function(){var oGridNode,oEntry,oReturn={};oReturn.Deleted=[],oReturn.List=[];for(var aNodes=m_oGrid.GetNodesInOrder(),aoEntries=m_aNodes.slice(0),iLup=0;iLup<aNodes.length;iLup++){oGridNode=aNodes[iLup],oEntry=null;for(var iLup2=0;iLup2<aoEntries.length;iLup2++)if((oEntry=aoEntries[iLup2]).Node.GetFullNode()==oGridNode.element){aoEntries.splice(iLup2,1),oReturn.List.push({Text:oEntry.Input.value,Key:oEntry.Key?oEntry.Key:0});break}}for(iLup=0;iLup<aoEntries.length;iLup++)(oEntry=aoEntries[iLup]).Deleted&&oEntry.Key&&oReturn.Deleted.push({Text:oEntry.Input.value,Key:oEntry.Key?oEntry.Key:0});return oReturn},this.Clear=function(){m_aNodes=[],m_oGrid.Clear(!0),m_oGrid.Render(!0)},function(){this.Container=document.createElement("div"),this.Container.className="AxiomSimpleVerticalList",(m_oGrid=new CSS3DragAndDrop({bUseCustomHandlers:1})).SetContainerProperties(0,0),m_oGrid.SetNodeProperties(100,m_oGridOptions&&m_oGridOptions.NodeHeight?m_oGridOptions.NodeHeight:56,"%"),m_oGrid.SetMultiSelect(!1),m_oGrid.AllowSingleSelect(!1),m_oGrid.PreventXAxis(!0),m_oGrid.SetPositionChangeCB(function(oData){_onChange.call(this)}.bind(this));var oCSS3Grid=m_oGrid.GetContainer();if(RemoveClass(oCSS3Grid,"AxiomGrid"),RemoveClass(oCSS3Grid,"AxiomDragAndDrop"),AddClass(oCSS3Grid,"AxiomVerticalList"),this.Container.appendChild(oCSS3Grid),m_oGridOptions.AllowEdit){var oAddNode=m_fnCustomAddNode();oAddNode&&this.Container.appendChild(oAddNode)}this.Load()}.call(this)}function CSS3GridNode(oParams){var m_oNode,m_oDragNode,m_oImageNode,m_oContentNode,m_oActionNode,m_oLine1,m_oLine2,m_oLine3,m_oData,m_iDataKey,m_cDataKeyName;this.GetDragNode=function(){return m_oDragNode},this.GetImageNode=function(){return m_oImageNode},this.GetContentNode=function(){return m_oContentNode},this.GetFullNode=function(){return m_oNode},this.GetLine=function(iLineNo){if(iLineNo<1||iLineNo>3||isNaN(iLineNo))return null;var oLine;switch(iLineNo){case 1:oLine=m_oLine1;break;case 2:oLine=m_oLine2;break;case 3:oLine=m_oLine3}return oLine},this.GetDataKey=function(){return m_iDataKey},this.GetDataKeyName=function(){return m_cDataKeyName},this.AddAction=function(cType,fnClickHandler,cClass,cTitle){if(cType&&cType.length&&"function"==typeof fnClickHandler){var oAction=document.createElement("DIV");oAction.className="AxiomActionButton"+(cClass||cType.replace(" ","")),oAction.addEventListener("click",fnClickHandler),oAction.title=cTitle||cType,m_oActionNode&&m_oActionNode.appendChild(oAction)}},this.AddCustomActionObject=function(oElem){oElem instanceof Element&&m_oActionNode&&m_oActionNode.appendChild(oElem)},this.SetData=function(oData){m_oData=oData},this.GetData=function(){return m_oData},function(oParams){var oContainer,oDrag,cValue,cClass,oImage,iKey,cKeyName,oContent,cString,oLine,oActionZone;(oContainer=document.createElement("DIV")).className="AxiomPrimeFullWidthNode",m_oNode=oContainer,1==oParams.Drag&&((oDrag=document.createElement("DIV")).className="AxiomPrimeNodeDragZone",m_oDragNode=oDrag,m_oNode.appendChild(oDrag)),oParams.RepresentationImage&&1==oParams.RepresentationImage.length?(cValue=oParams.RepresentationImage,cClass=oParams.ImageClassModifier,oImage=document.createElement("DIV"),/[a-zA-z]/.test(cValue)?(oImage.className="AxiomUserIconLetter",oImage.appendChild(document.createTextNode(cValue))):isNaN(parseInt(cValue))?oImage.className="AxiomUserIconGlobe":oImage.className="AxiomUserIconNumber",cClass&&(oImage.className+=" "+cClass),m_oImageNode=oImage,m_oNode.appendChild(oImage)):oParams.PhotoURL?function(cURL,cClass){var oImage=document.createElement("DIV");oImage.className=cClass?"AxiomPrimeNodePhoto "+cClass:"AxiomPrimeNodePhoto",oImage.style.backgroundImage="url("+cURL+")",m_oImageNode=oImage,m_oNode.appendChild(oImage)}(oParams.PhotoURL,oParams.ImageClassModifier):oParams.ImageURL?function(cURL,cClass){var oImage=document.createElement("DIV");oImage.className=cClass?"AxiomPrimeNodeImage "+cClass:"AxiomPrimeNodeImage",oImage.style.backgroundImage="url("+cURL+")",m_oImageNode=oImage,m_oNode.appendChild(oImage)}(oParams.ImageURL,oParams.ImageClassModifier):(oParams.Image=1)&&function(){var oImage=document.createElement("DIV");m_oImageNode=oImage,m_oNode.appendChild(oImage)}(),iKey=oParams.Key,cKeyName=oParams.KeyName,(oContent=document.createElement("DIV")).className="AxiomPrimeNodeContent",m_oContentNode=oContent,iKey&&(cKeyName&&cKeyName.length?oContent.setAttribute("data-"+cKeyName,iKey):oContent.setAttribute("data-key",iKey)),m_oNode.appendChild(m_oContentNode),m_iDataKey=oParams.Key,m_cDataKeyName=oParams.KeyName,(oParams.Line1||oParams.Line2||oParams.Line3)&&(oParams.Line1&&(cString=oParams.Line1,(oLine=document.createElement("P")).className="AxiomLabel",m_oLine1=oLine,m_oContentNode.appendChild(oLine),cString&&cString.length&&oLine.appendChild(document.createTextNode(cString))),oParams.Line2&&function(cString,bCopyLink){var oLine=document.createElement("P"),oText=document.createElement("SPAN");if(m_oLine2=oText,m_oContentNode.appendChild(oLine),cString&&cString.length&&(oText.appendChild(document.createTextNode(cString)),oLine.className="AxiomAccentText",oLine.appendChild(oText),bCopyLink)){var oCopyLink=document.createElement("SPAN");oCopyLink.className="AxiomCopyButton",oClipboardCopyManager.AttachCopyHandler(oCopyLink,oText),oLine.appendChild(oCopyLink)}}(oParams.Line2,1==oParams.Line2Copy),oParams.Line3&&function(cString,bCopyLink){var oLine=document.createElement("P"),oText=document.createElement("SPAN");if(m_oLine3=oLine,m_oContentNode.appendChild(oLine),cString&&cString.length&&(oText.appendChild(document.createTextNode(cString)),oLine.className="AxiomStandardText",oLine.appendChild(oText),bCopyLink)){var oCopyLink=document.createElement("SPAN");oCopyLink.className="AxiomCopyButton",oClipboardCopyManager.AttachCopyHandler(oCopyLink,oText),oLine.appendChild(oCopyLink)}}(oParams.Line3,1==oParams.Line3Copy)),oParams.Actions&&((oActionZone=document.createElement("DIV")).className="AxiomNodeActions",m_oActionNode=oActionZone,m_oNode.appendChild(m_oActionNode))}(oParams)}function CreateWarningConfirmation(cMessage,cWarningLabel,fnCancel,fnDelete,fnOk){var oMessage=document.createElement("div");oMessage.className="AxiomContentMessageBody";var oText=document.createElement("div");oText.className="AxiomContentMessageText","string"==typeof cMessage?oText.innerHTML=cMessage:oText.appendChild(cMessage),oMessage.appendChild(oText);var oBtn,oRowBtns=document.createElement("div");oRowBtns.className="AxiomContentMessageBtns",fnCancel&&((oBtn=CreateCancelButton()).addEventListener("click",fnCancel),oRowBtns.appendChild(oBtn)),fnDelete&&((oBtn=CreateWarningButton(cWarningLabel)).addEventListener("click",fnDelete),oRowBtns.appendChild(oBtn)),fnOk&&((oBtn=CreateGeneralButton(g_oMessages.OkLabel)).addEventListener("click",fnOk),oRowBtns.appendChild(oBtn)),oMessage.appendChild(oRowBtns);var oElem=document.createElement("div");return oElem.id="ContentMessage",oElem.className="AxiomContentMessage",oElem.appendChild(oMessage),oElem}function CreateModalMessageCard(cMessage,aBtns){var oMessage=document.createElement("div");oMessage.className="AxiomContentMessageBody";var oText=document.createElement("div");oText.className="AxiomContentMessageText","string"==typeof cMessage?oText.innerHTML=cMessage:oText.appendChild(cMessage),oMessage.appendChild(oText);var oRowBtns=document.createElement("div");oRowBtns.className="AxiomContentMessageBtns";for(var iLup=0;iLup<aBtns.length;iLup++)aBtns[iLup]&&oRowBtns.appendChild(aBtns[iLup]);oMessage.appendChild(oRowBtns);var oElem=document.createElement("div");return oElem.id="ContentMessage",oElem.className="AxiomContentMessage",oElem.appendChild(oMessage),oElem}function AddUnsavedChangesModal(oParent,fnStay,fnLeave){if(!g_oUnsavedChangesModal){var oElem=document.createElement("div");oElem.id="ContentMessage",oElem.className="AxiomContentMessage",CloseUnsavedChangesModal(oElem,oParent),g_oUnsavedChangesModal=oElem;var oMessage=document.createElement("div");oMessage.className="AxiomContentMessageBody";var oText=document.createElement("div");oText.className="AxiomContentMessageText",oText.innerHTML=g_oMessages.UnsavedChangesLabel,oMessage.appendChild(oText);var oRowBtns=document.createElement("div");oRowBtns.className="AxiomContentMessageBtns",oMessage.appendChild(oRowBtns),oElem.appendChild(oMessage);var oBtn=CreateGeneralButton(g_oMessages.StayHereLabel);oBtn.addEventListener("click",CloseUnsavedChangesModal.bind(this,oElem,oParent,fnStay)),oRowBtns.appendChild(oBtn),(oBtn=CreateApplyButton(g_oMessages.YesLeaveLabel)).addEventListener("click",ConfirmedUnsavedChangesModal.bind(this,oElem,oParent,fnLeave)),oRowBtns.appendChild(oBtn),oParent.appendChild(oElem)}}function CloseUnsavedChangesModal(oElem,oParent,fnStay,evt){oElem&&oParent.contains(oElem)&&oParent.removeChild(oElem),g_oUnsavedChangesModal=null,fnStay&&fnStay()}function ConfirmedUnsavedChangesModal(oElem,oParent,fnLeave,evt){CloseUnsavedChangesModal(oElem,oParent),fnLeave&&fnLeave()}function CreateInlineHelpIcon(aLabels){var oHelp=document.createElement("div");return oHelp.className="AxiomInlineHelp",aLabels&&oHelp.addEventListener("click",function(){zE&&(zE.activate({hideOnClose:!0}),zE.setHelpCenterSuggestions({labels:aLabels}))}),oHelp}function CreateInfoIcon(){var oIcon=document.createElement("div");return oIcon.className="AxiomInfoIcon",oIcon}function CreateNavLinkButton(cLabel){var oLink=document.createElement("div");return oLink.className="AxiomNavText",oLink.appendChild(document.createTextNode(cLabel)),oLink}function CreateLinkButton(cLabel){var oLink=document.createElement("div");return oLink.className="AxiomClickableText",oLink.appendChild(document.createTextNode(cLabel)),oLink}function CreateAddNewButton(){var oAddBtn=document.createElement("div");return oAddBtn.className="AxiomAddNewIconLarge",oAddBtn}function CreateFormSpacer(){var oSpacer=document.createElement("div");return oSpacer.className="AxiomFormSpacer",oSpacer}function CreateContentList(){var oList=document.createElement("div");return oList.className="ContentList",oList}function CreateHorizontalTab(cLabel,bSelected){var oTab=document.createElement("div");return oTab.className="AxiomHorizontalTab",oTab.setAttribute("state",bSelected?"selected":""),oTab.appendChild(document.createTextNode(cLabel)),oTab}function CreateSaveButton(){var oButton=document.createElement("div");oButton.className="AxiomSaveActionButton";var oLabel=document.createElement("span");oLabel.className="AxiomSaveText",oLabel.innerHTML=g_oMessages.SaveLabel,oButton.appendChild(oLabel);var oWait=document.createElement("span");oWait.className="AxiomSaveWaitState",oButton.appendChild(oWait);var oComplete=document.createElement("span");return oComplete.className="AxiomSaveComplete",oButton.appendChild(oComplete),oButton}function CreateCancelButton(){var oButton=document.createElement("div");return oButton.className="AxiomCancelActionButton",oButton.innerHTML=g_oMessages.CancelLabel,oButton}function CreateResetButton(){var oButton=document.createElement("div");return oButton.className="AxiomCancelActionButton",oButton.innerHTML=g_oMessages.ResetLabel,oButton}function CreateCloseButton(){var oButton=document.createElement("div");return oButton.className="AxiomCardNavCloseButton",oButton}function CreateBackButton(cLabel){var oButton=document.createElement("div");oButton.className="AxiomBackActionButtonSmall";var oIcon=document.createElement("div");oIcon.className="AxiomBackActionButtonSmallIcon",oButton.appendChild(oIcon);var oLabel=document.createElement("div");return oLabel.className="AxiomBackActionButtonSmallText",oLabel.innerHTML=cLabel?g_oMessages[cLabel]:g_oMessages.BackLabel,oButton.appendChild(oLabel),oButton}function CreateNextButton(cLabel){var oButton=document.createElement("div");oButton.className="AxiomNextActionButtonSmall";var oLabel=document.createElement("div");oLabel.className="AxiomNextActionButtonSmallText",oLabel.innerHTML=cLabel?g_oMessages[cLabel]:g_oMessages.NextLabel,oButton.appendChild(oLabel);var oIcon=document.createElement("div");return oIcon.className="AxiomNextActionButtonSmallIcon",oButton.appendChild(oIcon),oButton}function ConstructSimpleButton(cLabel,cID,cBaseClass,aClassList,aAttributes){var iLup,oBtn=document.createElement("div");if(cID&&(oBtn.id=cID),oBtn.classList.add(cBaseClass),aClassList)for(iLup=0;iLup<=aClassList.length;iLup++)oBtn.classList.add(aClassList[iLup]);if(aAttributes)for(iLup=0;iLup<=aAttributes.length;iLup++)oBtn.setAttribute(aAttributes[iLup].Attribute,aAttributes[iLup].Value);return oBtn.appendChild(document.createTextNode(cLabel)),oBtn}function CreateGeneralButton(cLabel,cID,aClassList,aAttributes){return ConstructSimpleButton(cLabel,cID,"AxiomGeneralActionButton",aClassList,aAttributes)}function CreateAuxiliaryButton(cLabel,cID,aClassList,aAttributes){return ConstructSimpleButton(cLabel,cID,"AxiomAuxiliaryActionButton",aClassList,aAttributes)}function CreateWarningButton(cLabel,cID,aClassList,aAttributes){return ConstructSimpleButton(cLabel,cID,"AxiomWarningActionButton",aClassList,aAttributes)}function CreateApplyButton(cLabel,cID,aClassList,aAttributes){return ConstructSimpleButton(cLabel,cID,"AxiomApplyActionButton",aClassList,aAttributes)}function CreateSliderBox(cTitle){var oBox={Title:null,Body:null,Content:null};oBox.Title=document.createElement("div"),oBox.Title.className="SliderBoxTitle",oBox.Title.setAttribute("openstate","0"),oBox.Title.addEventListener("click",InxpoSliderBox.ToggleOpen.bind(this,oBox.Title));var oLabel=document.createElement("p");oLabel.className="AxiomLabel";var oToggle=document.createElement("span");return oToggle.className="SliderBoxToggle",oLabel.appendChild(oToggle),oLabel.appendChild(document.createTextNode(cTitle)),oBox.Title.appendChild(oLabel),oBox.Body=document.createElement("div"),oBox.Body.className="SliderBoxContent",oBox.Content=document.createElement("div"),oBox.Content.className="AxiomSliderBoxContent",oBox.Body.appendChild(oBox.Content),setTimeout(function(){InxpoSliderBox.MakeSlider(oBox.Body)},500),oBox}function CreateCalendar(cLabel){var oCalendar={Node:null,Calendar:null};oCalendar.Node=document.createElement("input"),oCalendar.Node.setAttribute("type","text"),oCalendar.Node.setAttribute("name","Date"),oCalendar.Node.setAttribute("value",""),oCalendar.Node.setAttribute("placeholder",cLabel),oCalendar.Node.className="AxiomInput",oCalendar.Calendar=new ModernDatePickerPrimeImpl;var aMonths=[g_oMessages.January,g_oMessages.February,g_oMessages.March,g_oMessages.April,g_oMessages.May,g_oMessages.June,g_oMessages.July,g_oMessages.August,g_oMessages.September,g_oMessages.October,g_oMessages.November,g_oMessages.December],aDays=[g_oMessages.Sunday,g_oMessages.Monday,g_oMessages.Tuesday,g_oMessages.Wednesday,g_oMessages.Thursday,g_oMessages.Friday,g_oMessages.Saturday];return oCalendar.Calendar.Calendar.SetTextFormat(3),oCalendar.Calendar.Calendar.SetCustomMonths(aMonths),oCalendar.Calendar.Calendar.SetCustomDays(aDays),oCalendar.Calendar.SetDateMask(g_oMessages.DateFormat),oCalendar.Calendar.Calendar.GetFormattedDate(),oCalendar.Calendar.Calendar.GetSelectedDate(),oCalendar}function CreateModernTime(cLabel){var oTime={Node:null,Time:null};return oTime.Node=document.createElement("input"),oTime.Node.setAttribute("type","text"),oTime.Node.setAttribute("name","Time"),oTime.Node.setAttribute("value",""),oTime.Node.setAttribute("placeholder",cLabel),oTime.Node.className="AxiomInput",oTime.Time=new ModernTimePicker,oTime.Time.Force12Hour(!1),oTime.Time.SetSelectInterval(15),oTime.Time.Attach(oTime),oTime}function CreateDateTimePicker(){var oDateTime={Calendar:null,Time:null};return oDateTime.Calendar=CreateCalendar(g_oMessages.DateFormat),oDateTime.Time=CreateModernTime(g_oMessages.TimeFormat),oDateTime}function CreateIconElement(cIcon,cType,cHoverTitle){var oIcon=document.createElement("div");return oIcon.className="AxiomIcon",cIcon&&(oIcon.style.backgroundImage=cIcon),cType&&oIcon.setAttribute("type",cType),cHoverTitle&&oIcon.setAttribute("title",cHoverTitle),oIcon}function CreateHeaderElement(cLabel){if(!cLabel)return null;var oLabel=document.createElement("div");return oLabel.className="AxiomCardHeaderTitle",oLabel.innerHTML=cLabel,oLabel}function CreateSubHeaderElement(cLabel){if(!cLabel)return null;var oLabel=document.createElement("span");return oLabel.className="AxiomCardHeaderTitleSub",oLabel.innerHTML=cLabel,oLabel}function CreateLabelElement(cLabel){if(!cLabel)return null;var oLabel=document.createElement("div");return oLabel.className="AxiomLabel",oLabel.innerHTML=cLabel,oLabel}function CreateDataTextElement(cTitle,cText){if(!cTitle)return null;var oElem=document.createElement("div");oElem.className="AxiomDataContainer";var oTitle=document.createElement("div");oTitle.className="AxiomDataTitle",oTitle.appendChild(document.createTextNode(cTitle)),oElem.appendChild(oTitle);var oText=document.createElement("div");return oText.className="AxiomDataText",oText.innerText=cText,oElem.appendChild(oText),{container:oElem,text:oText}}function CreateEmptyLabelElement(cLabel){if(!cLabel)return null;var oEmpty=document.createElement("div");oEmpty.className="EmptyList";var oLabel=document.createElement("p");return oLabel.className="EmptyListText",oLabel.innerHTML=cLabel,oEmpty.appendChild(oLabel),oEmpty}function CreateStandardTextElement(cLabel){if(!cLabel)return null;var oLabel=document.createElement("div");return oLabel.className="AxiomStandardText",oLabel.innerHTML=cLabel,oLabel}function CreateErrorElement(cLabel){var oLabel=document.createElement("div");return oLabel.className="AxiomErrorText Hide",oLabel.innerHTML=cLabel||"",oLabel}function CreateSubLabelElement(cLabel){var oLabel=document.createElement("div");return oLabel.className="AxiomContentBlockTextSmall",oLabel.innerHTML=cLabel,oLabel}function CreateLabelWithSubLabelElement(cLabel,cSubLabel){var oElem={Label:null,SubLabel:null};return oElem.Label=CreateLabelElement(cLabel),oElem.SubLabel=CreateSubLabelElement(cSubLabel),oElem}function CreateTextInput(oOptions){var oInput=document.createElement("input");if(oInput.className="AxiomInput",oInput.setAttribute("type","text"),oOptions){for(var cOption in oOptions)oInput.setAttribute(cOption,oOptions[cOption]);oOptions&&oOptions.InputType&&ConfigureInputField&&ConfigureInputField(oInput)}return oInput}function CreateTextArea(oOptions){var oInput=document.createElement("textarea");if(oInput.className="AxiomInput",oOptions){for(var cOption in oOptions)oInput.setAttribute(cOption,oOptions[cOption]);oOptions&&oOptions.InputType&&ConfigureInputField&&ConfigureInputField(oInput)}return oInput}function CreateNumberStepper(oOptions,fnChange){var oInput=document.createElement("div");oInput.className="AxiomInputStepper";var oElem=document.createElement("input");if(oElem.className="AxiomInput",oElem.setAttribute("type","text"),oElem.setAttribute("value","0"),oOptions)for(var cOption in oOptions)oInput.setAttribute(cOption,oOptions[cOption]);ConfigureInputField&&(oElem.setAttribute("InputType","I"),ConfigureInputField(oElem),oElem.addEventListener("keyup",ValidateInput.bind(this,oElem))),fnChange&&oElem.addEventListener("change",fnChange);var oBtn=document.createElement("div");return oBtn.className="AxiomInputStepperMinuBtn",oBtn.addEventListener("click",AxiomStepperClick.bind(this,!1,oInput,oElem,fnChange)),oInput.appendChild(oBtn),(oBtn=document.createElement("div")).className="AxiomInputStepperAddBtn",oBtn.addEventListener("click",AxiomStepperClick.bind(this,!0,oInput,oElem,fnChange)),oInput.appendChild(oBtn),oInput}function CreateSelect(oOptions,aData){var oInput=document.createElement("select");if(oInput.className="AxiomInput",oOptions){for(var cOption in oOptions)oInput.setAttribute(cOption,oOptions[cOption]);oOptions&&oOptions.InputType&&ConfigureInputField&&ConfigureInputField(oInput)}if(aData)for(var iLup=0;iLup<aData.length;iLup++)oInput.appendChild(CreateSelectOption(null,null,null,aData[iLup]));return oInput}function CreateSelectOption(cLabel,cValue,bSelected,oData){var oOption=document.createElement("option");if(oData)for(var cAttribute in oData)"value"==cAttribute?cValue=oData[cAttribute]:"label"==cAttribute?cLabel=g_oMessages&&g_oMessages[oData[cAttribute]]?g_oMessages[oData[cAttribute]]:oData[cAttribute]:"selected"==cAttribute?bSelected=oData[cAttribute]:oOption.setAttribute(cAttribute,oData[cAttribute]);return oOption.setAttribute("value",cValue),oOption.setAttribute("label",cLabel),bSelected&&oOption.setAttribute("selected",bSelected),oOption.appendChild(document.createTextNode(cLabel)),oOption}function CreateRadioOption(cName,oData,fnOnChange){if(!oData)return null;var bSelected=!1,cValue=0,cLabel="",bDisabled=!1,oLabel=document.createElement("label");oLabel.className="AxiomUserSelect";var oInput=document.createElement("input");if(oData)for(var cAttribute in oData)"value"==cAttribute?cValue=oData[cAttribute]:"label"==cAttribute?cLabel=g_oMessages&&g_oMessages[oData[cAttribute]]?g_oMessages[oData[cAttribute]]:oData[cAttribute]:"selected"==cAttribute?bSelected=oData[cAttribute]:"hidden"==cAttribute&&oData[cAttribute]?oLabel.classList.add("Hide"):"disabled"==cAttribute?(bDisabled=oData[cAttribute],oLabel.classList.add("Disabled")):oInput.setAttribute(cAttribute,oData[cAttribute]);oInput.type="radio",oInput.name=cName,oInput.value=cValue,bSelected&&(oInput.checked=!0),bDisabled&&(oInput.disabled=!0),oLabel.appendChild(oInput),fnOnChange&&!bDisabled&&oInput.addEventListener("change",fnOnChange);var oRadio=document.createElement("span");oRadio.className="AxiomRadio",oLabel.appendChild(oRadio);var oText=document.createElement("span");return oText.className="AxiomStandardText",oText.appendChild(document.createTextNode(cLabel)),oLabel.appendChild(oText),oLabel}function CreateToggle(cLabel,oOptions,fnChange){var oInput=document.createElement("div");oInput.className="AxiomSelectionWrapper";var oLabel=document.createElement("label");oLabel.className="AxiomFilterToggle";var oElem=document.createElement("input");if(oElem.className="AxiomToggleBox",oElem.setAttribute("type","checkbox"),fnChange&&oElem.addEventListener("change",fnChange),oOptions){for(var cOption in oOptions)oElem.setAttribute(cOption,oOptions[cOption]);oOptions&&oOptions.InputType&&ConfigureInputField&&ConfigureInputField(oElem)}oLabel.appendChild(oElem);var oInputContainer=document.createElement("span");oInputContainer.className="AxiomToggleContainer";var oInputSlider=document.createElement("span");return oInputSlider.className="AxiomToggleSlider",oInputContainer.appendChild(oInputSlider),oLabel.appendChild(oInputContainer),oInputLabel=CreateStandardTextElement(g_oMessages[cLabel]?g_oMessages[cLabel]:cLabel),oLabel.appendChild(oInputLabel),oInput.appendChild(oLabel),oInput}function CreateCheckBox(cLabel,oOptions,fnChange){var oInput=document.createElement("div");oInput.className="AxiomSelectionWrapper";var oLabel=document.createElement("label");oLabel.className="AxiomUserSelect";var oElem=document.createElement("input");if(oElem.className="AxiomToggleBox",oElem.setAttribute("type","checkbox"),fnChange&&oElem.addEventListener("change",fnChange),oOptions){for(var cOption in oOptions)oElem.setAttribute(cOption,oOptions[cOption]);oOptions&&oOptions.InputType&&ConfigureInputField&&ConfigureInputField(oElem)}oLabel.appendChild(oElem);var oCheckBox=document.createElement("span");return oCheckBox.className="AxiomCheckbox",oLabel.appendChild(oCheckBox),oInputLabel=CreateStandardTextElement(g_oMessages[cLabel]?g_oMessages[cLabel]:cLabel),oLabel.appendChild(oInputLabel),oInput.appendChild(oLabel),oInput}function CreateFileBrowser(oOptions){var oInput=document.createElement("div");oInput.className="AxiomFileBrowserWrapper";var oHidden=document.createElement("input");oHidden.setAttribute("type","hidden"),oInput.appendChild(oHidden);var oElem=document.createElement("input");if(oElem.className="AxiomInput Disabled",oElem.setAttribute("type","text"),oElem.readOnly=!0,oInput.appendChild(oElem),oOptions){for(var cOption in oOptions)oHidden.setAttribute(cOption,oOptions[cOption]);oOptions&&oOptions.InputType&&ConfigureInputField&&ConfigureInputField(oHidden)}var oIcon=document.createElement("span");return oIcon.className="AxiomFileBrowserIcon",oIcon.addEventListener("click",AxiomFileBroswerClick.bind(this,oInput,oOptions.ContextID,oOptions.TypeFilter,oOptions.Mode)),oInput.appendChild(oIcon),oInput}function AxiomFileBroswerClick(oNode,iContextID,sTypeFilter,iMode){g_oFileBrowserDlg=DoFileBrowser(AxiomFileBroswerCallBack.bind(this,oNode),g_oSettings.EventKey,g_oSettings.InstanceID,iContextID,sTypeFilter,iMode,null,g_oSettings.LangLocaleID)}function AxiomFileBroswerCallBack(oNode,cResult,oEvt){var cFileName=cResult.substr(cResult.lastIndexOf("/")+1).substr(cResult.lastIndexOf("\\")+1),cPath=cResult,iIndex=cResult.indexOf(g_oSettings.LibraryDir);-1!=iIndex&&(cPath=cResult.substr(iIndex),cPath=g_oSettings.MediaDir+cPath.split("/").join("\\")),oNode.firstChild&&(oNode.firstChild.value=cPath,oNode.firstChild.nextSibling&&(oNode.firstChild.nextSibling.value=cFileName))}function CreateDragDrop(oOptions){var oFile={};if(oFile.Container=document.createElement("div"),oOptions)for(var cOption in oOptions)oFile.Container.setAttribute(cOption,oOptions[cOption]);return oFile.DragDrop=new FileDragAndDropImp,oFile.DragDrop.Attach(oFile.Container),oFile}function GetInputElmentData(aOptions,oParam){var aData=[];if(aOptions){var iLup=0;for(iLup=0;iLup<aOptions.length;iLup++)"DataVar"==aOptions[iLup].Name&&window&&window[aOptions[iLup].Value]?aData=window[aOptions[iLup].Value]:"DataFunction"==aOptions[iLup].Name&&window&&window[aOptions[iLup].Value]&&(aData=window[aOptions[iLup].Value](oParam))}return aData}function GetInputElmentDataOption(aOptions,oValue){var aData=GetInputElmentData(aOptions);if(aData){var iLup=0;for(iLup=0;iLup<aData.length;iLup++)if(aData[iLup].value==oValue)return aData[iLup]}return null}function AxiomInputElement(oBind,oParam,aOptions,fnChangeCall,iMode){var m_oLabel=null,m_oNode=null,m_oHint=null,m_oInstructions=null,m_oInput=null,m_oContainer=null,m_bEditMode=1==iMode,m_fnChangeCall=fnChangeCall?oBind?fnChangeCall.bind(oBind):fnChangeCall:null,m_iFormat=null,m_bOptional=!0,m_bPendingChanges=!1,m_bCoreParam=!1,m_bLiveEditAllowed=!1,m_bEditReadOnly=!1,m_bSaveNotAllowed=!1,m_iParamKey=null,m_bReady=!1,m_oInitValue=null,m_oRestrict=null,m_bVisible=!0;function onInputChange(){var oValue=this.GetValue.call(this);try{!m_bPendingChanges&&(isNaN(oValue)&&oValue.length>0||!isNaN(oValue)||""==oValue||oValue.Date||oValue.Time||oValue.DateTime)&&(m_bPendingChanges=!0),m_fnChangeCall&&m_fnChangeCall(this)}catch(e){}}function onInputValidate(evt){var oNode=m_oInput||m_oNode;if(evt&&m_oRestrict&&m_oRestrict.length>0&&"0"!=m_oRestrict){var oKey=evt.keyCode||evt.which;if(8!=oKey&&27!=oKey&&46!=oKey&&37!=oKey&&39!=oKey)if(oKey=String.fromCharCode(oKey),!new RegExp(m_oRestrict).test(oKey))return CancelEvent(evt)}var cValue=oNode.value,cAttribute=oNode.getAttribute("InputType");if(cAttribute&&cAttribute.length>0)switch(cAttribute){case"I":case"I+":var iValue=parseInt(cValue);if("0"==cValue.substr(0,1)&&cValue.length>1)return oNode.value=iValue,CancelEvent(evt);var iMax=parseInt(oNode.getAttribute("MaxValue"));if(iMax<iValue)return oNode.value=iMax,CancelEvent(evt);var iMin=parseInt(oNode.getAttribute("MinValue"));if(iMin>iValue)return oNode.value=iMin,CancelEvent(evt)}onInputChange.call(this)}function onStepperClick(bIncrease){var iStep=parseInt(m_oInput.getAttribute("Step")),iValue=this.GetValue();m_oInput.value=bIncrease?iValue+iStep:iValue-iStep,onInputValidate.call(this)}this.GetNode=function(){return m_oNode},this.GetLabel=function(){return m_oLabel},this.GetHint=function(){return m_oHint},this.GetInstructions=function(){return m_oInstructions},this.GetError=function(){return null},this.GetInput=function(){return m_oInput},this.GetContainer=function(){return m_oContainer},this.GetValue=function(){switch(m_iFormat){case 1:case 7:return m_oInitValue!=m_oNode.value&&"null"!=m_oNode.value?m_oNode.value:"";case 0:case 2:return m_oNode.value;case 3:case 6:return m_oInput.checked?1:0;case 4:return m_oInput.previousSibling.value;case 8:return isNaN(m_oInput.value)||""==m_oInput.value?m_oInitValue&&!isNaN(m_oInitValue)&&""!=m_oInitValue?parseInt(m_oInitValue):0:parseInt(m_oInput.value);case 9:return m_oInput.value;case 10:for(var cValue="",iLup=0,aElems=m_oNode.getElementsByTagName("input");iLup<aElems.length;iLup++)if(aElems[iLup].checked){cValue=aElems[iLup].value;break}return cValue;case 11:var cDate=m_oInput.Calendar.Calendar.Calendar.GetFormattedDate(null,"M/D/Y"),cDateFormatted=m_oInput.Calendar.Node.value,oTime=m_oInput.Time.Time.GetTime12(),oDateTime={Date:null,Time:null,DateTime:null,DateFormatted:null};return cDateFormatted&&cDateFormatted.length>0&&(oDateTime.DateFormatted=cDateFormatted),cDate&&cDate.length>0&&(oDateTime.Date=cDate),oTime&&m_oInput.Time.Node.value&&m_oInput.Time.Node.value.length>0&&(oDateTime.Time=oTime.Hour+":"+oTime.Minutes+(1==oTime.AMPM?" PM":" AM")),oDateTime.Date&&oDateTime.Time&&(oDateTime.DateTime=new Date(oDateTime.Date+" "+oDateTime.Time)),oDateTime}},this.SetValue=function(oValue,bUserChanged){switch(bUserChanged&&(m_bPendingChanges=!0),"null"==oValue&&(oValue=m_oInitValue),m_iFormat){case 0:case 1:case 2:case 7:m_oNode.setAttribute("value",oValue),m_oNode.value=oValue;break;case 3:case 6:m_oInput.checked=isNaN(oValue)?oValue:1==parseInt(oValue);break;case 4:var cResult=oValue,cFileName=cResult.substr(cResult.lastIndexOf("/")+1).substr(cResult.lastIndexOf("\\")+1),cPath=cResult,iIndex=cResult.indexOf(g_oSettings.LibraryDir);-1!=iIndex&&(cPath=cResult.substr(iIndex),cPath=g_oSettings.MediaDir+cPath.split("/").join("\\")),m_oInput&&(m_oInput.value=cFileName,m_oInput.previousSibling&&(m_oInput.previousSibling.value=cPath));break;case 5:break;case 8:m_oInput.value=oValue;break;case 9:m_oInput.SetValue(oValue);break;case 10:for(var iLup=0,aElems=m_oNode.getElementsByTagName("input");iLup<aElems.length;iLup++)if(aElems[iLup].removeAttribute("checked"),aElems[iLup].value==oValue){aElems[iLup].checked=!0;break}break;case 11:oValue.Date&&(m_oInput.Calendar.Node.value=oValue.Date,m_oInput.Calendar.Calendar.Calendar.SetDateFromMask(oValue.Date)),oValue.Time&&(m_oInput.Time.Node.value=oValue.Time,m_oInput.Time.Time.SetTimeFromString(oValue.Time,!bUserChanged))}m_bReady=!0},this.UpdateData=function(oParams,aData){var aOptions;if((2==m_iFormat||9==m_iFormat)&&(aData||(aData=[],(aOptions=GetInputOutputParamOptions(m_iParamKey))&&(aData=GetInputElmentData(aOptions,oParams))),2==m_iFormat)){if(m_oNode.options)for(;m_oNode.options.length>0;)m_oNode.remove(0);if(aData)for(var iLup=0;iLup<aData.length;iLup++)m_oNode.appendChild(CreateSelectOption(null,null,null,aData[iLup]))}},this.GetParamKey=function(){return m_iParamKey},this.IsOptional=function(){return m_bOptional},this.IsLiveEditAllowed=function(){return m_bLiveEditAllowed},this.SetSaveNotAllowed=function(bSaveNotAllowed){m_bSaveNotAllowed=bSaveNotAllowed},this.IsSaveNotAllowed=function(){return m_bSaveNotAllowed},this.IsCoreParam=function(){return m_bCoreParam},this.PendingChanges=function(){return m_bPendingChanges},this.IsReady=function(){return m_bReady},this.Reset=function(){switch(m_oNode&&m_oNode.setAttribute&&m_oNode.setAttribute("ready","false"),m_oInput&&m_oInput.setAttribute&&m_oInput.setAttribute("ready","false"),m_bReady=!1,m_bPendingChanges=!1,m_iFormat){case 0:case 1:m_oNode.value="";break;case 2:m_oNode.selectedIndex=0;break;case 3:case 6:m_oInput.checked=!1;break;case 4:m_oInput.value="",m_oInput.previousSibling.value="";break;case 8:m_oInput.value=0}},this.SetReadOnly=function(bReadOnly){switch(m_bEditReadOnly&&(bReadOnly=!0),m_iFormat){case 1:case 2:case 7:bReadOnly?m_oNode.readOnly=bReadOnly:m_oNode.hasAttribute("readOnly")&&m_oNode.removeAttribute("readOnly");break;case 3:case 6:bReadOnly?m_oInput.readOnly=bReadOnly:m_oInput.hasAttribute("readOnly")&&m_oInput.removeAttribute("readOnly");break;case 4:m_oInput.readOnly=bReadOnly,m_oInput.previousSibling.readOnly=bReadOnly;break;case 5:m_oNode.setAttribute("readOnly",bReadOnly);break;case 8:bReadOnly?m_oNode.readOnly=bReadOnly:m_oNode.hasAttribute("readOnly")&&m_oNode.removeAttribute("readOnly");break;case 9:break;case 10:for(var iLup=0,aElems=m_oNode.getElementsByTagName("input");iLup<aElems.length;iLup++)bReadOnly?aElems[iLup].readOnly=bReadOnly:aElems[iLup].hasAttribute("readOnly")&&aElems[iLup].removeAttribute("readOnly")}this.SetDisabled(bReadOnly)},this.SetDisabled=function(bDisabled){switch(m_iFormat){case 1:case 2:case 7:m_oNode.className="AxiomInput"+(bDisabled?" Disabled":""),bDisabled?m_oNode.disabled=bDisabled:m_oNode.hasAttribute("disabled")&&m_oNode.removeAttribute("disabled");break;case 3:case 6:bDisabled?m_oInput.disabled=bDisabled:m_oNode.hasAttribute("disabled")&&m_oInput.removeAttribute("disabled");break;case 4:m_oInput.disabled=bDisabled,m_oInput.previousSibling.disabled=bDisabled;break;case 5:m_oNode.setAttribute("disabled",bDisabled);break;case 8:m_oInput.className="AxiomInput"+(bDisabled?" Disabled":""),bDisabled?m_oInput.disabled=bDisabled:m_oInput.hasAttribute("disabled")&&m_oInput.removeAttribute("disabled");break;case 9:break;case 10:for(var iLup=0,aElems=m_oNode.getElementsByTagName("input");iLup<aElems.length;iLup++)bDisabled?aElems[iLup].disabled=bDisabled:aElems[iLup].hasAttribute("disabled")&&aElems[iLup].removeAttribute("disabled")}},this.GetVisiblity=function(){return m_bVisible},this.SetVisiblity=function(bVisible){m_bVisible=bVisible,m_oNode&&m_oNode.style&&(m_oNode.style.display=bVisible?"":"none"),m_oLabel&&m_oLabel.style&&(m_oLabel.style.display=bVisible?"":"none"),m_oContainer&&m_oContainer.style&&(m_oContainer.style.display=bVisible?"":"none"),m_oHint&&m_oHint.style&&(m_oHint.style.display=bVisible?"":"none"),m_oInstructions&&m_oInstructions.style&&(m_oInstructions.style.display=bVisible?"":"none"),m_oInput&&m_oInput.style&&(m_oInput.style.display=bVisible?"":"none")},this.FinishRender=function(){switch(m_iFormat){case 11:m_oInput&&(m_oInput.Calendar&&m_oInput.Calendar.Calendar&&m_oInput.Calendar.Node&&m_oInput.Calendar.Calendar.Attach(m_oInput.Calendar.Node),m_oInput.Time&&m_oInput.Time.Time&&m_oInput.Time.Node&&m_oInput.Time.Time.Attach(m_oInput.Time.Node))}},this.UpdateDataItem=function(iIndex,oData){if(10==m_iFormat){var oInput=m_oNode.getElementsByTagName("input")[iIndex];oInput&&(oData.disabled?(oInput.readOnly=!0,oInput.disabled=!0):(oInput.hasAttribute("readOnly")&&oInput.removeAttribute("readOnly"),oInput.hasAttribute("disabled")&&oInput.removeAttribute("disabled")))}},function(oParam,aOptions){m_iFormat=oParam.Format,m_bOptional=(oParam.InputFlags&PARAM_OPTIONAL)==PARAM_OPTIONAL,m_bCoreParam=(oParam.InputFlags&PARAM_CORE)==PARAM_CORE,m_bLiveEditAllowed=m_bEditMode&&(oParam.InputFlags&PARAM_LIVE_EDIT_ALLOWED)==PARAM_LIVE_EDIT_ALLOWED,m_bEditReadOnly=m_bEditMode&&(oParam.InputFlags&PARAM_EDIT_READ_ONLY)==PARAM_EDIT_READ_ONLY,m_bSaveNotAllowed=(oParam.InputFlags&PARAM_SAVE_NOT_ALLOWED)==PARAM_SAVE_NOT_ALLOWED,m_iParamKey=oParam.ParamKey,m_oInitValue=oParam.InitValue;var gLup=0;m_oLabel=CreateLabelElement(g_oMessages&&g_oMessages[oParam.FieldLabel]?g_oMessages[oParam.FieldLabel]:oParam.FieldLabel);var cLabel,aData=GetInputElmentData(aOptions,oParam);if(aOptions)for(gLup=0,gLup=0;gLup<aOptions.length;gLup++)"Hint"==aOptions[gLup].Name?m_oHint=CreateStandardTextElement(g_oMessages&&g_oMessages[aOptions[gLup].Value]?g_oMessages[aOptions[gLup].Value]:aOptions[gLup].Value):"Instructions"==aOptions[gLup].Name?m_oInstructions=CreateStandardTextElement(g_oMessages&&g_oMessages[aOptions[gLup].Value]?g_oMessages[aOptions[gLup].Value]:aOptions[gLup].Value):"Restrict"==aOptions[gLup].Name&&(m_oRestrict=aOptions[gLup].Value);switch(m_iFormat){case 0:(m_oNode=document.createElement("input")).id=oParam.Name,m_oNode.name=oParam.Name,m_oNode.setAttribute("type","hidden"),m_oNode.setAttribute("ready","false"),m_oNode.setAttribute("format",m_iFormat),m_oNode.setAttribute("value",oParam.InitValue),m_oLabel=null;break;case 1:(m_oNode=CreateTextInput()).id=oParam.Name,m_oNode.name=oParam.Name,m_oNode.setAttribute("ready","false"),m_oNode.setAttribute("format",m_iFormat),m_oNode.setAttribute("value",oParam.InitValue),m_oNode.addEventListener("input",onInputChange.bind(this)),m_oRestrict&&(m_oNode.addEventListener("keypress",onInputValidate.bind(this)),m_oNode.addEventListener("keyup",onInputValidate.bind(this)),m_oNode.addEventListener("paste",function(evt){if(evt instanceof ClipboardEvent){var oNode=m_oInput||m_oNode,cValue=(evt.clipboardData||window.clipboardData).getData("Text");if(m_oRestrict&&m_oRestrict.length>0&&"0"!=m_oRestrict)for(var oRegex=new RegExp(m_oRestrict),iIndex=0,cTest=cValue.substr(iIndex,1);iIndex<cValue.length;){if(!oRegex.test(cTest))return CancelEvent(evt);iIndex++,cTest=cValue.substr(iIndex,1)}var cAttribute=oNode.getAttribute("InputType");if(cAttribute&&cAttribute.length>0)switch(cAttribute){case"I":case"I+":var iValue=parseInt(cValue);if("0"==cValue.substr(0,1)&&cValue.length>1)return oNode.value=iValue,CancelEvent(evt);var iMax=parseInt(oNode.getAttribute("MaxValue"));if(iMax<iValue)return oNode.value=iMax,CancelEvent(evt);var iMin=parseInt(oNode.getAttribute("MinValue"));if(iMin>iValue)return oNode.value=iMin,CancelEvent(evt)}onInputChange.call(this)}}.bind(this)));break;case 2:(m_oNode=CreateSelect(null,aData)).id=oParam.Name,m_oNode.name=oParam.Name,m_oNode.setAttribute("ready","false"),m_oNode.setAttribute("format",m_iFormat),m_oNode.setAttribute("value",oParam.InitValue),m_oNode.addEventListener("change",onInputChange.bind(this));break;case 3:(m_oNode=document.createElement("label")).className="AxiomFilterToggle",m_oNode.setAttribute("format",m_iFormat),m_oNode.setAttribute("ready","false"),(m_oInput=document.createElement("input")).className="AxiomToggleBox",m_oInput.setAttribute("type","checkbox"),m_oInput.checked=!1,m_oInput.id=oParam.Name,m_oInput.name=oParam.Name,m_oInput.value="",oParam.InitValue&&(m_oInput.value=oParam.InitValue),m_oInput.addEventListener("change",onInputChange.bind(this)),m_oNode.appendChild(m_oInput),oInputContainer=document.createElement("span"),oInputContainer.className="AxiomToggleContainer";var oInputSlider=document.createElement("span");oInputSlider.className="AxiomToggleSlider",oInputContainer.appendChild(oInputSlider),m_oNode.appendChild(oInputContainer),m_oNode.appendChild(CreateStandardTextElement(g_oMessages&&g_oMessages[oParam.FieldLabel]?g_oMessages[oParam.FieldLabel]:oParam.FieldLabel)),m_oLabel=null;break;case 4:(m_oNode=document.createElement("div")).className="AxiomFileBrowserWrapper",m_oNode.setAttribute("format",m_iFormat),m_oNode.setAttribute("ready","false");var oHidden=document.createElement("input");oHidden.className="AxiomInput",oHidden.id=oParam.Name+"hidden",oHidden.name=oParam.Name+"hidden",oHidden.setAttribute("type","hidden"),m_oNode.appendChild(oHidden),(m_oInput=document.createElement("input")).className="AxiomInput",m_oInput.id=oParam.Name,m_oInput.name=oParam.Name,m_oInput.setAttribute("type","text"),m_oInput.value=oParam.InitValue,m_oInput.addEventListener("input",onInputChange.bind(this)),m_oNode.appendChild(m_oInput);var oSpan=document.createElement("span");oSpan.className="AxiomFileBrowserIcon",oSpan.addEventListener("click",oBind.onAxiomFileBroswerClick.bind(oBind,this)),m_oNode.appendChild(oSpan);break;case 5:var oFile=CreateDragDrop();oFile.Container.id=oParam.Name,oFile.Container.setAttribute("format",m_iFormat),oFile.Container.setAttribute("ready","false"),oFile.Container.setAttribute("type","dragdrop"),m_oNode=oFile;break;case 6:(m_oNode=document.createElement("label")).className="AxiomUserSelect",m_oNode.setAttribute("format",m_iFormat),m_oNode.setAttribute("ready","false"),(m_oInput=document.createElement("input")).className="AxiomToggleBox",m_oInput.setAttribute("type","checkbox"),m_oInput.checked=!1,m_oInput.name=oParam.Name,m_oInput.value=oParam.InitValue,m_oInput.addEventListener("change",onInputChange.bind(this)),m_oNode.appendChild(m_oInput);var oCheckBox=document.createElement("span");oCheckBox.className="AxiomCheckbox",m_oNode.appendChild(oCheckBox),m_oNode.appendChild(CreateStandardTextElement(g_oMessages&&g_oMessages[oParam.FieldLabel]?g_oMessages[oParam.FieldLabel]:oParam.FieldLabel)),m_oLabel=null;break;case 7:(m_oNode=CreateTextArea()).id=oParam.Name,m_oNode.name=oParam.Name,m_oNode.setAttribute("ready","false"),m_oNode.setAttribute("format",m_iFormat),m_oNode.setAttribute("value",oParam.InitValue),m_oNode.setAttribute("type","text"),m_oNode.addEventListener("input",onInputChange.bind(this));break;case 8:var oBtn;(m_oNode=document.createElement("div")).className="AxiomInputStepper",m_oNode.setAttribute("type","stepper"),m_oNode.setAttribute("format",m_iFormat),m_oNode.setAttribute("ready","false"),m_oNode.setAttribute("inputname",oParam.Name),(m_oInput=document.createElement("input")).id=oParam.Name,m_oInput.name=oParam.Name,m_oInput.className="AxiomInput",m_oInput.setAttribute("type","text"),m_oInput.setAttribute("format",m_iFormat),m_oInput.setAttribute("ready","false"),m_oInput.setAttribute("value","0"),m_oInput.setAttribute("step","1"),m_oInput.setAttribute("InputType","I+"),m_oInput.readOnly=!0,m_oInput.addEventListener("keypress",onInputValidate.bind(this)),m_oInput.addEventListener("keyup",onInputValidate.bind(this)),m_oInput.addEventListener("input",onInputChange.bind(this)),(oBtn=document.createElement("div")).className="AxiomInputStepperMinuBtn",oBtn.addEventListener("click",onStepperClick.bind(this,!1)),m_oNode.appendChild(oBtn),m_oNode.appendChild(m_oInput),(oBtn=document.createElement("div")).className="AxiomInputStepperAddBtn",oBtn.addEventListener("click",onStepperClick.bind(this,!0)),m_oNode.appendChild(oBtn);break;case 9:m_oContainer=document.createElement("div"),m_oNode=CreateSelect(null,aData),m_oContainer.appendChild(m_oNode),m_oNode.id=oParam.Name,m_oNode.name=oParam.Name,m_oNode.setAttribute("ready","false"),m_oNode.setAttribute("format",m_iFormat),m_oNode.setAttribute("value",oParam.InitValue),m_oInput=new ModernSelect({Select:m_oNode,StylePrefix:"AxiomModernSelect",SearchPlaceholder:g_oMessages.SearchLabel,AllowSearch:!0,AllowDeselect:!1,HideList:!1,OnChange:onInputChange.bind(this),DataAttributes:{value:"{value}",text:"{text}",nodeText:"<span>{text}</span>",selected:"{selected}"}});break;case 10:if((m_oNode=document.createElement("div")).className="AxiomRadioGroup",m_oNode.id=oParam.Name,m_oNode.name=oParam.Name,m_oNode.setAttribute("ready","false"),m_oNode.setAttribute("format",m_iFormat),m_oNode.setAttribute("value",oParam.InitValue),aData)for(var iLup=0;iLup<aData.length;iLup++)m_oNode.appendChild(CreateRadioOption(oParam.Name,aData[iLup],onInputChange.bind(this)));break;case 11:(m_oNode=document.createElement("div")).className="AxiomDateTime DateTimeContainer",m_oNode.id=oParam.Name,m_oInput=CreateDateTimePicker();var oDiv=document.createElement("div");oDiv.appendChild(m_oInput.Calendar.Node),m_oNode.appendChild(oDiv),(oDiv=document.createElement("div")).className="DateTimeVLine",m_oNode.appendChild(oDiv),(oDiv=document.createElement("div")).appendChild(m_oInput.Time.Node),m_oNode.appendChild(oDiv),m_oInput.Calendar.Calendar.SetOnChangeCB(onInputChange.bind(this)),m_oInput.Time.Time.SetSelectCB(onInputChange.bind(this))}if(aOptions)for(gLup=0,gLup=0;gLup<aOptions.length;gLup++)"FieldName"==aOptions[gLup].Name?(cLabel=g_oMessages[aOptions[gLup].Value]?g_oMessages[aOptions[gLup].Value]:aOptions[gLup].Value,m_oInput&&m_oInput.setAttribute(aOptions[gLup].Name,cLabel),m_oNode&&m_oNode.setAttribute(aOptions[gLup].Name,cLabel)):"Hint"!=aOptions[gLup].Name&&"Instructions"!=aOptions[gLup].Name&&"Restrict"!=aOptions[gLup].Name&&"DataFunction"!=aOptions[gLup].Name&&"DataVar"!=aOptions[gLup].Name&&"KeyPressUpCall"!=aOptions[gLup].Name&&"PasteCall"!=aOptions[gLup].Name&&(m_oInput&&m_oInput.setAttribute(aOptions[gLup].Name,aOptions[gLup].Value),m_oNode&&m_oNode.setAttribute(aOptions[gLup].Name,aOptions[gLup].Value));m_bEditReadOnly&&this.SetReadOnly.call(this)}.call(this,oParam,aOptions)}function CreateFormElement(oFormObj,fnChangeCall,cValue){var cLabel,iFormat=oFormObj.Format,cName=oFormObj.Name,cClass=!1;if(oFormObj.Options)oFormObj.Options.Label&&(cLabel=oFormObj.Options.Label),cClass="AxiomInput"+(oFormObj.Options.disabled?" Disabled":"");else{var iMaxLen,bReadOnly=!!oFormObj.ReadOnly,bDisabled=!!oFormObj.Disabled,bOptional=!!oFormObj.Optional,bAdditionalParam=!!oFormObj.AdditionalParam;oFormObj.Label&&(cLabel=oFormObj.Label),cClass="AxiomInput"+(oFormObj.Disabled?" Disabled":"")}var cErrorLabel,oElem,oBtn,oInputContainer,oInput={Label:null,Node:null,Hint:null,Instructions:null,Error:null};switch(cLabel&&(oInput.Label=CreateLabelElement(g_oMessages[cLabel]?g_oMessages[cLabel]:cLabel)),oFormObj.Options&&(oFormObj.Options.Hint&&(oInput.Hint=CreateStandardTextElement(g_oMessages[oFormObj.Options.Hint]?g_oMessages[oFormObj.Options.Hint]:oFormObj.Options.Hint)),oFormObj.Options.Instructions&&(oInput.Instructions=CreateStandardTextElement(g_oMessages[oFormObj.Options.Instructions]?g_oMessages[oFormObj.Options.Instructions]:oFormObj.Options.Instructions)),oFormObj.Options.Error&&(cErrorLabel=g_oMessages[oFormObj.Options.Error]?g_oMessages[oFormObj.Options.Error]:oFormObj.Options.Error)),iFormat){case 0:if(oInput.Node=document.createElement("input"),oInput.Node.className="AxiomInput",oInput.Node.id=cName,oInput.Node.name=cName,oInput.Node.setAttribute("type","hidden"),oInput.Node.setAttribute("format",iFormat),oInput.Node.setAttribute("ready","false"),cValue?oInput.Node.setAttribute("value",cValue):oInput.Node.setAttribute("value",""),oFormObj.Options)for(var cOption in oFormObj.Options)oInput.Node.setAttribute(cOption,oFormObj.Options[cOption]);cErrorLabel&&oInput.Node.setAttribute("FieldName",cErrorLabel);break;case 1:if(oInput.Node=CreateTextInput(oFormObj.Options),oInput.Node.className=cClass,oInput.Node.id=cName,oInput.Node.name=cName,oInput.Node.setAttribute("format",iFormat),oInput.Node.setAttribute("ready","false"),cValue?oInput.Node.setAttribute("value",cValue):oInput.Node.setAttribute("value",""),oFormObj.Options){if(oFormObj.Options)for(var cOption in oFormObj.Options)("required"!=cOption||"required"==cOption&&1==oFormObj.Options[cOption])&&oInput.Node.setAttribute(cOption,oFormObj.Options[cOption])}else bReadOnly&&(oInput.Node.readOnly=bReadOnly),bDisabled&&(oInput.Node.disabled=bDisabled),oInput.Node.setAttribute("required",!bOptional),oInput.Node.setAttribute("restrict",oFormObj.Restrict),(iMaxLen=oFormObj.MaxLen)>0&&oInput.Node.setAttribute("maxlength",iMaxLen),oInput.Node.setAttribute("Param",bAdditionalParam);cErrorLabel&&oInput.Node.setAttribute("FieldName",cErrorLabel),oFormObj.Options&&(oFormObj.Options.restrict||oFormObj.Options.restrict2)&&oInput.Node.addEventListener("keypress",ValidateInput.bind(this,oInput.Node)),oFormObj.Options&&oFormObj.Options.Validate&&!oFormObj.Options.restrict&&!oFormObj.Options.restrict2||oInput.Node.addEventListener("keyup",ValidateInput.bind(this,oInput.Node)),fnChangeCall&&oInput.Node.addEventListener("input",fnChangeCall.bind(this,oInput.Node,oInput.Node));break;case 2:if(oInput.Node=CreateSelect(oFormObj.Options,oFormObj.ListData),oInput.Node.className=cClass,oInput.Node.id=cName,oInput.Node.name=cName,oInput.Node.setAttribute("format",iFormat),oInput.Node.setAttribute("ready","false"),oFormObj.Options){if(oFormObj.Options)for(var cOption in oFormObj.Options)("required"!=cOption||"required"==cOption&&1==oFormObj.Options[cOption])&&oInput.Node.setAttribute(cOption,oFormObj.Options[cOption])}else bReadOnly&&(oInput.Node.readOnly=bReadOnly),bDisabled&&(oInput.Node.disabled=bDisabled),oInput.Node.setAttribute("required",!bOptional),oInput.Node.setAttribute("Param",bAdditionalParam);cErrorLabel&&oInput.Node.setAttribute("FieldName",cErrorLabel),fnChangeCall&&oInput.Node.addEventListener("change",fnChangeCall.bind(this,oInput.Node,oInput.Node));break;case 3:if(oInput.Node=document.createElement("label"),oInput.Node.className="AxiomFilterToggle",oInput.Node.setAttribute("format",iFormat),oInput.Node.setAttribute("ready","false"),(oElem=document.createElement("input")).className="AxiomToggleBox",oElem.setAttribute("type","checkbox"),oElem.checked=!1,oElem.id=cName,oElem.name=cName,oElem.value="",cValue&&(oElem.value=cValue),oFormObj.Options)for(var cOption in oFormObj.Options)("required"!=cOption||"required"==cOption&&1==oFormObj.Options[cOption])&&(oInput.Node.setAttribute(cOption,oFormObj.Options[cOption]),oElem.setAttribute(cOption,oFormObj.Options[cOption]));else oInput.Node.setAttribute("required",!bOptional),oInput.Node.setAttribute("Param",bAdditionalParam),bReadOnly&&(oElem.readOnly=bReadOnly),bDisabled&&(oElem.disabled=bDisabled);oFormObj.Options&&oFormObj.Options.InputType&&ConfigureInputField&&ConfigureInputField(oElem),cErrorLabel&&oElem.setAttribute("FieldName",cErrorLabel),fnChangeCall&&oElem.addEventListener("change",fnChangeCall.bind(this,oInput.Node,oElem)),oInput.Node.appendChild(oElem),(oInputContainer=document.createElement("span")).className="AxiomToggleContainer";var oInputSlider=document.createElement("span");oInputSlider.className="AxiomToggleSlider",oInputContainer.appendChild(oInputSlider),oInput.Node.appendChild(oInputContainer),oInputLabel=CreateStandardTextElement(g_oMessages[cLabel]?g_oMessages[cLabel]:cLabel),oInput.Node.appendChild(oInputLabel),oInput.Label=null;break;case 4:oInput.Node=document.createElement("div"),oInput.Node.className="AxiomFileBrowserWrapper",oInput.Node.setAttribute("format",iFormat),oInput.Node.setAttribute("ready","false");var oHidden=document.createElement("input");if(oHidden.className="AxiomInput",oHidden.id=cName+"hidden",oHidden.name=cName+"hidden",oHidden.setAttribute("type","hidden"),(oElem=document.createElement("input")).className="AxiomInput",oElem.id=cName,oElem.name=cName,oElem.setAttribute("type","text"),oElem.value="",cValue&&(oElem.value=cValue),oFormObj.Options)for(var cOption in oFormObj.Options)("required"!=cOption||"required"==cOption&&1==oFormObj.Options[cOption])&&(oElem.setAttribute(cOption,oFormObj.Options[cOption]),oHidden.setAttribute(cOption,oFormObj.Options[cOption]),oInput.Node.setAttribute(cOption,oFormObj.Options[cOption]));else"required"!=cOption||bOptional||oInput.Node.setAttribute("required",!bOptional),oInput.Node.setAttribute("Param",bAdditionalParam),cValue&&(oHidden.value=cValue),bReadOnly&&(oElem.readOnly=bReadOnly),bDisabled&&(oElem.disabled=bDisabled),(iMaxLen=oFormObj.MaxLen)>0&&oElem.setAttribute("maxlength",iMaxLen);oInput.Node.appendChild(oHidden),oFormObj.Options&&oFormObj.Options.InputType&&ConfigureInputField&&ConfigureInputField(oElem),cErrorLabel&&oElem.setAttribute("FieldName",cErrorLabel),fnChangeCall&&oElem.addEventListener("input",fnChangeCall.bind(this,oInput.Node,oElem)),oInput.Node.appendChild(oElem);var oSpan=document.createElement("span");oSpan.className="AxiomFileBrowserIcon",oSpan.addEventListener("click",this.onAxiomFileBroswerClick.bind(this,oInput.Node,oElem)),oInput.Node.appendChild(oSpan);break;case 5:var oFile=CreateDragDrop(oFormObj.Options);if(oFile.Container.id=cName,oFile.Container.setAttribute("format",iFormat),oFile.Container.setAttribute("ready","false"),oFile.Container.setAttribute("type","dragdrop"),oFormObj.Options){if(oFormObj.Options)for(var cOption in oFormObj.Options)("required"!=cOption||"required"==cOption&&1==oFormObj.Options[cOption])&&oFile.Container.setAttribute(cOption,oFormObj.Options[cOption])}else oFile.Container.setAttribute("readOnly",bReadOnly),oFile.Container.setAttribute("disabled",bDisabled),oFile.Container.setAttribute("required",!bOptional),oFile.Container.setAttribute("Param",bAdditionalParam);oInput.Node=oFile;break;case 6:if(oInput.Node=document.createElement("label"),oInput.Node.className="AxiomUserSelect",oInput.Node.setAttribute("format",iFormat),oInput.Node.setAttribute("ready","false"),(oElem=document.createElement("input")).className="AxiomToggleBox",oElem.setAttribute("type","checkbox"),oElem.checked=!1,oElem.name=cName,oElem.value=cValue,oFormObj.Options)for(var cOption in oFormObj.Options)oElem.setAttribute(cOption,oFormObj.Options[cOption]),oInput.Node.setAttribute(cOption,oFormObj.Options[cOption]);else oInput.Node.setAttribute("required",!bOptional),oInput.Node.setAttribute("Param",bAdditionalParam),bReadOnly&&(oElem.readOnly=bReadOnly),bDisabled&&(oElem.disabled=bDisabled);cErrorLabel&&oElem.setAttribute("FieldName",cErrorLabel),fnChangeCall&&oElem.addEventListener("change",fnChangeCall.bind(this,oInput.Node,oElem)),oInput.Node.appendChild(oElem);var oCheckBox=document.createElement("span");oCheckBox.className="AxiomCheckbox",oInput.Node.appendChild(oCheckBox),oInputLabel=CreateStandardTextElement(g_oMessages[cLabel]?g_oMessages[cLabel]:cLabel),oInput.Node.appendChild(oInputLabel),oInput.Label=null;break;case 7:if(oInput.Node=CreateTextArea(oFormObj.Options),oInput.Node.id=cName,oInput.Node.name=cName,oInput.Node.setAttribute("format",iFormat),oInput.Node.setAttribute("ready","false"),oInput.Node.setAttribute("type","text"),oInput.Node.value=cValue||"",oFormObj.Options){if(oFormObj.Options)for(var cOption in oFormObj.Options)("required"!=cOption||"required"==cOption&&1==oFormObj.Options[cOption])&&oInput.Node.setAttribute(cOption,oFormObj.Options[cOption])}else bReadOnly&&(oInput.Node.readOnly=bReadOnly),bDisabled&&(oInput.Node.disabled=bDisabled),oInput.Node.setAttribute("required",!bOptional),oInput.Node.setAttribute("restrict",oFormObj.Restrict),(iMaxLen=oFormObj.MaxLen)>0&&oInput.Node.setAttribute("maxlength",iMaxLen),oInput.Node.setAttribute("Param",bAdditionalParam);cErrorLabel&&oInput.Node.setAttribute("FieldName",cErrorLabel),oFormObj.Options&&oFormObj.Options.restrict&&oInput.Node.addEventListener("keypress",ValidateInput.bind(this,oInput.Node)),oFormObj.Options&&oFormObj.Options.Validate&&!oFormObj.Options.restrict||oInput.Node.addEventListener("keyup",ValidateInput.bind(this,oInput.Node)),fnChangeCall&&oInput.Node.addEventListener("input",fnChangeCall.bind(this,oInput.Node,oInput.Node));break;case 8:if(oInput.Node=document.createElement("div"),oInput.Node.className="AxiomInputStepper"+(-1!=cClass.indexOf("Disabled")?" Disabled":""),oInput.Node.setAttribute("type","stepper"),oInput.Node.setAttribute("format",iFormat),oInput.Node.setAttribute("ready","false"),oInput.Node.setAttribute("inputname",cName),oFormObj.Options){for(var cOption in(oElem=document.createElement("input")).className=cClass,oElem.id=cName,oElem.name=cName,oElem.setAttribute("type","text"),oElem.setAttribute("format",iFormat),oElem.setAttribute("ready","false"),cValue?oElem.setAttribute("value",cValue):oElem.setAttribute("value","0"),oFormObj.Options)("required"!=cOption||"required"==cOption&&1==oFormObj.Options[cOption])&&(oInput.Node.setAttribute(cOption,oFormObj.Options[cOption]),oElem.setAttribute(cOption,oFormObj.Options[cOption]));ConfigureInputField&&(oElem.setAttribute("InputType","I"),ConfigureInputField(oElem)),cErrorLabel&&oElem.setAttribute("FieldName",cErrorLabel),oFormObj.Options&&oFormObj.Options.restrict&&oElem.addEventListener("keypress",ValidateInput.bind(this,oElem)),oFormObj.Options&&oFormObj.Options.Validate&&!oFormObj.Options.restrict||oElem.addEventListener("keyup",ValidateInput.bind(this,oElem)),fnChangeCall&&oElem.addEventListener("input",fnChangeCall.bind(this,oInput.Node,oElem)),(oBtn=document.createElement("div")).className="AxiomInputStepperMinuBtn"+(-1!=cClass.indexOf("Disabled")?" Disabled":""),oBtn.addEventListener("click",AxiomStepperClick.bind(this,!1,oInput.Node,oElem,fnChangeCall)),oInput.Node.appendChild(oBtn),oInput.Node.appendChild(oElem),(oBtn=document.createElement("div")).className="AxiomInputStepperAddBtn"+(-1!=cClass.indexOf("Disabled")?" Disabled":""),oBtn.addEventListener("click",AxiomStepperClick.bind(this,!0,oInput.Node,oElem,fnChangeCall)),oInput.Node.appendChild(oBtn)}}return oInput}function AxiomStepperClick(bIncrease,oNode,oElem,fnChangeCall){var iStep=parseInt(oElem.getAttribute("Step"));oElem.value=bIncrease?parseInt(oElem.value)+iStep:parseInt(oElem.value)-iStep;var oCall=ValidateInput.bind(this,oElem);oCall(),fnChangeCall&&(oCall=fnChangeCall.bind(this,oNode,oElem))()}function ResetFormElementValue(oElem){if(oElem){var iFormat=parseInt(oElem.getAttribute("format"));switch(oElem.setAttribute("ready","false"),iFormat){case 0:case 1:oElem.value="";break;case 2:oElem.selectedIndex=0;break;case 3:case 6:oElem.firstChild&&(oElem.firstChild.checked=!1);break;case 4:oElem.firstChild&&(oElem.firstChild.value="",oElem.firstChild.nextSibling&&(oElem.firstChild.nextSibling.value=""));break;case 8:var oInput=FindChildElem(oElem,oElem.getAttribute("inputname"));oInput.value=0,oInput.setAttribute("ready","false")}}}function GetFormElementValue(oElem){switch(parseInt(oElem.getAttribute("format"))){case 0:case 1:case 2:case 7:return oElem.value;case 3:case 6:if(oElem.firstChild)return oElem.firstChild.checked?1:0;break;case 4:if(oElem.firstChild)return oElem.firstChild.value;break;case 8:return FindChildElem(oElem,oElem.getAttribute("inputname")).value}return""}function SetFormElementValue(oElem,oValue){switch(parseInt(oElem.getAttribute("format"))){case 0:case 1:case 2:oElem.value=oValue;break;case 3:case 6:oElem.firstChild&&(oElem.firstChild.checked=oValue);break;case 4:var cResult=oValue,cFileName=cResult.substr(cResult.lastIndexOf("/")+1).substr(cResult.lastIndexOf("\\")+1),cPath=cResult,iIndex=cResult.indexOf(g_oSettings.LibraryDir);-1!=iIndex&&(cPath=cResult.substr(iIndex),cPath=g_oSettings.MediaDir+cPath.split("/").join("\\")),oElem.firstChild&&(oElem.firstChild.value=cPath,oElem.firstChild.nextSibling&&(oElem.firstChild.nextSibling.value=cFileName));break;case 8:FindChildElem(oElem,oElem.getAttribute("inputname")).value=oValue}return""}function SetFormElementReadOnly(oElem,bReadOnly){switch(parseInt(oElem.getAttribute("format"))){case 1:case 2:case 7:oElem.className="AxiomInput"+(bReadOnly?" Disabled":""),bReadOnly?(oElem.readOnly=bReadOnly,oElem.disabled=bReadOnly):(oElem.removeAttribute("readOnly"),oElem.removeAttribute("disabled"));break;case 3:case 6:bReadOnly?(oElem.firstChild.readOnly=bReadOnly,oElem.firstChild.disabled=bReadOnly):(oElem.firstChild.removeAttribute("readOnly"),oElem.firstChild.removeAttribute("disabled"));break;case 4:oElem.firstChild.readOnly=bReadOnly,oElem.firstChild.disabled=bReadOnly,oElem.firstChild.nextSibling.readOnly=bReadOnly,oElem.firstChild.nextSibling.disabled=bReadOnly;break;case 5:oElem.setAttribute("readOnly",bReadOnly),oElem.setAttribute("disabled",bReadOnly);break;case 8:oElem.className="AxiomInput"+(bReadOnly?" Disabled":""),bReadOnly?(oElem.readOnly=bReadOnly,oElem.disabled=bReadOnly):(oElem.removeAttribute("readOnly"),oElem.removeAttribute("disabled"));var oInput=FindChildElem(oElem,oElem.getAttribute("inputname"));oInput.className="AxiomInput"+(bReadOnly?" Disabled":""),bReadOnly?(oInput.readOnly=bReadOnly,oInput.disabled=bReadOnly):(oInput.removeAttribute("readOnly"),oInput.removeAttribute("disabled"))}}function ClearInputErrors(oContainer){if(oContainer){for(var oParent,aErrors=oContainer.getElementsByClassName("AxiomErrorText"),iLup=0;iLup<aErrors.length;iLup)(oParent=aErrors[iLup].parentNode)&&oParent.removeChild(aErrors[iLup]);aErrors=oContainer.getElementsByClassName("AxiomError");for(iLup=0;iLup<aErrors.length;iLup)RemoveClass(aErrors[iLup],"AxiomError")}}function DisplayInputError(oInput,cErrorMessage){var oErrorText=document.createElement("span");oErrorText.className="AxiomErrorText",oErrorText.appendChild(document.createTextNode(cErrorMessage)),AddClass(oInput,"AxiomError");var oParentNode=oInput.parentNode;"AxiomConsoleOptionWithHint"==oParentNode.className&&(oInput=oParentNode),oInput.nextSibling?oInput.parentNode.insertBefore(oErrorText,oInput.nextSibling):oInput.parentNode.appendChild(oErrorText)}function ValidateInputs(oContainer){for(var oInput,aInputs=oContainer.children?oContainer.children:oContainer.elements?oContainer.elements:oContainer instanceof Array?oContainer:[],bRetVal=!0,iLup=0;iLup<aInputs.length;iLup++)(oInput=aInputs[iLup]).getAttribute("inputtype")&&oInput.getAttribute("validate")&&(ValidateInputField(oInput)||(DisplayInputError(oInput,g_cLastValidationError),bRetVal=!1));return bRetVal}function ValidateInputErrorDisplay(oNode,oErrorNode,cErrorMessage){oNode&&AddClass(oNode,"AxiomError"),oErrorNode&&-1!=oErrorNode.className.indexOf("AxiomErrorText")&&(oErrorNode.innerText=cErrorMessage,RemoveClass(oErrorNode,"Hide"))}function ValidateInput(oNode,evt){evt||window.event,oNode.getAttribute("ErrorNode"),oNode.getAttribute("ErrorLabel");var cValue,oKey,cAttribute=oNode.getAttribute("restrict");if(cAttribute&&cAttribute.length>0&&"0"!=cAttribute&&(8!=(oKey=evt.keyCode||evt.which)&&27!=oKey&&46!=oKey&&37!=oKey&&39!=oKey&&(oKey=String.fromCharCode(oKey),!new RegExp(cAttribute).test(oKey))))return CancelEvent(evt);if((cAttribute=oNode.getAttribute("restrict2"))&&cAttribute.length>0&&"0"!=cAttribute&&(8!=(oKey=evt.keyCode||evt.which)&&27!=oKey&&46!=oKey&&37!=oKey&&39!=oKey&&(oKey=String.fromCharCode(oKey),new RegExp(cAttribute).test(oKey))))return CancelEvent(evt);if((cAttribute=oNode.getAttribute("InputType"))&&cAttribute.length>0)switch(cValue=oNode.value,cAttribute){case"I":case"I+":if(!cValue||isNaN(cValue))return oNode.value=oNode.getAttribute("DefaultValue")||""==oNode.getAttribute("DefaultValue")?oNode.getAttribute("DefaultValue"):0,CancelEvent(evt);var iValue=parseInt(cValue);if("0"==cValue.substr(0,1)&&cValue.length>1)return oNode.value=iValue,CancelEvent(evt);var iMax=parseInt(oNode.getAttribute("MaxValue"));if(iMax<iValue)return oNode.value=iMax,CancelEvent(evt);var iMin=parseInt(oNode.getAttribute("MinValue"));if(iMin>iValue)return oNode.value=iMin,CancelEvent(evt)}}function RemoveAllChildren(oNode){for(;oNode.firstChild;)oNode.removeChild(oNode.firstChild)}var g_oFileBrowserDlg=null;function DoFileBrowser(fnCallBack,iSource,iInstanceID,iContextID,sTypeFilter,iMode,iShowKey,iLocaleID,bFullPath){var cURL="Server.nxp?LASCmd=AI:"+iInstanceID+";F:SF!16500";cURL+="&Features=1",cURL+=1==iMode?"&Mode=1&ModeKey="+iSource+"&Source=10"+iSource:"&Source="+iSource,iShowKey>0&&(cURL+="&ShowKey="+iShowKey),iLocaleID&&(cURL+="&LangLocaleID="+iLocaleID),sTypeFilter&&""!=sTypeFilter&&"NULL"!=sTypeFilter||(sTypeFilter="*.*"),!0!==bFullPath&&(cURL+="&FullPath=0"),cURL+="&TypeFilter="+sTypeFilter+"&ContextID="+iContextID+"&Studio=1",g_oFileBrowserCallBack=fnCallBack;var cParams=GenerateCenteredWindowLeftTop(920,600)+",width=920,height=600,location=no,menubar=no,resizable=yes,scrollbars=no,statusbar=no,titlebar=no,toolbar=no";return window.open(cURL,"FileBrowserWnd",cParams)}function FileBrowserDefaultCallback(sResult){try{g_oFileBrowserCallBack(sResult)}catch(e){}g_oFileBrowserCallBack=null,g_oFileBrowserDlg=null}function CreateCopyButton(){var oDiv=document.createElement("div");return oDiv.className="AxiomCopyButton",oDiv}function ClipboardCopyManager(){var m_oStatusElem=null,m_oStatusText=null,m_oLabels={CopiedLabel:"Copied",CopyFailedLabel:"Copy failed..."};function onShowStatus(evt){var oSrcElem=evt.target?evt.target:evt.currentTarget,cCustomText=oSrcElem.getAttribute("data-text");if(oSrcElem){m_oStatusElem.setAttribute("data-active",1);var oRectObj=oSrcElem.getBoundingClientRect(),iLeft=oRectObj.left,iWindowWidth=GetWindowSize().width;iWindowWidth&&iLeft+m_oStatusElem.offsetWidth>iWindowWidth?(iLeft-=iLeft+m_oStatusElem.offsetWidth-iWindowWidth,SetRule("AxiomUI.css",".AxiomPrimeCopyContentNotificationContainer:after","left","calc(100% - "+(iWindowWidth-oRectObj.left-7)+"px)")):SetRule("AxiomUI.css",".AxiomPrimeCopyContentNotificationContainer:after","left","7px"),m_oStatusElem.style.left=iLeft+"px",m_oStatusElem.style.top=oRectObj.top-30+"px",cCustomText&&this.UpdateStatusText.call(this,cCustomText)}}function onHideStatus(evt){m_oStatusElem.removeAttribute("data-active"),this.UpdateStatusText.call(this,m_oLabels.CopiedLabel)}this.UpdateLabels=function(cCopiedLabel,cCopyFailedLabel){m_oLabels.CopiedLabel=cCopiedLabel,m_oLabels.CopyFailedLabel=cCopyFailedLabel},this.AttachCopyHandler=function(oButton,oTargetElem){oButton&&oTargetElem&&(oButton.addEventListener("click",function(oTargetElem,evt){evt.target?evt.target:evt.currentTarget;var oSelection=window.getSelection();oSelection.removeAllRanges();var oRange=document.createRange();oRange.selectNode(oTargetElem),oSelection.addRange(oRange);var cLabel=m_oLabels.CopiedLabel;document.execCommand("copy")||(cLabel=m_oLabels.CopyFailedLabel);this.UpdateStatusText.call(this,cLabel),oSelection.removeAllRanges(),evt&&evt.stopPropagation&&evt.stopPropagation()}.bind(this,oTargetElem)),oButton.addEventListener("mouseover",onShowStatus.bind(this)),oButton.addEventListener("mouseout",onHideStatus.bind(this)))},this.AttachWithCustomCopyFunction=function(oButton,fn){oButton.addEventListener("click",fn),oButton.addEventListener("mouseover",onShowStatus.bind(this)),oButton.addEventListener("mouseout",onHideStatus.bind(this))},this.UpdateStatusText=function(cText){cText&&cText.replace(" ","").length>0&&(m_oStatusElem.innerHTML=cText)},function(){(m_oStatusElem=document.createElement("div")).className="AxiomPrimeCopyContentNotificationContainer",(m_oStatusText=document.createElement("div")).className="AxiomPrimeCopyContentNotification",m_oStatusText.innerHTML=m_oLabels.CopiedLabel,m_oStatusElem.appendChild(m_oStatusText),document.body.appendChild(m_oStatusElem)}.call(this)}function GetInputDetails(iKey,fnComplete){if(iKey&&fnComplete){var cURL=g_oSettings.LASFileName+"?LASCmd=AI:"+g_oSettings.InstanceID+";F:LBSEXPORT!JSON&SQLID=18510&IncludeEmptyResultSets=1&EventKey="+g_oSettings.EventKey+"&AxiomWebcastInputKey="+iKey;new AxiomHTTP(cURL,fnComplete,!0)}}
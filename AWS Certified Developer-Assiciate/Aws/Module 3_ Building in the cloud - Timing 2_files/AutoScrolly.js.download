function AutoScrolly(){var m_oScrolly,m_aoQueue,m_iTimeout,m_bDraining,m_oPreview,_this=this,DEFAULT_ROW_HEIGHT=100,DEFAULT_AUTO_CHILDREN_SIZE=!0,m_iQueueDrainSize=4e3;function drainQueue(){if(m_iTimeout=0,_this.element.parentNode){var iLup;for(iLup=0;iLup<m_aoQueue.length&&iLup<m_iQueueDrainSize;iLup++)m_oPreview.appendChild(m_aoQueue[iLup]);if(iLup)m_bDraining=!0,m_aoQueue.splice(0,iLup),RequestAnimationFrame()(drainQueueHelper);else m_bDraining=!1,m_oScrolly.redraw(),m_oScrolly.element.removeChild(m_oPreview)}else m_bDraining=!1}function drainQueueHelper(){for(var iHeight,iLup=0;iLup<m_oPreview.children.length;iLup++)DEFAULT_AUTO_CHILDREN_SIZE?m_oScrolly.addChild(m_oPreview.children[iLup],DEFAULT_ROW_HEIGHT):(iHeight=m_oPreview.children[iLup].offsetHeight,m_oScrolly.addChild(m_oPreview.children[iLup],iHeight));m_oPreview.innerHTML="",drainQueue()}_this.appendChild=function(oElem){DEFAULT_AUTO_CHILDREN_SIZE?m_oScrolly.appendChild(oElem,DEFAULT_ROW_HEIGHT):(m_oPreview.parentNode||m_oScrolly.element.appendChild(m_oPreview),m_iTimeout&&clearTimeout(m_iTimeout),m_aoQueue.push(oElem),m_bDraining||(m_iTimeout=setTimeout(drainQueue,10)))},_this.appendChildren=function(aoElems){if(DEFAULT_AUTO_CHILDREN_SIZE){for(var iLup=0;iLup<aoElems.length;iLup++)m_oScrolly.addChild(aoElems[iLup],DEFAULT_ROW_HEIGHT);m_oScrolly.redraw()}else m_oPreview.parentNode||m_oScrolly.element.appendChild(m_oPreview),m_aoQueue=m_aoQueue.concat(aoElems),m_bDraining||(m_iTimeout=setTimeout(drainQueue,10))},_this.indexOf=function(oElem){return m_oScrolly.indexOf(oElem)},_this.removeChild=function(oElem){m_oScrolly.removeChild(oElem)},_this.removeAllChildren=function(){m_oScrolly.removeAllChildren(),m_iTimeout&&(clearTimeout(m_iTimeout),m_iTimeout=0),m_aoQueue=[]},_this.refreshHeight=function(data){var iIndex;(iIndex="number"==typeof data?data:m_oScrolly.indexOf(data))>-1&&m_oScrolly.updateHeightAt(iIndex,m_oScrolly.defaultRowHeight)},_this.scrollIntoView=function(oElem){m_oScrolly.scrollIntoView(oElem)},_this.scrollTo=function(iIndex){m_oScrolly.scrollTo(iIndex)},_this.setPageSize=function(oSize){var iScrollTop=m_oScrolly.element.scrollTop;m_oScrolly.setPageSize(oSize),m_oScrolly.redraw(iScrollTop)},Object.defineProperty(this,"defaultRowHeight",{get:function(){return m_oScrolly.defaultRowHeight},set:function(val){m_oScrolly.defaultRowHeight=val}}),Object.defineProperty(this,"visibleCount",{get:function(){return m_oScrolly.visibleCount},set:function(val){m_oScrolly.visibleCount=val}}),Object.defineProperty(this,"queueDrainSize",{get:function(){return m_iQueueDrainSize},set:function(val){m_iQueueDrainSize=val}}),Object.defineProperty(this,"element",{get:function(){return m_oScrolly.element}}),m_aoQueue=[],m_bDraining=!1,(m_oScrolly=new Scrolly).loadMode=Scrolly.LoadModes.INSTANT,m_oScrolly.defaultRowHeight=DEFAULT_ROW_HEIGHT,m_oScrolly.autoChildrenSize=DEFAULT_AUTO_CHILDREN_SIZE,(m_oPreview=document.createElement("div")).style.visibility="hidden"}
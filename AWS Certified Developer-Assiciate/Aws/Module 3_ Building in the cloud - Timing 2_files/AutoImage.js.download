var SCALE_ACTUAL=1,SCALE_CENTERH=2,SCALE_CENTERV=4;function Rect(iWidth,iHeight){var _this=this;this.iWidth=iWidth,this.iHeight=iHeight,this.Scale=function(iWidth,iHeight){return iWidth?new Rect(iWidth,iWidth*_this.iHeight/_this.iWidth):iHeight?new Rect(iHeight*_this.iWidth/_this.iHeight,iHeight):new Rect(_this.iWidth,_this.iHeight)}}function AddEventHandler(oElem,cEvent,fnHandler){oElem.addEventListener?oElem.addEventListener(cEvent,fnHandler,!1):oElem.attachEvent&&oElem.attachEvent("on"+cEvent,fnHandler)}function GetBodySize(){var iWidth=0,iHeight=0;return document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(iWidth=document.documentElement.clientWidth,iHeight=document.documentElement.clientHeight):"number"==typeof window.innerWidth?(iWidth=window.innerWidth,iHeight=window.innerHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(iWidth=document.body.clientWidth,iHeight=document.body.clientHeight),{width:iWidth,height:iHeight}}function AutoImage(cSrc,oContainer,oImg,bNoResizeHandler,fnOnload){var _this=this;this.cSrc=cSrc,this.oContainer=oContainer||document.body,this.oImg=oImg||document.createElement("img"),this.oImgRect=new Rect(0,0),this.iDefaultWidth=105,this.iDefaultHeight=105,this.iScaling=1*this.oImg.getAttribute("scaling"),this.iScaling&SCALE_CENTERH&&(oContainer.style.textAlign="center"),this.fnImageLoad=function(oEvent){_this.oImgRect.iWidth=_this.oImage.width,_this.oImgRect.iHeight=_this.oImage.height,_this.fnResize(!bNoResizeHandler),_this.oImg.setAttribute("src",_this.cSrc),_this.oImg.parentNode||_this.oContainer.appendChild(_this.oImg),"function"==typeof fnOnload&&fnOnload(oEvent),bNoResizeHandler||AddEventHandler(window,"resize",_this.fnResize)},this.fnResize=function(evt){var oSize;if(("function"==typeof top.window.IsIPhone&&top.window.IsIPhone()||"function"==typeof top.window.IsIPad&&top.window.IsIPad())&&"function"==typeof top.window.GetIOSOS&&parseInt(top.window.GetIOSOS())<=6){if(oSize=evt?GetBodySize():{width:_this.oContainer.offsetWidth?_this.oContainer.offsetWidth:_this.iDefaultWidth,height:_this.oContainer.offsetHeight?_this.oContainer.offsetHeight:_this.iDefaultHeight},_this.oLastSize&&_this.oLastSize.height-oSize.height<=5&&_this.oLastSize.width-oSize.width<=5)return void(_this.oImg.style.display="");_this.oImg.style.display="none"}else if(_this.oImg.style.display="none",oSize=evt?GetBodySize():{width:_this.oContainer.offsetWidth?_this.oContainer.offsetWidth:_this.iDefaultWidth,height:_this.oContainer.offsetHeight?_this.oContainer.offsetHeight:_this.iDefaultHeight},_this.oLastSize&&_this.oLastSize.height==oSize.height&&_this.oLastSize.width==oSize.width)return void(_this.oImg.style.display="");_this.oLastSize=oSize;var oDest=_this.oImgRect.Scale(oSize.width,null);oDest.iHeight>oSize.height?(oDest=_this.oImgRect.Scale(null,oSize.height),_this.oImg.setAttribute("width",oDest.iWidth),_this.oImg.removeAttribute("height")):(_this.oImg.removeAttribute("width"),_this.oImg.setAttribute("height",oDest.iHeight)),_this.oImg.style.display="",delete oDest},this.fnContainerResize=function(oNode,iWidth,iHeight){if(_this.iScaling&SCALE_ACTUAL&&iWidth>_this.oImgRect.iWidth&&iHeight>_this.oImgRect.iHeight)return _this.oImg.setAttribute("width",_this.oImgRect.iWidth),_this.oImg.setAttribute("height",_this.oImgRect.iHeight),void(_this.iScaling&SCALE_CENTERV&&(_this.oImg.style.marginTop=(iHeight-_this.oImgRect.iHeight)/2+"px"));var oSize={width:iWidth,height:iHeight},oDest=_this.oImgRect.Scale(oSize.width,null);oDest.iHeight>oSize.height?(oDest=_this.oImgRect.Scale(null,oSize.height),_this.oImg.setAttribute("width",oDest.iWidth),_this.oImg.removeAttribute("height"),_this.oImg.style.marginTop="0px"):(_this.oImg.removeAttribute("width"),_this.oImg.setAttribute("height",oDest.iHeight),_this.iScaling&SCALE_CENTERV&&(_this.oImg.style.marginTop=(iHeight-oDest.iHeight)/2+"px")),delete oDest},this.oImage=new Image,AddEventHandler(this.oImage,"load",this.fnImageLoad),setTimeout(function(){_this.oImage.src=cSrc},10)}window.navigator.userAgent.indexOf("MSIE 8",0)>-1&&"object"==typeof window.Workspace&&window.Workspace.OnLoadAutoImage();